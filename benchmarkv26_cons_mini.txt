/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 13
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-09-15 (400 samples)
Valid: 2022-09-16 to 2023-03-29 (120 samples)
Class distribution in validation: {1.0: 64, 0.0: 56}
   âœ… Positions opened: 3/120 (2.5%)
   ğŸ” Filter rejections: threshold=55 | percentile=17 | technical=45 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=3/3 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.919

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-09-16 to 2023-03-29
      Winning trades: 3/3 (100.0% win rate)
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000234
      Std dev: 0.002964
      Min/Max: -0.013206 / 0.024858
      Long positions: 3
  â†’ AUC: 0.5130 | AUCPR: 0.5354 | Accuracy: 0.5583 (0.4917 w/ threshold)
  â†’ Sharpe: 0.7262 (0.8262 w/ threshold) | Max DD: -0.0132
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-18 to 2023-03-29 (400 samples)
Valid: 2023-03-30 to 2023-10-10 (120 samples)
Class distribution in validation: {1.0: 77, 0.0: 43}
   âœ… Positions opened: 16/120 (13.3%)
   ğŸ” Filter rejections: threshold=63 | percentile=36 | technical=5 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=16/16 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-03-30 to 2023-10-10
      Winning trades: 9/16 (56.2% win rate)
      Losing trades: 7
      Avoided losses: 36 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000513
      Std dev: 0.008005
      Min/Max: -0.021498 / 0.072435
      Long positions: 16
  â†’ Threshold (sharpe): BUY=0.6400 | Sharpe: 0.90 | WinRate: 52.4%
  â†’ AUC: 0.3428 | AUCPR: 0.5863 | Accuracy: 0.4083 (0.3750 w/ threshold)
  â†’ Sharpe: 1.7305 (0.8606 w/ threshold) | Max DD: -0.0282
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2022-01-11 to 2023-10-10 (400 samples)
Valid: 2023-10-11 to 2024-05-16 (120 samples)
Class distribution in validation: {1.0: 61, 0.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=63 | percentile=10 | technical=13 | regime_gate=8 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-10-11 to 2024-05-16
      Winning trades: 9/26 (34.6% win rate)
      Losing trades: 17
      Avoided losses: 42 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000437
      Std dev: 0.005884
      Min/Max: -0.029572 / 0.026600
      Long positions: 26
  â†’ AUC: 0.4293 | AUCPR: 0.4550 | Accuracy: 0.4667 (0.4250 w/ threshold)
  â†’ Sharpe: 1.6772 (0.9644 w/ threshold) | Max DD: -0.0323
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-07-21 to 2024-05-16 (400 samples)
Valid: 2024-05-17 to 2024-11-26 (120 samples)
Class distribution in validation: {0.0: 60, 1.0: 60}
   âœ… Positions opened: 6/120 (5.0%)
   ğŸ” Filter rejections: threshold=79 | percentile=28 | technical=7 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=6/6 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.348

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-05-17 to 2024-11-26
      Winning trades: 5/6 (83.3% win rate)
      Losing trades: 1
      Avoided losses: 59 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000063
      Std dev: 0.000500
      Min/Max: -0.000390 / 0.004504
      Long positions: 6
  â†’ Threshold (sharpe): BUY=0.6100 | Sharpe: 0.96 | WinRate: 50.0%
  â†’ AUC: 0.8036 | AUCPR: 0.7560 | Accuracy: 0.7000 (0.5333 w/ threshold)
  â†’ Sharpe: 1.6455 (-0.5334 w/ threshold) | Max DD: -0.0008
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-01-20 to 2024-11-26 (400 samples)
Valid: 2024-11-27 to 2025-06-17 (120 samples)
Class distribution in validation: {0.0: 75, 1.0: 45}
   âœ… Positions opened: 12/120 (10.0%)
   ğŸ” Filter rejections: threshold=64 | percentile=11 | technical=33 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=12/12 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.776

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-11-27 to 2025-06-17
      Winning trades: 5/12 (41.7% win rate)
      Losing trades: 7
      Avoided losses: 68 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000061
      Std dev: 0.003576
      Min/Max: -0.013426 / 0.032055
      Long positions: 12
  â†’ AUC: 0.5452 | AUCPR: 0.4005 | Accuracy: 0.5167 (0.6083 w/ threshold)
  â†’ Sharpe: -1.1502 (-0.0811 w/ threshold) | Max DD: -0.0377
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-08-07 to 2025-06-17 (400 samples)
Valid: 2025-06-18 to 2026-01-12 (120 samples)
Class distribution in validation: {0.0: 61, 1.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=59 | percentile=6 | technical=17 | regime_gate=12 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-06-18 to 2026-01-12
      Winning trades: 14/26 (53.8% win rate)
      Losing trades: 12
      Avoided losses: 49 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000601
      Std dev: 0.004247
      Min/Max: -0.021899 / 0.021688
      Long positions: 26
  â†’ AUC: 0.6260 | AUCPR: 0.5882 | Accuracy: 0.5750 (0.5250 w/ threshold)
  â†’ Sharpe: 1.3255 (1.9496 w/ threshold) | Max DD: -0.0265
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.512974 0.535434  0.558333              0.491667  0.726199     -0.013206            0.826158   1.000000 0.046875 0.089552           0.61             NaN           sharpe                 True           0.028034    0.018846    0.421890  3.675058       0.666667            3                      3                  0.025000        0.025000                  65                            3      0.053845                         55                          17                         45                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.342797 0.586274  0.408333              0.375000  1.730534     -0.028165            0.860648   0.562500 0.116883 0.193548           0.64             NaN           sharpe                 True           0.061603    0.026603    0.284395 14.000000       0.500000           16                     21                  0.175000        0.133333                  57                           16      0.037757                         63                          36                          5                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.429286 0.455041  0.466667              0.425000  1.677212     -0.032274            0.964373   0.346154 0.147541 0.206896           0.64             NaN           sharpe                 True           0.052416    0.027416    0.403700 10.000000       0.461538           26                     26                  0.216667        0.216667                  57                           26      0.031817                         63                          10                         13                            8                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.803611 0.755997  0.700000              0.533333  1.645520     -0.000765           -0.533374   0.833333 0.083333 0.151515           0.61             NaN           sharpe                 True           0.007508    0.002744   -2.081138  1.905554       0.500000            6                     12                  0.100000        0.050000                  41                            6      0.018376                         79                          28                          7                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.545185 0.400497  0.516667              0.608333 -1.150203     -0.037723           -0.081137   0.416667 0.111111 0.175438           0.64             NaN           sharpe                 True           0.007330   -0.008190   -0.659199  6.208242       0.416667           12                     12                  0.100000        0.100000                  56                           12      0.047787                         64                          11                         33                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.626007 0.588161  0.575000              0.525000  1.325453     -0.026465            1.949612   0.538462 0.237288 0.329411           0.64             NaN           sharpe                 True           0.072120    0.042120    1.046043 12.000000       0.538462           26                     26                  0.216667        0.216667                  61                           26      0.025248                         59                           6                         17                           12                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.5433 Â± 0.1605
AUCPR:                0.5536 Â± 0.1239
Accuracy:             0.5375 Â± 0.1004
Accuracy (threshold): 0.4931 Â± 0.0831
Sharpe Ratio:         0.9925 Â± 1.1147
Sharpe (threshold):   0.6644 Â± 0.8714
Net Sharpe:           -0.0974 Â± 1.1158
Net Return:           0.0183 Â± 0.0182
Turnover:             7.9648 Â± 4.7969
Trade Coverage:       0.1236 Â± 0.0814
EV Mean/Fold:         0.03581 Â± 0.01345
Coverage Ratio:       1.0000
Max Drawdown:         -0.0231 Â± 0.0137
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 837 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 837                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5433                         â•‘
â•‘ Average Accuracy: 0.5327                 â•‘
â•‘ Average Sharpe Ratio: 1.0430             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000619                      â•‘
â•‘ Accuracy Variance: 0.000514             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
           ADX_14    0.170502
             macd    0.128160
         ema_long    0.101580
        ema_short    0.093348
distance_to_ma200    0.092510
  close_vix_ratio    0.078448
            macds    0.074936
              mfi    0.063843
    volatility_20    0.061514
   price_to_sma20    0.051008
              atr    0.043066
           roc_20    0.041085
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - MSFT                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 51.7%                                              â”‚
â”‚    â€¢ Max Probability: 62.5%                                                  â”‚
â”‚    â€¢ Min Probability: 36.0%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 26.5% (Low consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $392.74                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $420.27 (+7.01%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $378.97 (-3.50%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 51.7%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 392.739990234375,
  "profit_target": 420.270839075018,
  "stop_loss": 378.9745658140535,
  "probability": 0.5174471586942673,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.01686 | Quality=0.017 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 13
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-09-15 (400 samples)
Valid: 2022-09-16 to 2023-03-29 (120 samples)
Class distribution in validation: {1.0: 64, 0.0: 56}
   âœ… Positions opened: 3/120 (2.5%)
   ğŸ” Filter rejections: threshold=55 | percentile=20 | technical=42 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=3/3 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.919

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-09-16 to 2023-03-29
      Winning trades: 3/3 (100.0% win rate)
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000234
      Std dev: 0.002964
      Min/Max: -0.013206 / 0.024858
      Long positions: 3
  â†’ AUC: 0.4911 | AUCPR: 0.5256 | Accuracy: 0.5417 (0.4917 w/ threshold)
  â†’ Sharpe: 0.7267 (0.8262 w/ threshold) | Max DD: -0.0132
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-18 to 2023-03-29 (400 samples)
Valid: 2023-03-30 to 2023-10-10 (120 samples)
Class distribution in validation: {1.0: 77, 0.0: 43}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=64 | percentile=4 | technical=15 | regime_gate=11 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-03-30 to 2023-10-10
      Winning trades: 10/26 (38.5% win rate)
      Losing trades: 16
      Avoided losses: 27 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000136
      Std dev: 0.006357
      Min/Max: -0.023977 / 0.039800
      Long positions: 26
  â†’ AUC: 0.3129 | AUCPR: 0.5563 | Accuracy: 0.3250 (0.3083 w/ threshold)
  â†’ Sharpe: 0.5762 (-0.5388 w/ threshold) | Max DD: -0.0548
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2022-01-11 to 2023-10-10 (400 samples)
Valid: 2023-10-11 to 2024-05-16 (120 samples)
Class distribution in validation: {1.0: 61, 0.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=68 | percentile=5 | technical=13 | regime_gate=8 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-10-11 to 2024-05-16
      Winning trades: 10/26 (38.5% win rate)
      Losing trades: 16
      Avoided losses: 43 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000483
      Std dev: 0.005846
      Min/Max: -0.029572 / 0.026600
      Long positions: 26
  â†’ AUC: 0.4182 | AUCPR: 0.4506 | Accuracy: 0.4583 (0.4417 w/ threshold)
  â†’ Sharpe: 1.7212 (1.0963 w/ threshold) | Max DD: -0.0323
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-07-21 to 2024-05-16 (400 samples)
Valid: 2024-05-17 to 2024-11-26 (120 samples)
Class distribution in validation: {0.0: 60, 1.0: 60}
   âœ… Positions opened: 10/120 (8.3%)
   ğŸ” Filter rejections: threshold=75 | percentile=31 | technical=4 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=10/10 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.446

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-05-17 to 2024-11-26
      Winning trades: 6/10 (60.0% win rate)
      Losing trades: 4
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000093
      Std dev: 0.001296
      Min/Max: -0.010516 / 0.005483
      Long positions: 10
  â†’ Threshold (sharpe): BUY=0.6100 | Sharpe: 0.69 | WinRate: 72.2%
  â†’ AUC: 0.8108 | AUCPR: 0.7511 | Accuracy: 0.7000 (0.5167 w/ threshold)
  â†’ Sharpe: 1.6455 (0.1652 w/ threshold) | Max DD: -0.0105
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-01-20 to 2024-11-26 (400 samples)
Valid: 2024-11-27 to 2025-06-17 (120 samples)
Class distribution in validation: {0.0: 75, 1.0: 45}
   âœ… Positions opened: 11/120 (9.2%)
   ğŸ” Filter rejections: threshold=64 | percentile=12 | technical=33 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=11/11 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.776

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-11-27 to 2025-06-17
      Winning trades: 5/11 (45.5% win rate)
      Losing trades: 6
      Avoided losses: 69 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000079
      Std dev: 0.003571
      Min/Max: -0.013426 / 0.032055
      Long positions: 11
  â†’ AUC: 0.5505 | AUCPR: 0.4044 | Accuracy: 0.5083 (0.6167 w/ threshold)
  â†’ Sharpe: -1.0070 (-0.0014 w/ threshold) | Max DD: -0.0356
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-08-07 to 2025-06-17 (400 samples)
Valid: 2025-06-18 to 2026-01-12 (120 samples)
Class distribution in validation: {0.0: 61, 1.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=60 | percentile=6 | technical=17 | regime_gate=11 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-06-18 to 2026-01-12
      Winning trades: 15/26 (57.7% win rate)
      Losing trades: 11
      Avoided losses: 50 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000641
      Std dev: 0.004280
      Min/Max: -0.021899 / 0.021688
      Long positions: 26
  â†’ AUC: 0.6357 | AUCPR: 0.5969 | Accuracy: 0.5833 (0.5417 w/ threshold)
  â†’ Sharpe: 1.2390 (2.0845 w/ threshold) | Max DD: -0.0265
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.491071 0.525580  0.541667              0.491667  0.726659     -0.013206            0.826158   1.000000 0.046875 0.089552           0.61             NaN           sharpe                 True           0.028034    0.018846    0.421890  3.675058       0.666667            3                      3                  0.025000        0.025000                  65                            3      0.053845                         55                          20                         42                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.312896 0.556257  0.325000              0.308333  0.576209     -0.054751           -0.538808   0.384615 0.129870 0.194174           0.64             NaN           sharpe                 True          -0.016370   -0.041370   -1.035277 10.000000       0.461538           26                     26                  0.216667        0.216667                  56                           26      0.037757                         64                           4                         15                           11                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.418172 0.450620  0.458333              0.441667  1.721154     -0.032274            1.096341   0.384615 0.163934 0.229885           0.64             NaN           sharpe                 True           0.057975    0.032975    0.529111 10.000000       0.461538           26                     26                  0.216667        0.216667                  52                           26      0.031817                         68                           5                         13                            8                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.810833 0.751124  0.700000              0.516667  1.645520     -0.010516            0.165168   0.600000 0.100000 0.171428           0.61             NaN           sharpe                 True           0.011142    0.001531   -0.864839  3.844395       0.700000           10                     18                  0.150000        0.083333                  45                           10      0.020519                         75                          31                          4                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.550519 0.404446  0.508333              0.616667 -1.007047     -0.035645           -0.001428   0.454545 0.111111 0.178571           0.61             NaN           sharpe                 True           0.009485   -0.006035   -0.571636  6.208242       0.454545           11                     11                  0.091667        0.091667                  56                           11      0.047787                         64                          12                         33                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.635732 0.596901  0.583333              0.541667  1.239016     -0.026465            2.084544   0.576923 0.254237 0.352941           0.64             NaN           sharpe                 True           0.076970    0.046970    1.186608 12.000000       0.576923           26                     26                  0.216667        0.216667                  60                           26      0.025248                         60                           6                         17                           11                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.5365 Â± 0.1740
AUCPR:                0.5475 Â± 0.1219
Accuracy:             0.5194 Â± 0.1256
Accuracy (threshold): 0.4861 Â± 0.1046
Sharpe Ratio:         0.8169 Â± 1.0075
Sharpe (threshold):   0.6053 Â± 0.9326
Net Sharpe:           -0.0557 Â± 0.8937
Net Return:           0.0088 Â± 0.0314
Turnover:             7.6213 Â± 3.5306
Trade Coverage:       0.1417 Â± 0.0853
EV Mean/Fold:         0.03616 Â± 0.01291
Coverage Ratio:       1.0000
Max Drawdown:         -0.0288 Â± 0.0162
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 838 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 838                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5433                         â•‘
â•‘ Average Accuracy: 0.5327                 â•‘
â•‘ Average Sharpe Ratio: 1.0428             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000619                      â•‘
â•‘ Accuracy Variance: 0.000514             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
           ADX_14    0.159464
             macd    0.110481
         ema_long    0.107796
        ema_short    0.096095
  close_vix_ratio    0.089146
            macds    0.088482
              mfi    0.069082
    volatility_20    0.067571
distance_to_ma200    0.066596
   price_to_sma20    0.057937
           roc_20    0.045473
              atr    0.041878
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - MSFT                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 47.6%                                              â”‚
â”‚    â€¢ Max Probability: 64.3%                                                  â”‚
â”‚    â€¢ Min Probability: 19.3%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 45.0% (Low consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $392.74                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $420.27 (+7.01%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $378.97 (-3.50%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 47.6%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 392.739990234375,
  "profit_target": 420.270839075018,
  "stop_loss": 378.9745658140535,
  "probability": 0.47588181495666504,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.01249 | Quality=0.000 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 12
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-09-15 (400 samples)
Valid: 2022-09-16 to 2023-03-29 (120 samples)
Class distribution in validation: {1.0: 64, 0.0: 56}
   âœ… Positions opened: 3/120 (2.5%)
   ğŸ” Filter rejections: threshold=55 | percentile=17 | technical=45 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=3/3 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.919

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-09-16 to 2023-03-29
      Winning trades: 3/3 (100.0% win rate)
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000234
      Std dev: 0.002964
      Min/Max: -0.013206 / 0.024858
      Long positions: 3
  â†’ AUC: 0.5130 | AUCPR: 0.5354 | Accuracy: 0.5583 (0.4917 w/ threshold)
  â†’ Sharpe: 0.7262 (0.8262 w/ threshold) | Max DD: -0.0132
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-18 to 2023-03-29 (400 samples)
Valid: 2023-03-30 to 2023-10-10 (120 samples)
Class distribution in validation: {1.0: 77, 0.0: 43}
   âœ… Positions opened: 16/120 (13.3%)
   ğŸ” Filter rejections: threshold=63 | percentile=36 | technical=5 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=16/16 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-03-30 to 2023-10-10
      Winning trades: 9/16 (56.2% win rate)
      Losing trades: 7
      Avoided losses: 36 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000513
      Std dev: 0.008005
      Min/Max: -0.021498 / 0.072435
      Long positions: 16
  â†’ Threshold (sharpe): BUY=0.6400 | Sharpe: 0.90 | WinRate: 52.4%
  â†’ AUC: 0.3428 | AUCPR: 0.5863 | Accuracy: 0.4083 (0.3750 w/ threshold)
  â†’ Sharpe: 1.7305 (0.8606 w/ threshold) | Max DD: -0.0282
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2022-01-11 to 2023-10-10 (400 samples)
Valid: 2023-10-11 to 2024-05-16 (120 samples)
Class distribution in validation: {1.0: 61, 0.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=63 | percentile=10 | technical=13 | regime_gate=8 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-10-11 to 2024-05-16
      Winning trades: 9/26 (34.6% win rate)
      Losing trades: 17
      Avoided losses: 42 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000437
      Std dev: 0.005884
      Min/Max: -0.029572 / 0.026600
      Long positions: 26
  â†’ AUC: 0.4293 | AUCPR: 0.4550 | Accuracy: 0.4667 (0.4250 w/ threshold)
  â†’ Sharpe: 1.6772 (0.9644 w/ threshold) | Max DD: -0.0323
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-07-21 to 2024-05-16 (400 samples)
Valid: 2024-05-17 to 2024-11-26 (120 samples)
Class distribution in validation: {0.0: 60, 1.0: 60}
   âœ… Positions opened: 6/120 (5.0%)
   ğŸ” Filter rejections: threshold=79 | percentile=28 | technical=7 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=6/6 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.348

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-05-17 to 2024-11-26
      Winning trades: 5/6 (83.3% win rate)
      Losing trades: 1
      Avoided losses: 59 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000063
      Std dev: 0.000500
      Min/Max: -0.000390 / 0.004504
      Long positions: 6
  â†’ Threshold (sharpe): BUY=0.6100 | Sharpe: 0.96 | WinRate: 50.0%
  â†’ AUC: 0.8036 | AUCPR: 0.7560 | Accuracy: 0.7000 (0.5333 w/ threshold)
  â†’ Sharpe: 1.6455 (-0.5334 w/ threshold) | Max DD: -0.0008
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-01-20 to 2024-11-26 (400 samples)
Valid: 2024-11-27 to 2025-06-17 (120 samples)
Class distribution in validation: {0.0: 75, 1.0: 45}
   âœ… Positions opened: 12/120 (10.0%)
   ğŸ” Filter rejections: threshold=64 | percentile=11 | technical=33 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=12/12 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.776

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-11-27 to 2025-06-17
      Winning trades: 5/12 (41.7% win rate)
      Losing trades: 7
      Avoided losses: 68 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000061
      Std dev: 0.003576
      Min/Max: -0.013426 / 0.032055
      Long positions: 12
  â†’ AUC: 0.5452 | AUCPR: 0.4005 | Accuracy: 0.5167 (0.6083 w/ threshold)
  â†’ Sharpe: -1.1502 (-0.0811 w/ threshold) | Max DD: -0.0377
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-08-07 to 2025-06-17 (400 samples)
Valid: 2025-06-18 to 2026-01-12 (120 samples)
Class distribution in validation: {0.0: 61, 1.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=59 | percentile=6 | technical=17 | regime_gate=12 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-06-18 to 2026-01-12
      Winning trades: 14/26 (53.8% win rate)
      Losing trades: 12
      Avoided losses: 49 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000601
      Std dev: 0.004247
      Min/Max: -0.021899 / 0.021688
      Long positions: 26
  â†’ AUC: 0.6260 | AUCPR: 0.5882 | Accuracy: 0.5750 (0.5250 w/ threshold)
  â†’ Sharpe: 1.3255 (1.9496 w/ threshold) | Max DD: -0.0265
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.512974 0.535434  0.558333              0.491667  0.726199     -0.013206            0.826158   1.000000 0.046875 0.089552           0.61             NaN           sharpe                 True           0.028034    0.018846    0.421890  3.675058       0.666667            3                      3                  0.025000        0.025000                  65                            3      0.053845                         55                          17                         45                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.342797 0.586274  0.408333              0.375000  1.730534     -0.028165            0.860648   0.562500 0.116883 0.193548           0.64             NaN           sharpe                 True           0.061603    0.026603    0.284395 14.000000       0.500000           16                     21                  0.175000        0.133333                  57                           16      0.037757                         63                          36                          5                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.429286 0.455041  0.466667              0.425000  1.677212     -0.032274            0.964373   0.346154 0.147541 0.206896           0.64             NaN           sharpe                 True           0.052416    0.027416    0.403700 10.000000       0.461538           26                     26                  0.216667        0.216667                  57                           26      0.031817                         63                          10                         13                            8                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.803611 0.755997  0.700000              0.533333  1.645520     -0.000765           -0.533374   0.833333 0.083333 0.151515           0.61             NaN           sharpe                 True           0.007508    0.002744   -2.081138  1.905554       0.500000            6                     12                  0.100000        0.050000                  41                            6      0.018376                         79                          28                          7                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.545185 0.400497  0.516667              0.608333 -1.150203     -0.037723           -0.081137   0.416667 0.111111 0.175438           0.64             NaN           sharpe                 True           0.007330   -0.008190   -0.659199  6.208242       0.416667           12                     12                  0.100000        0.100000                  56                           12      0.047787                         64                          11                         33                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.626007 0.588161  0.575000              0.525000  1.325453     -0.026465            1.949612   0.538462 0.237288 0.329411           0.64             NaN           sharpe                 True           0.072120    0.042120    1.046043 12.000000       0.538462           26                     26                  0.216667        0.216667                  61                           26      0.025248                         59                           6                         17                           12                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.5433 Â± 0.1605
AUCPR:                0.5536 Â± 0.1239
Accuracy:             0.5375 Â± 0.1004
Accuracy (threshold): 0.4931 Â± 0.0831
Sharpe Ratio:         0.9925 Â± 1.1147
Sharpe (threshold):   0.6644 Â± 0.8714
Net Sharpe:           -0.0974 Â± 1.1158
Net Return:           0.0183 Â± 0.0182
Turnover:             7.9648 Â± 4.7969
Trade Coverage:       0.1236 Â± 0.0814
EV Mean/Fold:         0.03581 Â± 0.01345
Coverage Ratio:       1.0000
Max Drawdown:         -0.0231 Â± 0.0137
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 839 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 839                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5433                         â•‘
â•‘ Average Accuracy: 0.5327                 â•‘
â•‘ Average Sharpe Ratio: 1.0427             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000618                      â•‘
â•‘ Accuracy Variance: 0.000513             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
           ADX_14    0.170502
             macd    0.128160
         ema_long    0.101580
        ema_short    0.093348
distance_to_ma200    0.092510
  close_vix_ratio    0.078448
            macds    0.074936
              mfi    0.063843
    volatility_20    0.061514
   price_to_sma20    0.051008
              atr    0.043066
           roc_20    0.041085
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - MSFT                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 51.7%                                              â”‚
â”‚    â€¢ Max Probability: 62.5%                                                  â”‚
â”‚    â€¢ Min Probability: 36.0%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 26.5% (Low consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $392.74                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $420.27 (+7.01%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $378.97 (-3.50%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 51.7%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 392.739990234375,
  "profit_target": 420.270839075018,
  "stop_loss": 378.9745658140535,
  "probability": 0.5174471586942673,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.01686 | Quality=0.017 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 12
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-09-15 (400 samples)
Valid: 2022-09-16 to 2023-03-29 (120 samples)
Class distribution in validation: {1.0: 64, 0.0: 56}
   âœ… Positions opened: 3/120 (2.5%)
   ğŸ” Filter rejections: threshold=55 | percentile=20 | technical=42 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=3/3 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.919

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-09-16 to 2023-03-29
      Winning trades: 3/3 (100.0% win rate)
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000234
      Std dev: 0.002964
      Min/Max: -0.013206 / 0.024858
      Long positions: 3
  â†’ AUC: 0.4911 | AUCPR: 0.5256 | Accuracy: 0.5417 (0.4917 w/ threshold)
  â†’ Sharpe: 0.7267 (0.8262 w/ threshold) | Max DD: -0.0132
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-18 to 2023-03-29 (400 samples)
Valid: 2023-03-30 to 2023-10-10 (120 samples)
Class distribution in validation: {1.0: 77, 0.0: 43}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=64 | percentile=4 | technical=15 | regime_gate=11 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-03-30 to 2023-10-10
      Winning trades: 10/26 (38.5% win rate)
      Losing trades: 16
      Avoided losses: 27 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000136
      Std dev: 0.006357
      Min/Max: -0.023977 / 0.039800
      Long positions: 26
  â†’ AUC: 0.3129 | AUCPR: 0.5563 | Accuracy: 0.3250 (0.3083 w/ threshold)
  â†’ Sharpe: 0.5762 (-0.5388 w/ threshold) | Max DD: -0.0548
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2022-01-11 to 2023-10-10 (400 samples)
Valid: 2023-10-11 to 2024-05-16 (120 samples)
Class distribution in validation: {1.0: 61, 0.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=68 | percentile=5 | technical=13 | regime_gate=8 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-10-11 to 2024-05-16
      Winning trades: 10/26 (38.5% win rate)
      Losing trades: 16
      Avoided losses: 43 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000483
      Std dev: 0.005846
      Min/Max: -0.029572 / 0.026600
      Long positions: 26
  â†’ AUC: 0.4182 | AUCPR: 0.4506 | Accuracy: 0.4583 (0.4417 w/ threshold)
  â†’ Sharpe: 1.7212 (1.0963 w/ threshold) | Max DD: -0.0323
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-07-21 to 2024-05-16 (400 samples)
Valid: 2024-05-17 to 2024-11-26 (120 samples)
Class distribution in validation: {0.0: 60, 1.0: 60}
   âœ… Positions opened: 10/120 (8.3%)
   ğŸ” Filter rejections: threshold=75 | percentile=31 | technical=4 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=10/10 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.446

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-05-17 to 2024-11-26
      Winning trades: 6/10 (60.0% win rate)
      Losing trades: 4
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000093
      Std dev: 0.001296
      Min/Max: -0.010516 / 0.005483
      Long positions: 10
  â†’ Threshold (sharpe): BUY=0.6100 | Sharpe: 0.69 | WinRate: 72.2%
  â†’ AUC: 0.8108 | AUCPR: 0.7511 | Accuracy: 0.7000 (0.5167 w/ threshold)
  â†’ Sharpe: 1.6455 (0.1652 w/ threshold) | Max DD: -0.0105
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-01-20 to 2024-11-26 (400 samples)
Valid: 2024-11-27 to 2025-06-17 (120 samples)
Class distribution in validation: {0.0: 75, 1.0: 45}
   âœ… Positions opened: 11/120 (9.2%)
   ğŸ” Filter rejections: threshold=64 | percentile=12 | technical=33 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=11/11 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.776

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-11-27 to 2025-06-17
      Winning trades: 5/11 (45.5% win rate)
      Losing trades: 6
      Avoided losses: 69 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000079
      Std dev: 0.003571
      Min/Max: -0.013426 / 0.032055
      Long positions: 11
  â†’ AUC: 0.5505 | AUCPR: 0.4044 | Accuracy: 0.5083 (0.6167 w/ threshold)
  â†’ Sharpe: -1.0070 (-0.0014 w/ threshold) | Max DD: -0.0356
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-08-07 to 2025-06-17 (400 samples)
Valid: 2025-06-18 to 2026-01-12 (120 samples)
Class distribution in validation: {0.0: 61, 1.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=60 | percentile=6 | technical=17 | regime_gate=11 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-06-18 to 2026-01-12
      Winning trades: 15/26 (57.7% win rate)
      Losing trades: 11
      Avoided losses: 50 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000641
      Std dev: 0.004280
      Min/Max: -0.021899 / 0.021688
      Long positions: 26
  â†’ AUC: 0.6357 | AUCPR: 0.5969 | Accuracy: 0.5833 (0.5417 w/ threshold)
  â†’ Sharpe: 1.2390 (2.0845 w/ threshold) | Max DD: -0.0265
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.491071 0.525580  0.541667              0.491667  0.726659     -0.013206            0.826158   1.000000 0.046875 0.089552           0.61             NaN           sharpe                 True           0.028034    0.018846    0.421890  3.675058       0.666667            3                      3                  0.025000        0.025000                  65                            3      0.053845                         55                          20                         42                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.312896 0.556257  0.325000              0.308333  0.576209     -0.054751           -0.538808   0.384615 0.129870 0.194174           0.64             NaN           sharpe                 True          -0.016370   -0.041370   -1.035277 10.000000       0.461538           26                     26                  0.216667        0.216667                  56                           26      0.037757                         64                           4                         15                           11                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.418172 0.450620  0.458333              0.441667  1.721154     -0.032274            1.096341   0.384615 0.163934 0.229885           0.64             NaN           sharpe                 True           0.057975    0.032975    0.529111 10.000000       0.461538           26                     26                  0.216667        0.216667                  52                           26      0.031817                         68                           5                         13                            8                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.810833 0.751124  0.700000              0.516667  1.645520     -0.010516            0.165168   0.600000 0.100000 0.171428           0.61             NaN           sharpe                 True           0.011142    0.001531   -0.864839  3.844395       0.700000           10                     18                  0.150000        0.083333                  45                           10      0.020519                         75                          31                          4                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.550519 0.404446  0.508333              0.616667 -1.007047     -0.035645           -0.001428   0.454545 0.111111 0.178571           0.61             NaN           sharpe                 True           0.009485   -0.006035   -0.571636  6.208242       0.454545           11                     11                  0.091667        0.091667                  56                           11      0.047787                         64                          12                         33                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.635732 0.596901  0.583333              0.541667  1.239016     -0.026465            2.084544   0.576923 0.254237 0.352941           0.64             NaN           sharpe                 True           0.076970    0.046970    1.186608 12.000000       0.576923           26                     26                  0.216667        0.216667                  60                           26      0.025248                         60                           6                         17                           11                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.5365 Â± 0.1740
AUCPR:                0.5475 Â± 0.1219
Accuracy:             0.5194 Â± 0.1256
Accuracy (threshold): 0.4861 Â± 0.1046
Sharpe Ratio:         0.8169 Â± 1.0075
Sharpe (threshold):   0.6053 Â± 0.9326
Net Sharpe:           -0.0557 Â± 0.8937
Net Return:           0.0088 Â± 0.0314
Turnover:             7.6213 Â± 3.5306
Trade Coverage:       0.1417 Â± 0.0853
EV Mean/Fold:         0.03616 Â± 0.01291
Coverage Ratio:       1.0000
Max Drawdown:         -0.0288 Â± 0.0162
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 840 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 840                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5433                         â•‘
â•‘ Average Accuracy: 0.5327                 â•‘
â•‘ Average Sharpe Ratio: 1.0424             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000617                      â•‘
â•‘ Accuracy Variance: 0.000513             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
           ADX_14    0.159464
             macd    0.110481
         ema_long    0.107796
        ema_short    0.096095
  close_vix_ratio    0.089146
            macds    0.088482
              mfi    0.069082
    volatility_20    0.067571
distance_to_ma200    0.066596
   price_to_sma20    0.057937
           roc_20    0.045473
              atr    0.041878
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - MSFT                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 47.6%                                              â”‚
â”‚    â€¢ Max Probability: 64.3%                                                  â”‚
â”‚    â€¢ Min Probability: 19.3%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 45.0% (Low consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $392.74                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $420.27 (+7.01%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $378.97 (-3.50%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 47.6%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 392.739990234375,
  "profit_target": 420.270839075018,
  "stop_loss": 378.9745658140535,
  "probability": 0.47588181495666504,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.01249 | Quality=0.000 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 13
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-09-15 (400 samples)
Valid: 2022-09-16 to 2023-03-29 (120 samples)
Class distribution in validation: {1.0: 64, 0.0: 56}
   âœ… Positions opened: 3/120 (2.5%)
   ğŸ” Filter rejections: threshold=55 | percentile=17 | technical=45 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=3/3 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.919

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-09-16 to 2023-03-29
      Winning trades: 3/3 (100.0% win rate)
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000234
      Std dev: 0.002964
      Min/Max: -0.013206 / 0.024858
      Long positions: 3
  â†’ AUC: 0.5130 | AUCPR: 0.5354 | Accuracy: 0.5583 (0.4917 w/ threshold)
  â†’ Sharpe: 0.7262 (0.8262 w/ threshold) | Max DD: -0.0132
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-18 to 2023-03-29 (400 samples)
Valid: 2023-03-30 to 2023-10-10 (120 samples)
Class distribution in validation: {1.0: 77, 0.0: 43}
   âœ… Positions opened: 16/120 (13.3%)
   ğŸ” Filter rejections: threshold=63 | percentile=36 | technical=5 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=16/16 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-03-30 to 2023-10-10
      Winning trades: 9/16 (56.2% win rate)
      Losing trades: 7
      Avoided losses: 36 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000513
      Std dev: 0.008005
      Min/Max: -0.021498 / 0.072435
      Long positions: 16
  â†’ Threshold (sharpe): BUY=0.6600 | Sharpe: 0.90 | WinRate: 52.4%
  â†’ AUC: 0.3428 | AUCPR: 0.5863 | Accuracy: 0.4083 (0.3750 w/ threshold)
  â†’ Sharpe: 1.7305 (0.8606 w/ threshold) | Max DD: -0.0282
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2022-01-11 to 2023-10-10 (400 samples)
Valid: 2023-10-11 to 2024-05-16 (120 samples)
Class distribution in validation: {1.0: 61, 0.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=64 | percentile=9 | technical=13 | regime_gate=8 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-10-11 to 2024-05-16
      Winning trades: 9/26 (34.6% win rate)
      Losing trades: 17
      Avoided losses: 42 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000437
      Std dev: 0.005884
      Min/Max: -0.029572 / 0.026600
      Long positions: 26
  â†’ AUC: 0.4293 | AUCPR: 0.4550 | Accuracy: 0.4667 (0.4250 w/ threshold)
  â†’ Sharpe: 1.6772 (0.9644 w/ threshold) | Max DD: -0.0323
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-07-21 to 2024-05-16 (400 samples)
Valid: 2024-05-17 to 2024-11-26 (120 samples)
Class distribution in validation: {0.0: 60, 1.0: 60}
   âœ… Positions opened: 5/120 (4.2%)
   ğŸ” Filter rejections: threshold=85 | percentile=25 | technical=5 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=5/5 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.343

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-05-17 to 2024-11-26
      Winning trades: 4/5 (80.0% win rate)
      Losing trades: 1
      Avoided losses: 59 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000059
      Std dev: 0.000474
      Min/Max: -0.000353 / 0.004312
      Long positions: 5
  â†’ Threshold (sharpe): BUY=0.6300 | Sharpe: 0.96 | WinRate: 50.0%
  â†’ AUC: 0.8036 | AUCPR: 0.7560 | Accuracy: 0.7000 (0.5250 w/ threshold)
  â†’ Sharpe: 1.6455 (-0.6701 w/ threshold) | Max DD: -0.0007
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-01-20 to 2024-11-26 (400 samples)
Valid: 2024-11-27 to 2025-06-17 (120 samples)
Class distribution in validation: {0.0: 75, 1.0: 45}
   âœ… Positions opened: 12/120 (10.0%)
   ğŸ” Filter rejections: threshold=65 | percentile=10 | technical=33 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=12/12 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.776

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-11-27 to 2025-06-17
      Winning trades: 5/12 (41.7% win rate)
      Losing trades: 7
      Avoided losses: 68 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000061
      Std dev: 0.003576
      Min/Max: -0.013426 / 0.032055
      Long positions: 12
  â†’ AUC: 0.5452 | AUCPR: 0.4005 | Accuracy: 0.5167 (0.6083 w/ threshold)
  â†’ Sharpe: -1.1502 (-0.0811 w/ threshold) | Max DD: -0.0377
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-08-07 to 2025-06-17 (400 samples)
Valid: 2025-06-18 to 2026-01-12 (120 samples)
Class distribution in validation: {0.0: 61, 1.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=59 | percentile=6 | technical=17 | regime_gate=12 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-06-18 to 2026-01-12
      Winning trades: 14/26 (53.8% win rate)
      Losing trades: 12
      Avoided losses: 49 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000601
      Std dev: 0.004247
      Min/Max: -0.021899 / 0.021688
      Long positions: 26
  â†’ AUC: 0.6260 | AUCPR: 0.5882 | Accuracy: 0.5750 (0.5250 w/ threshold)
  â†’ Sharpe: 1.3255 (1.9496 w/ threshold) | Max DD: -0.0265
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.512974 0.535434  0.558333              0.491667  0.726199     -0.013206            0.826158   1.000000 0.046875 0.089552       0.623397             NaN           sharpe                 True           0.028034    0.018846    0.421890  3.675058       0.666667            3                      3                  0.025000        0.025000                  65                            3      0.053845                         55                          17                         45                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.342797 0.586274  0.408333              0.375000  1.730534     -0.028165            0.860648   0.562500 0.116883 0.193548       0.660000             NaN           sharpe                 True           0.061603    0.026603    0.284395 14.000000       0.500000           16                     21                  0.175000        0.133333                  57                           16      0.037757                         63                          36                          5                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.429286 0.455041  0.466667              0.425000  1.677212     -0.032274            0.964373   0.346154 0.147541 0.206896       0.660000             NaN           sharpe                 True           0.052416    0.027416    0.403700 10.000000       0.461538           26                     26                  0.216667        0.216667                  56                           26      0.031817                         64                           9                         13                            8                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.803611 0.755997  0.700000              0.525000  1.645520     -0.000687           -0.670057   0.800000 0.066667 0.123077       0.630000             NaN           sharpe                 True           0.007125    0.003204   -2.092621  1.568279       0.600000            5                     12                  0.100000        0.041667                  35                            5      0.018841                         85                          25                          5                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.545185 0.400497  0.516667              0.608333 -1.150203     -0.037723           -0.081137   0.416667 0.111111 0.175438       0.660000             NaN           sharpe                 True           0.007330   -0.008190   -0.659199  6.208242       0.416667           12                     12                  0.100000        0.100000                  55                           12      0.047787                         65                          10                         33                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.626007 0.588161  0.575000              0.525000  1.325453     -0.026465            1.949612   0.538462 0.237288 0.329411       0.660000             NaN           sharpe                 True           0.072120    0.042120    1.046043 12.000000       0.538462           26                     26                  0.216667        0.216667                  61                           26      0.025248                         59                           6                         17                           12                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.5433 Â± 0.1605
AUCPR:                0.5536 Â± 0.1239
Accuracy:             0.5375 Â± 0.1004
Accuracy (threshold): 0.4917 Â± 0.0823
Sharpe Ratio:         0.9925 Â± 1.1147
Sharpe (threshold):   0.6416 Â± 0.9099
Net Sharpe:           -0.0993 Â± 1.1199
Net Return:           0.0183 Â± 0.0182
Turnover:             7.9086 Â± 4.8833
Trade Coverage:       0.1222 Â± 0.0829
EV Mean/Fold:         0.03588 Â± 0.01333
Coverage Ratio:       1.0000
Max Drawdown:         -0.0231 Â± 0.0137
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 841 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 841                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5433                         â•‘
â•‘ Average Accuracy: 0.5327                 â•‘
â•‘ Average Sharpe Ratio: 1.0424             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000617                      â•‘
â•‘ Accuracy Variance: 0.000512             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
           ADX_14    0.170502
             macd    0.128160
         ema_long    0.101580
        ema_short    0.093348
distance_to_ma200    0.092510
  close_vix_ratio    0.078448
            macds    0.074936
              mfi    0.063843
    volatility_20    0.061514
   price_to_sma20    0.051008
              atr    0.043066
           roc_20    0.041085
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - MSFT                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 51.7%                                              â”‚
â”‚    â€¢ Max Probability: 62.5%                                                  â”‚
â”‚    â€¢ Min Probability: 36.0%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 26.5% (Low consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $392.74                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $420.27 (+7.01%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $378.97 (-3.50%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 51.7%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 392.739990234375,
  "profit_target": 420.270839075018,
  "stop_loss": 378.9745658140535,
  "probability": 0.5174471586942673,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.01686 | Quality=0.017 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 13
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-09-15 (400 samples)
Valid: 2022-09-16 to 2023-03-29 (120 samples)
Class distribution in validation: {1.0: 64, 0.0: 56}
   âœ… Positions opened: 3/120 (2.5%)
   ğŸ” Filter rejections: threshold=52 | percentile=24 | technical=41 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=3/3 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.919

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-09-16 to 2023-03-29
      Winning trades: 3/3 (100.0% win rate)
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000234
      Std dev: 0.002964
      Min/Max: -0.013206 / 0.024858
      Long positions: 3
  â†’ AUC: 0.4986 | AUCPR: 0.5267 | Accuracy: 0.5500 (0.4917 w/ threshold)
  â†’ Sharpe: 0.7483 (0.8262 w/ threshold) | Max DD: -0.0132
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-18 to 2023-03-29 (400 samples)
Valid: 2023-03-30 to 2023-10-10 (120 samples)
Class distribution in validation: {1.0: 77, 0.0: 43}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=64 | percentile=4 | technical=15 | regime_gate=11 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-03-30 to 2023-10-10
      Winning trades: 10/26 (38.5% win rate)
      Losing trades: 16
      Avoided losses: 27 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000136
      Std dev: 0.006357
      Min/Max: -0.023977 / 0.039800
      Long positions: 26
  â†’ AUC: 0.3144 | AUCPR: 0.5567 | Accuracy: 0.3333 (0.3083 w/ threshold)
  â†’ Sharpe: 0.5379 (-0.5388 w/ threshold) | Max DD: -0.0548
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2022-01-11 to 2023-10-10 (400 samples)
Valid: 2023-10-11 to 2024-05-16 (120 samples)
Class distribution in validation: {1.0: 61, 0.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=60 | percentile=13 | technical=13 | regime_gate=8 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-10-11 to 2024-05-16
      Winning trades: 9/26 (34.6% win rate)
      Losing trades: 17
      Avoided losses: 42 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000437
      Std dev: 0.005884
      Min/Max: -0.029572 / 0.026600
      Long positions: 26
  â†’ AUC: 0.4293 | AUCPR: 0.4548 | Accuracy: 0.4667 (0.4250 w/ threshold)
  â†’ Sharpe: 1.9743 (0.9644 w/ threshold) | Max DD: -0.0323
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-07-21 to 2024-05-16 (400 samples)
Valid: 2024-05-17 to 2024-11-26 (120 samples)
Class distribution in validation: {0.0: 60, 1.0: 60}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=52 | percentile=16 | technical=19 | regime_gate=7 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.861

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-05-17 to 2024-11-26
      Winning trades: 15/26 (57.7% win rate)
      Losing trades: 11
      Avoided losses: 49 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000036
      Std dev: 0.003939
      Min/Max: -0.023975 / 0.018910
      Long positions: 26
  â†’ AUC: 0.7992 | AUCPR: 0.7225 | Accuracy: 0.7500 (0.5333 w/ threshold)
  â†’ Sharpe: 0.9287 (-0.1733 w/ threshold) | Max DD: -0.0341
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-01-20 to 2024-11-26 (400 samples)
Valid: 2024-11-27 to 2025-06-17 (120 samples)
Class distribution in validation: {0.0: 75, 1.0: 45}
   âœ… Positions opened: 13/120 (10.8%)
   ğŸ” Filter rejections: threshold=65 | percentile=9 | technical=33 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=13/13 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.776

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-11-27 to 2025-06-17
      Winning trades: 5/13 (38.5% win rate)
      Losing trades: 8
      Avoided losses: 67 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000097
      Std dev: 0.003597
      Min/Max: -0.013426 / 0.032055
      Long positions: 13
  â†’ AUC: 0.5434 | AUCPR: 0.3975 | Accuracy: 0.5167 (0.6000 w/ threshold)
  â†’ Sharpe: -1.1502 (0.0770 w/ threshold) | Max DD: -0.0377
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-08-07 to 2025-06-17 (400 samples)
Valid: 2025-06-18 to 2026-01-12 (120 samples)
Class distribution in validation: {0.0: 61, 1.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=60 | percentile=5 | technical=17 | regime_gate=12 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-06-18 to 2026-01-12
      Winning trades: 14/26 (53.8% win rate)
      Losing trades: 12
      Avoided losses: 49 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000601
      Std dev: 0.004247
      Min/Max: -0.021899 / 0.021688
      Long positions: 26
  â†’ AUC: 0.6257 | AUCPR: 0.5881 | Accuracy: 0.5833 (0.5250 w/ threshold)
  â†’ Sharpe: 1.2390 (1.9496 w/ threshold) | Max DD: -0.0265
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.498605 0.526713  0.550000              0.491667  0.748313     -0.013206            0.826158   1.000000 0.046875 0.089552       0.623397             NaN           sharpe                 True           0.028034    0.018846    0.421890  3.675058       0.666667            3                      3                  0.025000        0.025000                  68                            3      0.053845                         52                          24                         41                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.314407 0.556682  0.333333              0.308333  0.537906     -0.054751           -0.538808   0.384615 0.129870 0.194174       0.649815             NaN           sharpe                 True          -0.016370   -0.041370   -1.035277 10.000000       0.461538           26                     26                  0.216667        0.216667                  56                           26      0.037757                         64                           4                         15                           11                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.429286 0.454788  0.466667              0.425000  1.974316     -0.032274            0.964373   0.346154 0.147541 0.206896       0.642887             NaN           sharpe                 True           0.052416    0.027416    0.403700 10.000000       0.461538           26                     26                  0.216667        0.216667                  60                           26      0.031817                         60                          13                         13                            8                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.799167 0.722521  0.750000              0.533333  0.928740     -0.034149           -0.173349   0.576923 0.250000 0.348837       0.650984             NaN           sharpe                 True           0.004362   -0.015005   -0.835616  7.747055       0.500000           26                     26                  0.216667        0.216667                  68                           26      0.029547                         52                          16                         19                            7                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.543407 0.397521  0.516667              0.600000 -1.150203     -0.037723            0.076968   0.384615 0.111111 0.172413       0.658944             NaN           sharpe                 True           0.011617   -0.003904   -0.496621  6.208242       0.461538           13                     13                  0.108333        0.108333                  55                           13      0.047787                         65                           9                         33                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.625729 0.588145  0.583333              0.525000  1.239016     -0.026465            1.949612   0.538462 0.237288 0.329411       0.654283             NaN           sharpe                 True           0.072120    0.042120    1.046043 12.000000       0.538462           26                     26                  0.216667        0.216667                  60                           26      0.025248                         60                           5                         17                           12                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.5351 Â± 0.1669
AUCPR:                0.5411 Â± 0.1128
Accuracy:             0.5333 Â± 0.1374
Accuracy (threshold): 0.4806 Â± 0.1019
Sharpe Ratio:         0.7130 Â± 1.0409
Sharpe (threshold):   0.5175 Â± 0.9092
Net Sharpe:           -0.0826 Â± 0.8259
Net Return:           0.0047 Â± 0.0307
Turnover:             8.2717 Â± 3.0178
Trade Coverage:       0.1667 Â± 0.0818
EV Mean/Fold:         0.03767 Â± 0.01112
Coverage Ratio:       1.0000
Max Drawdown:         -0.0331 Â± 0.0137
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 842 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 842                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5432                         â•‘
â•‘ Average Accuracy: 0.5327                 â•‘
â•‘ Average Sharpe Ratio: 1.0420             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000616                      â•‘
â•‘ Accuracy Variance: 0.000512             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
           ADX_14    0.172667
             macd    0.105785
        ema_short    0.101224
         ema_long    0.097843
            macds    0.088871
    volatility_20    0.079882
  close_vix_ratio    0.074296
distance_to_ma200    0.073571
              mfi    0.066571
              atr    0.047915
           roc_20    0.047453
   price_to_sma20    0.043923
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - MSFT                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 53.1%                                              â”‚
â”‚    â€¢ Max Probability: 62.2%                                                  â”‚
â”‚    â€¢ Min Probability: 19.4%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 42.8% (Low consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $392.74                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $420.27 (+7.01%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $378.97 (-3.50%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 53.1%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 392.739990234375,
  "profit_target": 420.270839075018,
  "stop_loss": 378.9745658140535,
  "probability": 0.5311829422911009,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.01830 | Quality=0.031 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
