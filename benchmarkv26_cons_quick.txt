/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 13
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-09-15 (400 samples)
Valid: 2022-09-16 to 2023-03-29 (120 samples)
Class distribution in validation: {1.0: 64, 0.0: 56}
   âœ… Positions opened: 3/120 (2.5%)
   ğŸ” Filter rejections: threshold=55 | percentile=17 | technical=45 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=3/3 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.919

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-09-16 to 2023-03-29
      Winning trades: 3/3 (100.0% win rate)
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000234
      Std dev: 0.002964
      Min/Max: -0.013206 / 0.024858
      Long positions: 3
  â†’ AUC: 0.5130 | AUCPR: 0.5354 | Accuracy: 0.5583 (0.4917 w/ threshold)
  â†’ Sharpe: 0.7262 (0.8262 w/ threshold) | Max DD: -0.0132
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-18 to 2023-03-29 (400 samples)
Valid: 2023-03-30 to 2023-10-10 (120 samples)
Class distribution in validation: {1.0: 77, 0.0: 43}
   âœ… Positions opened: 16/120 (13.3%)
   ğŸ” Filter rejections: threshold=63 | percentile=36 | technical=5 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=16/16 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-03-30 to 2023-10-10
      Winning trades: 9/16 (56.2% win rate)
      Losing trades: 7
      Avoided losses: 36 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000513
      Std dev: 0.008005
      Min/Max: -0.021498 / 0.072435
      Long positions: 16
  â†’ Threshold (sharpe): BUY=0.6400 | Sharpe: 0.90 | WinRate: 52.4%
  â†’ AUC: 0.3428 | AUCPR: 0.5863 | Accuracy: 0.4083 (0.3750 w/ threshold)
  â†’ Sharpe: 1.7305 (0.8606 w/ threshold) | Max DD: -0.0282
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2022-01-11 to 2023-10-10 (400 samples)
Valid: 2023-10-11 to 2024-05-16 (120 samples)
Class distribution in validation: {1.0: 61, 0.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=63 | percentile=10 | technical=13 | regime_gate=8 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-10-11 to 2024-05-16
      Winning trades: 9/26 (34.6% win rate)
      Losing trades: 17
      Avoided losses: 42 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000437
      Std dev: 0.005884
      Min/Max: -0.029572 / 0.026600
      Long positions: 26
  â†’ AUC: 0.4293 | AUCPR: 0.4550 | Accuracy: 0.4667 (0.4250 w/ threshold)
  â†’ Sharpe: 1.6772 (0.9644 w/ threshold) | Max DD: -0.0323
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-07-21 to 2024-05-16 (400 samples)
Valid: 2024-05-17 to 2024-11-26 (120 samples)
Class distribution in validation: {0.0: 60, 1.0: 60}
   âœ… Positions opened: 6/120 (5.0%)
   ğŸ” Filter rejections: threshold=79 | percentile=28 | technical=7 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=6/6 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.348

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-05-17 to 2024-11-26
      Winning trades: 5/6 (83.3% win rate)
      Losing trades: 1
      Avoided losses: 59 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000063
      Std dev: 0.000500
      Min/Max: -0.000390 / 0.004504
      Long positions: 6
  â†’ Threshold (sharpe): BUY=0.6100 | Sharpe: 0.96 | WinRate: 50.0%
  â†’ AUC: 0.8036 | AUCPR: 0.7560 | Accuracy: 0.7000 (0.5333 w/ threshold)
  â†’ Sharpe: 1.6455 (-0.5334 w/ threshold) | Max DD: -0.0008
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-01-20 to 2024-11-26 (400 samples)
Valid: 2024-11-27 to 2025-06-17 (120 samples)
Class distribution in validation: {0.0: 75, 1.0: 45}
   âœ… Positions opened: 12/120 (10.0%)
   ğŸ” Filter rejections: threshold=64 | percentile=11 | technical=33 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=12/12 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.776

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-11-27 to 2025-06-17
      Winning trades: 5/12 (41.7% win rate)
      Losing trades: 7
      Avoided losses: 68 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000061
      Std dev: 0.003576
      Min/Max: -0.013426 / 0.032055
      Long positions: 12
  â†’ AUC: 0.5452 | AUCPR: 0.4005 | Accuracy: 0.5167 (0.6083 w/ threshold)
  â†’ Sharpe: -1.1502 (-0.0811 w/ threshold) | Max DD: -0.0377
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-08-07 to 2025-06-17 (400 samples)
Valid: 2025-06-18 to 2026-01-12 (120 samples)
Class distribution in validation: {0.0: 61, 1.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=59 | percentile=6 | technical=17 | regime_gate=12 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-06-18 to 2026-01-12
      Winning trades: 14/26 (53.8% win rate)
      Losing trades: 12
      Avoided losses: 49 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000601
      Std dev: 0.004247
      Min/Max: -0.021899 / 0.021688
      Long positions: 26
  â†’ AUC: 0.6260 | AUCPR: 0.5882 | Accuracy: 0.5750 (0.5250 w/ threshold)
  â†’ Sharpe: 1.3255 (1.9496 w/ threshold) | Max DD: -0.0265
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.512974 0.535434  0.558333              0.491667  0.726199     -0.013206            0.826158   1.000000 0.046875 0.089552           0.61             NaN           sharpe                 True           0.028034    0.018846    0.421890  3.675058       0.666667            3                      3                  0.025000        0.025000                  65                            3      0.053845                         55                          17                         45                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.342797 0.586274  0.408333              0.375000  1.730534     -0.028165            0.860648   0.562500 0.116883 0.193548           0.64             NaN           sharpe                 True           0.061603    0.026603    0.284395 14.000000       0.500000           16                     21                  0.175000        0.133333                  57                           16      0.037757                         63                          36                          5                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.429286 0.455041  0.466667              0.425000  1.677212     -0.032274            0.964373   0.346154 0.147541 0.206896           0.64             NaN           sharpe                 True           0.052416    0.027416    0.403700 10.000000       0.461538           26                     26                  0.216667        0.216667                  57                           26      0.031817                         63                          10                         13                            8                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.803611 0.755997  0.700000              0.533333  1.645520     -0.000765           -0.533374   0.833333 0.083333 0.151515           0.61             NaN           sharpe                 True           0.007508    0.002744   -2.081138  1.905554       0.500000            6                     12                  0.100000        0.050000                  41                            6      0.018376                         79                          28                          7                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.545185 0.400497  0.516667              0.608333 -1.150203     -0.037723           -0.081137   0.416667 0.111111 0.175438           0.64             NaN           sharpe                 True           0.007330   -0.008190   -0.659199  6.208242       0.416667           12                     12                  0.100000        0.100000                  56                           12      0.047787                         64                          11                         33                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.626007 0.588161  0.575000              0.525000  1.325453     -0.026465            1.949612   0.538462 0.237288 0.329411           0.64             NaN           sharpe                 True           0.072120    0.042120    1.046043 12.000000       0.538462           26                     26                  0.216667        0.216667                  61                           26      0.025248                         59                           6                         17                           12                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.5433 Â± 0.1605
AUCPR:                0.5536 Â± 0.1239
Accuracy:             0.5375 Â± 0.1004
Accuracy (threshold): 0.4931 Â± 0.0831
Sharpe Ratio:         0.9925 Â± 1.1147
Sharpe (threshold):   0.6644 Â± 0.8714
Net Sharpe:           -0.0974 Â± 1.1158
Net Return:           0.0183 Â± 0.0182
Turnover:             7.9648 Â± 4.7969
Trade Coverage:       0.1236 Â± 0.0814
EV Mean/Fold:         0.03581 Â± 0.01345
Coverage Ratio:       1.0000
Max Drawdown:         -0.0231 Â± 0.0137
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 789 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 789                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5444                         â•‘
â•‘ Average Accuracy: 0.5338                 â•‘
â•‘ Average Sharpe Ratio: 1.0402             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000602                      â•‘
â•‘ Accuracy Variance: 0.000485             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
           ADX_14    0.170502
             macd    0.128160
         ema_long    0.101580
        ema_short    0.093348
distance_to_ma200    0.092510
  close_vix_ratio    0.078448
            macds    0.074936
              mfi    0.063843
    volatility_20    0.061514
   price_to_sma20    0.051008
              atr    0.043066
           roc_20    0.041085
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - MSFT                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 51.7%                                              â”‚
â”‚    â€¢ Max Probability: 62.5%                                                  â”‚
â”‚    â€¢ Min Probability: 36.0%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 26.5% (Low consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $392.74                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $420.27 (+7.01%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $378.97 (-3.50%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 51.7%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 392.739990234375,
  "profit_target": 420.270839075018,
  "stop_loss": 378.9745658140535,
  "probability": 0.5174471586942673,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.01686 | Quality=0.017 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 13
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-09-15 (400 samples)
Valid: 2022-09-16 to 2023-03-29 (120 samples)
Class distribution in validation: {1.0: 64, 0.0: 56}
   âœ… Positions opened: 3/120 (2.5%)
   ğŸ” Filter rejections: threshold=55 | percentile=20 | technical=42 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=3/3 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.919

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-09-16 to 2023-03-29
      Winning trades: 3/3 (100.0% win rate)
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000234
      Std dev: 0.002964
      Min/Max: -0.013206 / 0.024858
      Long positions: 3
  â†’ AUC: 0.4911 | AUCPR: 0.5256 | Accuracy: 0.5417 (0.4917 w/ threshold)
  â†’ Sharpe: 0.7267 (0.8262 w/ threshold) | Max DD: -0.0132
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-18 to 2023-03-29 (400 samples)
Valid: 2023-03-30 to 2023-10-10 (120 samples)
Class distribution in validation: {1.0: 77, 0.0: 43}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=64 | percentile=4 | technical=15 | regime_gate=11 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-03-30 to 2023-10-10
      Winning trades: 10/26 (38.5% win rate)
      Losing trades: 16
      Avoided losses: 27 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000136
      Std dev: 0.006357
      Min/Max: -0.023977 / 0.039800
      Long positions: 26
  â†’ AUC: 0.3129 | AUCPR: 0.5563 | Accuracy: 0.3250 (0.3083 w/ threshold)
  â†’ Sharpe: 0.5762 (-0.5388 w/ threshold) | Max DD: -0.0548
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2022-01-11 to 2023-10-10 (400 samples)
Valid: 2023-10-11 to 2024-05-16 (120 samples)
Class distribution in validation: {1.0: 61, 0.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=68 | percentile=5 | technical=13 | regime_gate=8 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-10-11 to 2024-05-16
      Winning trades: 10/26 (38.5% win rate)
      Losing trades: 16
      Avoided losses: 43 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000483
      Std dev: 0.005846
      Min/Max: -0.029572 / 0.026600
      Long positions: 26
  â†’ AUC: 0.4182 | AUCPR: 0.4506 | Accuracy: 0.4583 (0.4417 w/ threshold)
  â†’ Sharpe: 1.7212 (1.0963 w/ threshold) | Max DD: -0.0323
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-07-21 to 2024-05-16 (400 samples)
Valid: 2024-05-17 to 2024-11-26 (120 samples)
Class distribution in validation: {0.0: 60, 1.0: 60}
   âœ… Positions opened: 10/120 (8.3%)
   ğŸ” Filter rejections: threshold=75 | percentile=31 | technical=4 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=10/10 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.446

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-05-17 to 2024-11-26
      Winning trades: 6/10 (60.0% win rate)
      Losing trades: 4
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000093
      Std dev: 0.001296
      Min/Max: -0.010516 / 0.005483
      Long positions: 10
  â†’ Threshold (sharpe): BUY=0.6100 | Sharpe: 0.69 | WinRate: 72.2%
  â†’ AUC: 0.8108 | AUCPR: 0.7511 | Accuracy: 0.7000 (0.5167 w/ threshold)
  â†’ Sharpe: 1.6455 (0.1652 w/ threshold) | Max DD: -0.0105
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-01-20 to 2024-11-26 (400 samples)
Valid: 2024-11-27 to 2025-06-17 (120 samples)
Class distribution in validation: {0.0: 75, 1.0: 45}
   âœ… Positions opened: 11/120 (9.2%)
   ğŸ” Filter rejections: threshold=66 | percentile=10 | technical=33 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=11/11 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.776

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-11-27 to 2025-06-17
      Winning trades: 5/11 (45.5% win rate)
      Losing trades: 6
      Avoided losses: 69 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000079
      Std dev: 0.003571
      Min/Max: -0.013426 / 0.032055
      Long positions: 11
  â†’ AUC: 0.5505 | AUCPR: 0.4044 | Accuracy: 0.5083 (0.6167 w/ threshold)
  â†’ Sharpe: -1.0070 (-0.0014 w/ threshold) | Max DD: -0.0356
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-08-07 to 2025-06-17 (400 samples)
Valid: 2025-06-18 to 2026-01-12 (120 samples)
Class distribution in validation: {0.0: 61, 1.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=60 | percentile=6 | technical=17 | regime_gate=11 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-06-18 to 2026-01-12
      Winning trades: 15/26 (57.7% win rate)
      Losing trades: 11
      Avoided losses: 50 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000641
      Std dev: 0.004280
      Min/Max: -0.021899 / 0.021688
      Long positions: 26
  â†’ AUC: 0.6357 | AUCPR: 0.5969 | Accuracy: 0.5833 (0.5417 w/ threshold)
  â†’ Sharpe: 1.2390 (2.0845 w/ threshold) | Max DD: -0.0265
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.491071 0.525580  0.541667              0.491667  0.726659     -0.013206            0.826158   1.000000 0.046875 0.089552           0.61             NaN           sharpe                 True           0.028034    0.018846    0.421890  3.675058       0.666667            3                      3                  0.025000        0.025000                  65                            3      0.053845                         55                          20                         42                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.312896 0.556257  0.325000              0.308333  0.576209     -0.054751           -0.538808   0.384615 0.129870 0.194174           0.64             NaN           sharpe                 True          -0.016370   -0.041370   -1.035277 10.000000       0.461538           26                     26                  0.216667        0.216667                  56                           26      0.037757                         64                           4                         15                           11                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.418172 0.450620  0.458333              0.441667  1.721154     -0.032274            1.096341   0.384615 0.163934 0.229885           0.64             NaN           sharpe                 True           0.057975    0.032975    0.529111 10.000000       0.461538           26                     26                  0.216667        0.216667                  52                           26      0.031817                         68                           5                         13                            8                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.810833 0.751124  0.700000              0.516667  1.645520     -0.010516            0.165168   0.600000 0.100000 0.171428           0.61             NaN           sharpe                 True           0.011142    0.001531   -0.864839  3.844395       0.700000           10                     18                  0.150000        0.083333                  45                           10      0.020519                         75                          31                          4                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.550519 0.404446  0.508333              0.616667 -1.007047     -0.035645           -0.001428   0.454545 0.111111 0.178571           0.64             NaN           sharpe                 True           0.009485   -0.006035   -0.571636  6.208242       0.454545           11                     11                  0.091667        0.091667                  54                           11      0.047787                         66                          10                         33                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.635732 0.596901  0.583333              0.541667  1.239016     -0.026465            2.084544   0.576923 0.254237 0.352941           0.64             NaN           sharpe                 True           0.076970    0.046970    1.186608 12.000000       0.576923           26                     26                  0.216667        0.216667                  60                           26      0.025248                         60                           6                         17                           11                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.5365 Â± 0.1740
AUCPR:                0.5475 Â± 0.1219
Accuracy:             0.5194 Â± 0.1256
Accuracy (threshold): 0.4861 Â± 0.1046
Sharpe Ratio:         0.8169 Â± 1.0075
Sharpe (threshold):   0.6053 Â± 0.9326
Net Sharpe:           -0.0557 Â± 0.8937
Net Return:           0.0088 Â± 0.0314
Turnover:             7.6213 Â± 3.5306
Trade Coverage:       0.1417 Â± 0.0853
EV Mean/Fold:         0.03616 Â± 0.01291
Coverage Ratio:       1.0000
Max Drawdown:         -0.0288 Â± 0.0162
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 790 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 790                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5444                         â•‘
â•‘ Average Accuracy: 0.5338                 â•‘
â•‘ Average Sharpe Ratio: 1.0399             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000602                      â•‘
â•‘ Accuracy Variance: 0.000485             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
           ADX_14    0.159464
             macd    0.110481
         ema_long    0.107796
        ema_short    0.096095
  close_vix_ratio    0.089146
            macds    0.088482
              mfi    0.069082
    volatility_20    0.067571
distance_to_ma200    0.066596
   price_to_sma20    0.057937
           roc_20    0.045473
              atr    0.041878
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - MSFT                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 47.6%                                              â”‚
â”‚    â€¢ Max Probability: 64.3%                                                  â”‚
â”‚    â€¢ Min Probability: 19.3%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 45.0% (Low consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $392.74                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $420.27 (+7.01%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $378.97 (-3.50%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 47.6%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 392.739990234375,
  "profit_target": 420.270839075018,
  "stop_loss": 378.9745658140535,
  "probability": 0.47588181495666504,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.01249 | Quality=0.000 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 13
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-09-15 (400 samples)
Valid: 2022-09-16 to 2023-03-29 (120 samples)
Class distribution in validation: {1.0: 64, 0.0: 56}
   âœ… Positions opened: 3/120 (2.5%)
   ğŸ” Filter rejections: threshold=52 | percentile=27 | technical=38 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=3/3 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.919

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-09-16 to 2023-03-29
      Winning trades: 3/3 (100.0% win rate)
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000234
      Std dev: 0.002964
      Min/Max: -0.013206 / 0.024858
      Long positions: 3
  â†’ AUC: 0.5022 | AUCPR: 0.5368 | Accuracy: 0.5500 (0.4917 w/ threshold)
  â†’ Sharpe: 0.7483 (0.8262 w/ threshold) | Max DD: -0.0132
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-18 to 2023-03-29 (400 samples)
Valid: 2023-03-30 to 2023-10-10 (120 samples)
Class distribution in validation: {1.0: 77, 0.0: 43}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=64 | percentile=4 | technical=15 | regime_gate=11 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-03-30 to 2023-10-10
      Winning trades: 10/26 (38.5% win rate)
      Losing trades: 16
      Avoided losses: 27 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000136
      Std dev: 0.006357
      Min/Max: -0.023977 / 0.039800
      Long positions: 26
  â†’ AUC: 0.3120 | AUCPR: 0.5561 | Accuracy: 0.3250 (0.3083 w/ threshold)
  â†’ Sharpe: 0.5762 (-0.5388 w/ threshold) | Max DD: -0.0548
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2022-01-11 to 2023-10-10 (400 samples)
Valid: 2023-10-11 to 2024-05-16 (120 samples)
Class distribution in validation: {1.0: 61, 0.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=62 | percentile=11 | technical=13 | regime_gate=8 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-10-11 to 2024-05-16
      Winning trades: 9/26 (34.6% win rate)
      Losing trades: 17
      Avoided losses: 42 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000437
      Std dev: 0.005884
      Min/Max: -0.029572 / 0.026600
      Long positions: 26
  â†’ AUC: 0.4276 | AUCPR: 0.4544 | Accuracy: 0.4583 (0.4250 w/ threshold)
  â†’ Sharpe: 1.8161 (0.9644 w/ threshold) | Max DD: -0.0323
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-07-21 to 2024-05-16 (400 samples)
Valid: 2024-05-17 to 2024-11-26 (120 samples)
Class distribution in validation: {0.0: 60, 1.0: 60}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=51 | percentile=17 | technical=19 | regime_gate=7 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.861

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-05-17 to 2024-11-26
      Winning trades: 15/26 (57.7% win rate)
      Losing trades: 11
      Avoided losses: 49 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000036
      Std dev: 0.003939
      Min/Max: -0.023975 / 0.018910
      Long positions: 26
  â†’ AUC: 0.7989 | AUCPR: 0.7224 | Accuracy: 0.7583 (0.5333 w/ threshold)
  â†’ Sharpe: 1.2698 (-0.1733 w/ threshold) | Max DD: -0.0341
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-01-20 to 2024-11-26 (400 samples)
Valid: 2024-11-27 to 2025-06-17 (120 samples)
Class distribution in validation: {0.0: 75, 1.0: 45}
   âœ… Positions opened: 12/120 (10.0%)
   ğŸ” Filter rejections: threshold=65 | percentile=10 | technical=33 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=12/12 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.776

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-11-27 to 2025-06-17
      Winning trades: 5/12 (41.7% win rate)
      Losing trades: 7
      Avoided losses: 68 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000061
      Std dev: 0.003576
      Min/Max: -0.013426 / 0.032055
      Long positions: 12
  â†’ AUC: 0.5461 | AUCPR: 0.4011 | Accuracy: 0.5167 (0.6083 w/ threshold)
  â†’ Sharpe: -1.1502 (-0.0811 w/ threshold) | Max DD: -0.0377
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-08-07 to 2025-06-17 (400 samples)
Valid: 2025-06-18 to 2026-01-12 (120 samples)
Class distribution in validation: {0.0: 61, 1.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=60 | percentile=6 | technical=17 | regime_gate=11 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-06-18 to 2026-01-12
      Winning trades: 15/26 (57.7% win rate)
      Losing trades: 11
      Avoided losses: 50 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000641
      Std dev: 0.004280
      Min/Max: -0.021899 / 0.021688
      Long positions: 26
  â†’ AUC: 0.6346 | AUCPR: 0.5965 | Accuracy: 0.5750 (0.5417 w/ threshold)
  â†’ Sharpe: 1.3255 (2.0845 w/ threshold) | Max DD: -0.0265
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.502232 0.536785  0.550000              0.491667  0.748313     -0.013206            0.826158   1.000000 0.046875 0.089552           0.61             NaN           sharpe                 True           0.028034    0.018846    0.421890  3.675058       0.666667            3                      3                  0.025000        0.025000                  68                            3      0.053845                         52                          27                         38                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.311990 0.556109  0.325000              0.308333  0.576209     -0.054751           -0.538808   0.384615 0.129870 0.194174           0.64             NaN           sharpe                 True          -0.016370   -0.041370   -1.035277 10.000000       0.461538           26                     26                  0.216667        0.216667                  56                           26      0.037757                         64                           4                         15                           11                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.427619 0.454421  0.458333              0.425000  1.816107     -0.032274            0.964373   0.346154 0.147541 0.206896           0.64             NaN           sharpe                 True           0.052416    0.027416    0.403700 10.000000       0.461538           26                     26                  0.216667        0.216667                  58                           26      0.031817                         62                          11                         13                            8                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.798889 0.722398  0.758333              0.533333  1.269774     -0.034149           -0.173349   0.576923 0.250000 0.348837           0.64             NaN           sharpe                 True           0.004362   -0.015005   -0.835616  7.747055       0.500000           26                     26                  0.216667        0.216667                  69                           26      0.029547                         51                          17                         19                            7                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.546074 0.401093  0.516667              0.608333 -1.150203     -0.037723           -0.081137   0.416667 0.111111 0.175438           0.64             NaN           sharpe                 True           0.007330   -0.008190   -0.659199  6.208242       0.416667           12                     12                  0.100000        0.100000                  55                           12      0.047787                         65                          10                         33                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.634621 0.596456  0.575000              0.541667  1.325453     -0.026465            2.084544   0.576923 0.254237 0.352941           0.64             NaN           sharpe                 True           0.076970    0.046970    1.186608 12.000000       0.576923           26                     26                  0.216667        0.216667                  60                           26      0.025248                         60                           6                         17                           11                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.5369 Â± 0.1685
AUCPR:                0.5445 Â± 0.1124
Accuracy:             0.5306 Â± 0.1428
Accuracy (threshold): 0.4847 Â± 0.1055
Sharpe Ratio:         0.7643 Â± 1.0371
Sharpe (threshold):   0.5136 Â± 0.9697
Net Sharpe:           -0.0863 Â± 0.8842
Net Return:           0.0048 Â± 0.0322
Turnover:             8.2717 Â± 3.0178
Trade Coverage:       0.1653 Â± 0.0831
EV Mean/Fold:         0.03767 Â± 0.01112
Coverage Ratio:       1.0000
Max Drawdown:         -0.0331 Â± 0.0137
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 791 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 791                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5444                         â•‘
â•‘ Average Accuracy: 0.5338                 â•‘
â•‘ Average Sharpe Ratio: 1.0396             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000601                      â•‘
â•‘ Accuracy Variance: 0.000484             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
           ADX_14    0.174539
             macd    0.112696
        ema_short    0.112142
         ema_long    0.087568
            macds    0.087334
    volatility_20    0.077971
distance_to_ma200    0.077321
  close_vix_ratio    0.069650
              mfi    0.064480
   price_to_sma20    0.053557
           roc_20    0.044886
              atr    0.037856
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - MSFT                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 50.8%                                              â”‚
â”‚    â€¢ Max Probability: 60.8%                                                  â”‚
â”‚    â€¢ Min Probability: 14.6%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 46.3% (Low consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $392.74                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $420.27 (+7.01%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $378.97 (-3.50%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 50.8%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 392.739990234375,
  "profit_target": 420.270839075018,
  "stop_loss": 378.9745658140535,
  "probability": 0.5075393443306287,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.01582 | Quality=0.008 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 12
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-09-15 (400 samples)
Valid: 2022-09-16 to 2023-03-29 (120 samples)
Class distribution in validation: {1.0: 64, 0.0: 56}
   âœ… Positions opened: 3/120 (2.5%)
   ğŸ” Filter rejections: threshold=55 | percentile=17 | technical=45 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=3/3 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.919

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-09-16 to 2023-03-29
      Winning trades: 3/3 (100.0% win rate)
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000234
      Std dev: 0.002964
      Min/Max: -0.013206 / 0.024858
      Long positions: 3
  â†’ AUC: 0.5130 | AUCPR: 0.5354 | Accuracy: 0.5583 (0.4917 w/ threshold)
  â†’ Sharpe: 0.7262 (0.8262 w/ threshold) | Max DD: -0.0132
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-18 to 2023-03-29 (400 samples)
Valid: 2023-03-30 to 2023-10-10 (120 samples)
Class distribution in validation: {1.0: 77, 0.0: 43}
   âœ… Positions opened: 16/120 (13.3%)
   ğŸ” Filter rejections: threshold=63 | percentile=36 | technical=5 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=16/16 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-03-30 to 2023-10-10
      Winning trades: 9/16 (56.2% win rate)
      Losing trades: 7
      Avoided losses: 36 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000513
      Std dev: 0.008005
      Min/Max: -0.021498 / 0.072435
      Long positions: 16
  â†’ Threshold (sharpe): BUY=0.6400 | Sharpe: 0.90 | WinRate: 52.4%
  â†’ AUC: 0.3428 | AUCPR: 0.5863 | Accuracy: 0.4083 (0.3750 w/ threshold)
  â†’ Sharpe: 1.7305 (0.8606 w/ threshold) | Max DD: -0.0282
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2022-01-11 to 2023-10-10 (400 samples)
Valid: 2023-10-11 to 2024-05-16 (120 samples)
Class distribution in validation: {1.0: 61, 0.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=63 | percentile=10 | technical=13 | regime_gate=8 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-10-11 to 2024-05-16
      Winning trades: 9/26 (34.6% win rate)
      Losing trades: 17
      Avoided losses: 42 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000437
      Std dev: 0.005884
      Min/Max: -0.029572 / 0.026600
      Long positions: 26
  â†’ AUC: 0.4293 | AUCPR: 0.4550 | Accuracy: 0.4667 (0.4250 w/ threshold)
  â†’ Sharpe: 1.6772 (0.9644 w/ threshold) | Max DD: -0.0323
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-07-21 to 2024-05-16 (400 samples)
Valid: 2024-05-17 to 2024-11-26 (120 samples)
Class distribution in validation: {0.0: 60, 1.0: 60}
   âœ… Positions opened: 6/120 (5.0%)
   ğŸ” Filter rejections: threshold=79 | percentile=28 | technical=7 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=6/6 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.348

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-05-17 to 2024-11-26
      Winning trades: 5/6 (83.3% win rate)
      Losing trades: 1
      Avoided losses: 59 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000063
      Std dev: 0.000500
      Min/Max: -0.000390 / 0.004504
      Long positions: 6
  â†’ Threshold (sharpe): BUY=0.6100 | Sharpe: 0.96 | WinRate: 50.0%
  â†’ AUC: 0.8036 | AUCPR: 0.7560 | Accuracy: 0.7000 (0.5333 w/ threshold)
  â†’ Sharpe: 1.6455 (-0.5334 w/ threshold) | Max DD: -0.0008
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-01-20 to 2024-11-26 (400 samples)
Valid: 2024-11-27 to 2025-06-17 (120 samples)
Class distribution in validation: {0.0: 75, 1.0: 45}
   âœ… Positions opened: 12/120 (10.0%)
   ğŸ” Filter rejections: threshold=64 | percentile=11 | technical=33 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=12/12 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.776

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-11-27 to 2025-06-17
      Winning trades: 5/12 (41.7% win rate)
      Losing trades: 7
      Avoided losses: 68 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000061
      Std dev: 0.003576
      Min/Max: -0.013426 / 0.032055
      Long positions: 12
  â†’ AUC: 0.5452 | AUCPR: 0.4005 | Accuracy: 0.5167 (0.6083 w/ threshold)
  â†’ Sharpe: -1.1502 (-0.0811 w/ threshold) | Max DD: -0.0377
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-08-07 to 2025-06-17 (400 samples)
Valid: 2025-06-18 to 2026-01-12 (120 samples)
Class distribution in validation: {0.0: 61, 1.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=59 | percentile=6 | technical=17 | regime_gate=12 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-06-18 to 2026-01-12
      Winning trades: 14/26 (53.8% win rate)
      Losing trades: 12
      Avoided losses: 49 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000601
      Std dev: 0.004247
      Min/Max: -0.021899 / 0.021688
      Long positions: 26
  â†’ AUC: 0.6260 | AUCPR: 0.5882 | Accuracy: 0.5750 (0.5250 w/ threshold)
  â†’ Sharpe: 1.3255 (1.9496 w/ threshold) | Max DD: -0.0265
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.512974 0.535434  0.558333              0.491667  0.726199     -0.013206            0.826158   1.000000 0.046875 0.089552           0.61             NaN           sharpe                 True           0.028034    0.018846    0.421890  3.675058       0.666667            3                      3                  0.025000        0.025000                  65                            3      0.053845                         55                          17                         45                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.342797 0.586274  0.408333              0.375000  1.730534     -0.028165            0.860648   0.562500 0.116883 0.193548           0.64             NaN           sharpe                 True           0.061603    0.026603    0.284395 14.000000       0.500000           16                     21                  0.175000        0.133333                  57                           16      0.037757                         63                          36                          5                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.429286 0.455041  0.466667              0.425000  1.677212     -0.032274            0.964373   0.346154 0.147541 0.206896           0.64             NaN           sharpe                 True           0.052416    0.027416    0.403700 10.000000       0.461538           26                     26                  0.216667        0.216667                  57                           26      0.031817                         63                          10                         13                            8                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.803611 0.755997  0.700000              0.533333  1.645520     -0.000765           -0.533374   0.833333 0.083333 0.151515           0.61             NaN           sharpe                 True           0.007508    0.002744   -2.081138  1.905554       0.500000            6                     12                  0.100000        0.050000                  41                            6      0.018376                         79                          28                          7                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.545185 0.400497  0.516667              0.608333 -1.150203     -0.037723           -0.081137   0.416667 0.111111 0.175438           0.64             NaN           sharpe                 True           0.007330   -0.008190   -0.659199  6.208242       0.416667           12                     12                  0.100000        0.100000                  56                           12      0.047787                         64                          11                         33                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.626007 0.588161  0.575000              0.525000  1.325453     -0.026465            1.949612   0.538462 0.237288 0.329411           0.64             NaN           sharpe                 True           0.072120    0.042120    1.046043 12.000000       0.538462           26                     26                  0.216667        0.216667                  61                           26      0.025248                         59                           6                         17                           12                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.5433 Â± 0.1605
AUCPR:                0.5536 Â± 0.1239
Accuracy:             0.5375 Â± 0.1004
Accuracy (threshold): 0.4931 Â± 0.0831
Sharpe Ratio:         0.9925 Â± 1.1147
Sharpe (threshold):   0.6644 Â± 0.8714
Net Sharpe:           -0.0974 Â± 1.1158
Net Return:           0.0183 Â± 0.0182
Turnover:             7.9648 Â± 4.7969
Trade Coverage:       0.1236 Â± 0.0814
EV Mean/Fold:         0.03581 Â± 0.01345
Coverage Ratio:       1.0000
Max Drawdown:         -0.0231 Â± 0.0137
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 792 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 792                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5444                         â•‘
â•‘ Average Accuracy: 0.5338                 â•‘
â•‘ Average Sharpe Ratio: 1.0395             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000600                      â•‘
â•‘ Accuracy Variance: 0.000483             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
           ADX_14    0.170502
             macd    0.128160
         ema_long    0.101580
        ema_short    0.093348
distance_to_ma200    0.092510
  close_vix_ratio    0.078448
            macds    0.074936
              mfi    0.063843
    volatility_20    0.061514
   price_to_sma20    0.051008
              atr    0.043066
           roc_20    0.041085
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - MSFT                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 51.7%                                              â”‚
â”‚    â€¢ Max Probability: 62.5%                                                  â”‚
â”‚    â€¢ Min Probability: 36.0%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 26.5% (Low consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $392.74                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $420.27 (+7.01%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $378.97 (-3.50%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 51.7%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 392.739990234375,
  "profit_target": 420.270839075018,
  "stop_loss": 378.9745658140535,
  "probability": 0.5174471586942673,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.01686 | Quality=0.017 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 12
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-09-15 (400 samples)
Valid: 2022-09-16 to 2023-03-29 (120 samples)
Class distribution in validation: {1.0: 64, 0.0: 56}
   âœ… Positions opened: 3/120 (2.5%)
   ğŸ” Filter rejections: threshold=55 | percentile=20 | technical=42 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=3/3 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.919

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-09-16 to 2023-03-29
      Winning trades: 3/3 (100.0% win rate)
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000234
      Std dev: 0.002964
      Min/Max: -0.013206 / 0.024858
      Long positions: 3
  â†’ AUC: 0.4911 | AUCPR: 0.5256 | Accuracy: 0.5417 (0.4917 w/ threshold)
  â†’ Sharpe: 0.7267 (0.8262 w/ threshold) | Max DD: -0.0132
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-18 to 2023-03-29 (400 samples)
Valid: 2023-03-30 to 2023-10-10 (120 samples)
Class distribution in validation: {1.0: 77, 0.0: 43}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=64 | percentile=4 | technical=15 | regime_gate=11 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-03-30 to 2023-10-10
      Winning trades: 10/26 (38.5% win rate)
      Losing trades: 16
      Avoided losses: 27 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000136
      Std dev: 0.006357
      Min/Max: -0.023977 / 0.039800
      Long positions: 26
  â†’ AUC: 0.3129 | AUCPR: 0.5563 | Accuracy: 0.3250 (0.3083 w/ threshold)
  â†’ Sharpe: 0.5762 (-0.5388 w/ threshold) | Max DD: -0.0548
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2022-01-11 to 2023-10-10 (400 samples)
Valid: 2023-10-11 to 2024-05-16 (120 samples)
Class distribution in validation: {1.0: 61, 0.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=68 | percentile=5 | technical=13 | regime_gate=8 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-10-11 to 2024-05-16
      Winning trades: 10/26 (38.5% win rate)
      Losing trades: 16
      Avoided losses: 43 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000483
      Std dev: 0.005846
      Min/Max: -0.029572 / 0.026600
      Long positions: 26
  â†’ AUC: 0.4182 | AUCPR: 0.4506 | Accuracy: 0.4583 (0.4417 w/ threshold)
  â†’ Sharpe: 1.7212 (1.0963 w/ threshold) | Max DD: -0.0323
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-07-21 to 2024-05-16 (400 samples)
Valid: 2024-05-17 to 2024-11-26 (120 samples)
Class distribution in validation: {0.0: 60, 1.0: 60}
   âœ… Positions opened: 10/120 (8.3%)
   ğŸ” Filter rejections: threshold=75 | percentile=31 | technical=4 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=10/10 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.446

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-05-17 to 2024-11-26
      Winning trades: 6/10 (60.0% win rate)
      Losing trades: 4
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000093
      Std dev: 0.001296
      Min/Max: -0.010516 / 0.005483
      Long positions: 10
  â†’ Threshold (sharpe): BUY=0.6100 | Sharpe: 0.69 | WinRate: 72.2%
  â†’ AUC: 0.8108 | AUCPR: 0.7511 | Accuracy: 0.7000 (0.5167 w/ threshold)
  â†’ Sharpe: 1.6455 (0.1652 w/ threshold) | Max DD: -0.0105
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-01-20 to 2024-11-26 (400 samples)
Valid: 2024-11-27 to 2025-06-17 (120 samples)
Class distribution in validation: {0.0: 75, 1.0: 45}
   âœ… Positions opened: 11/120 (9.2%)
   ğŸ” Filter rejections: threshold=66 | percentile=10 | technical=33 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=11/11 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.776

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-11-27 to 2025-06-17
      Winning trades: 5/11 (45.5% win rate)
      Losing trades: 6
      Avoided losses: 69 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000079
      Std dev: 0.003571
      Min/Max: -0.013426 / 0.032055
      Long positions: 11
  â†’ AUC: 0.5505 | AUCPR: 0.4044 | Accuracy: 0.5083 (0.6167 w/ threshold)
  â†’ Sharpe: -1.0070 (-0.0014 w/ threshold) | Max DD: -0.0356
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-08-07 to 2025-06-17 (400 samples)
Valid: 2025-06-18 to 2026-01-12 (120 samples)
Class distribution in validation: {0.0: 61, 1.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=60 | percentile=6 | technical=17 | regime_gate=11 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-06-18 to 2026-01-12
      Winning trades: 15/26 (57.7% win rate)
      Losing trades: 11
      Avoided losses: 50 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000641
      Std dev: 0.004280
      Min/Max: -0.021899 / 0.021688
      Long positions: 26
  â†’ AUC: 0.6357 | AUCPR: 0.5969 | Accuracy: 0.5833 (0.5417 w/ threshold)
  â†’ Sharpe: 1.2390 (2.0845 w/ threshold) | Max DD: -0.0265
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.491071 0.525580  0.541667              0.491667  0.726659     -0.013206            0.826158   1.000000 0.046875 0.089552           0.61             NaN           sharpe                 True           0.028034    0.018846    0.421890  3.675058       0.666667            3                      3                  0.025000        0.025000                  65                            3      0.053845                         55                          20                         42                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.312896 0.556257  0.325000              0.308333  0.576209     -0.054751           -0.538808   0.384615 0.129870 0.194174           0.64             NaN           sharpe                 True          -0.016370   -0.041370   -1.035277 10.000000       0.461538           26                     26                  0.216667        0.216667                  56                           26      0.037757                         64                           4                         15                           11                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.418172 0.450620  0.458333              0.441667  1.721154     -0.032274            1.096341   0.384615 0.163934 0.229885           0.64             NaN           sharpe                 True           0.057975    0.032975    0.529111 10.000000       0.461538           26                     26                  0.216667        0.216667                  52                           26      0.031817                         68                           5                         13                            8                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.810833 0.751124  0.700000              0.516667  1.645520     -0.010516            0.165168   0.600000 0.100000 0.171428           0.61             NaN           sharpe                 True           0.011142    0.001531   -0.864839  3.844395       0.700000           10                     18                  0.150000        0.083333                  45                           10      0.020519                         75                          31                          4                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.550519 0.404446  0.508333              0.616667 -1.007047     -0.035645           -0.001428   0.454545 0.111111 0.178571           0.64             NaN           sharpe                 True           0.009485   -0.006035   -0.571636  6.208242       0.454545           11                     11                  0.091667        0.091667                  54                           11      0.047787                         66                          10                         33                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.635732 0.596901  0.583333              0.541667  1.239016     -0.026465            2.084544   0.576923 0.254237 0.352941           0.64             NaN           sharpe                 True           0.076970    0.046970    1.186608 12.000000       0.576923           26                     26                  0.216667        0.216667                  60                           26      0.025248                         60                           6                         17                           11                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.5365 Â± 0.1740
AUCPR:                0.5475 Â± 0.1219
Accuracy:             0.5194 Â± 0.1256
Accuracy (threshold): 0.4861 Â± 0.1046
Sharpe Ratio:         0.8169 Â± 1.0075
Sharpe (threshold):   0.6053 Â± 0.9326
Net Sharpe:           -0.0557 Â± 0.8937
Net Return:           0.0088 Â± 0.0314
Turnover:             7.6213 Â± 3.5306
Trade Coverage:       0.1417 Â± 0.0853
EV Mean/Fold:         0.03616 Â± 0.01291
Coverage Ratio:       1.0000
Max Drawdown:         -0.0288 Â± 0.0162
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 793 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 793                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5444                         â•‘
â•‘ Average Accuracy: 0.5338                 â•‘
â•‘ Average Sharpe Ratio: 1.0392             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000599                      â•‘
â•‘ Accuracy Variance: 0.000483             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
           ADX_14    0.159464
             macd    0.110481
         ema_long    0.107796
        ema_short    0.096095
  close_vix_ratio    0.089146
            macds    0.088482
              mfi    0.069082
    volatility_20    0.067571
distance_to_ma200    0.066596
   price_to_sma20    0.057937
           roc_20    0.045473
              atr    0.041878
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - MSFT                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 47.6%                                              â”‚
â”‚    â€¢ Max Probability: 64.3%                                                  â”‚
â”‚    â€¢ Min Probability: 19.3%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 45.0% (Low consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $392.74                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $420.27 (+7.01%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $378.97 (-3.50%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 47.6%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 392.739990234375,
  "profit_target": 420.270839075018,
  "stop_loss": 378.9745658140535,
  "probability": 0.47588181495666504,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.01249 | Quality=0.000 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 12
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-09-15 (400 samples)
Valid: 2022-09-16 to 2023-03-29 (120 samples)
Class distribution in validation: {1.0: 64, 0.0: 56}
   âœ… Positions opened: 3/120 (2.5%)
   ğŸ” Filter rejections: threshold=52 | percentile=27 | technical=38 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=3/3 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.919

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-09-16 to 2023-03-29
      Winning trades: 3/3 (100.0% win rate)
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000234
      Std dev: 0.002964
      Min/Max: -0.013206 / 0.024858
      Long positions: 3
  â†’ AUC: 0.5022 | AUCPR: 0.5368 | Accuracy: 0.5500 (0.4917 w/ threshold)
  â†’ Sharpe: 0.7483 (0.8262 w/ threshold) | Max DD: -0.0132
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-18 to 2023-03-29 (400 samples)
Valid: 2023-03-30 to 2023-10-10 (120 samples)
Class distribution in validation: {1.0: 77, 0.0: 43}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=64 | percentile=4 | technical=15 | regime_gate=11 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-03-30 to 2023-10-10
      Winning trades: 10/26 (38.5% win rate)
      Losing trades: 16
      Avoided losses: 27 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000136
      Std dev: 0.006357
      Min/Max: -0.023977 / 0.039800
      Long positions: 26
  â†’ AUC: 0.3120 | AUCPR: 0.5561 | Accuracy: 0.3250 (0.3083 w/ threshold)
  â†’ Sharpe: 0.5762 (-0.5388 w/ threshold) | Max DD: -0.0548
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2022-01-11 to 2023-10-10 (400 samples)
Valid: 2023-10-11 to 2024-05-16 (120 samples)
Class distribution in validation: {1.0: 61, 0.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=62 | percentile=11 | technical=13 | regime_gate=8 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-10-11 to 2024-05-16
      Winning trades: 9/26 (34.6% win rate)
      Losing trades: 17
      Avoided losses: 42 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000437
      Std dev: 0.005884
      Min/Max: -0.029572 / 0.026600
      Long positions: 26
  â†’ AUC: 0.4276 | AUCPR: 0.4544 | Accuracy: 0.4583 (0.4250 w/ threshold)
  â†’ Sharpe: 1.8161 (0.9644 w/ threshold) | Max DD: -0.0323
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-07-21 to 2024-05-16 (400 samples)
Valid: 2024-05-17 to 2024-11-26 (120 samples)
Class distribution in validation: {0.0: 60, 1.0: 60}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=51 | percentile=17 | technical=19 | regime_gate=7 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.861

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-05-17 to 2024-11-26
      Winning trades: 15/26 (57.7% win rate)
      Losing trades: 11
      Avoided losses: 49 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000036
      Std dev: 0.003939
      Min/Max: -0.023975 / 0.018910
      Long positions: 26
  â†’ AUC: 0.7989 | AUCPR: 0.7224 | Accuracy: 0.7583 (0.5333 w/ threshold)
  â†’ Sharpe: 1.2698 (-0.1733 w/ threshold) | Max DD: -0.0341
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-01-20 to 2024-11-26 (400 samples)
Valid: 2024-11-27 to 2025-06-17 (120 samples)
Class distribution in validation: {0.0: 75, 1.0: 45}
   âœ… Positions opened: 12/120 (10.0%)
   ğŸ” Filter rejections: threshold=65 | percentile=10 | technical=33 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=12/12 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.776

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-11-27 to 2025-06-17
      Winning trades: 5/12 (41.7% win rate)
      Losing trades: 7
      Avoided losses: 68 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000061
      Std dev: 0.003576
      Min/Max: -0.013426 / 0.032055
      Long positions: 12
  â†’ AUC: 0.5461 | AUCPR: 0.4011 | Accuracy: 0.5167 (0.6083 w/ threshold)
  â†’ Sharpe: -1.1502 (-0.0811 w/ threshold) | Max DD: -0.0377
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-08-07 to 2025-06-17 (400 samples)
Valid: 2025-06-18 to 2026-01-12 (120 samples)
Class distribution in validation: {0.0: 61, 1.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=60 | percentile=6 | technical=17 | regime_gate=11 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-06-18 to 2026-01-12
      Winning trades: 15/26 (57.7% win rate)
      Losing trades: 11
      Avoided losses: 50 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000641
      Std dev: 0.004280
      Min/Max: -0.021899 / 0.021688
      Long positions: 26
  â†’ AUC: 0.6346 | AUCPR: 0.5965 | Accuracy: 0.5750 (0.5417 w/ threshold)
  â†’ Sharpe: 1.3255 (2.0845 w/ threshold) | Max DD: -0.0265
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.502232 0.536785  0.550000              0.491667  0.748313     -0.013206            0.826158   1.000000 0.046875 0.089552           0.61             NaN           sharpe                 True           0.028034    0.018846    0.421890  3.675058       0.666667            3                      3                  0.025000        0.025000                  68                            3      0.053845                         52                          27                         38                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.311990 0.556109  0.325000              0.308333  0.576209     -0.054751           -0.538808   0.384615 0.129870 0.194174           0.64             NaN           sharpe                 True          -0.016370   -0.041370   -1.035277 10.000000       0.461538           26                     26                  0.216667        0.216667                  56                           26      0.037757                         64                           4                         15                           11                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.427619 0.454421  0.458333              0.425000  1.816107     -0.032274            0.964373   0.346154 0.147541 0.206896           0.64             NaN           sharpe                 True           0.052416    0.027416    0.403700 10.000000       0.461538           26                     26                  0.216667        0.216667                  58                           26      0.031817                         62                          11                         13                            8                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.798889 0.722398  0.758333              0.533333  1.269774     -0.034149           -0.173349   0.576923 0.250000 0.348837           0.64             NaN           sharpe                 True           0.004362   -0.015005   -0.835616  7.747055       0.500000           26                     26                  0.216667        0.216667                  69                           26      0.029547                         51                          17                         19                            7                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.546074 0.401093  0.516667              0.608333 -1.150203     -0.037723           -0.081137   0.416667 0.111111 0.175438           0.64             NaN           sharpe                 True           0.007330   -0.008190   -0.659199  6.208242       0.416667           12                     12                  0.100000        0.100000                  55                           12      0.047787                         65                          10                         33                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.634621 0.596456  0.575000              0.541667  1.325453     -0.026465            2.084544   0.576923 0.254237 0.352941           0.64             NaN           sharpe                 True           0.076970    0.046970    1.186608 12.000000       0.576923           26                     26                  0.216667        0.216667                  60                           26      0.025248                         60                           6                         17                           11                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.5369 Â± 0.1685
AUCPR:                0.5445 Â± 0.1124
Accuracy:             0.5306 Â± 0.1428
Accuracy (threshold): 0.4847 Â± 0.1055
Sharpe Ratio:         0.7643 Â± 1.0371
Sharpe (threshold):   0.5136 Â± 0.9697
Net Sharpe:           -0.0863 Â± 0.8842
Net Return:           0.0048 Â± 0.0322
Turnover:             8.2717 Â± 3.0178
Trade Coverage:       0.1653 Â± 0.0831
EV Mean/Fold:         0.03767 Â± 0.01112
Coverage Ratio:       1.0000
Max Drawdown:         -0.0331 Â± 0.0137
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 794 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 794                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5444                         â•‘
â•‘ Average Accuracy: 0.5338                 â•‘
â•‘ Average Sharpe Ratio: 1.0389             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000599                      â•‘
â•‘ Accuracy Variance: 0.000482             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
           ADX_14    0.174539
             macd    0.112696
        ema_short    0.112142
         ema_long    0.087568
            macds    0.087334
    volatility_20    0.077971
distance_to_ma200    0.077321
  close_vix_ratio    0.069650
              mfi    0.064480
   price_to_sma20    0.053557
           roc_20    0.044886
              atr    0.037856
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - MSFT                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 50.8%                                              â”‚
â”‚    â€¢ Max Probability: 60.8%                                                  â”‚
â”‚    â€¢ Min Probability: 14.6%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 46.3% (Low consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $392.74                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $420.27 (+7.01%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $378.97 (-3.50%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 50.8%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 392.739990234375,
  "profit_target": 420.270839075018,
  "stop_loss": 378.9745658140535,
  "probability": 0.5075393443306287,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.01582 | Quality=0.008 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))
Engineering features...
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                      ğŸ”§ FEATURE ENGINEERING IN PROGRESS                      â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
Processing technical indicators...

âœ… Total features created: 75


ğŸš€ Creating Advanced Feature Interactions (Optimized)...
   ğŸ“Š Adding high-impact technical ratios...
   ğŸ§  Creating selective LSTMÃ—Technical interactions...
   ğŸ”¬ Adding essential combinations...
   âœ… Total features after optimized engineering: 90

ğŸ” Analyzing feature correlations (threshold=0.98)...
   âš ï¸ Dropping 'lstm_price_5d' (corr=1.000 with 'lstm_price_10d')
   âš ï¸ Dropping 'lstm_price_10d' (corr=1.000 with 'lstm_price_20d')
   âš ï¸ Dropping 'rsi_14' (corr=1.000 with 'rsi')
   âš ï¸ Dropping 'lstm_price_20d' (corr=0.985 with 'bb_lower')
   âš ï¸ Dropping 'bb_lower' (corr=0.996 with 'bb_mid')
   âš ï¸ Dropping 'bb_mid' (corr=0.996 with 'bb_upper')
   âš ï¸ Dropping 'bb_upper' (corr=0.992 with 'KCLe_20_2')
   âš ï¸ Dropping 'KCLe_20_2' (corr=0.999 with 'KCBe_20_2')
   âš ï¸ Dropping 'KCBe_20_2' (corr=0.999 with 'KCUe_20_2')
   âš ï¸ Dropping 'high_52w' (corr=0.982 with 'ma_200')
   âš ï¸ Dropping 'KCUe_20_2' (corr=0.990 with 'HLC3')
   âš ï¸ Dropping 'roc_10' (corr=1.000 with 'price_momentum_10d')
   âœ… Removed 12 redundant features (protected 20 important ones)

ğŸ” Applying adaptive feature filtering...
   âš ï¸ Removing 8 known low-importance features:
      volume_roc_10, volume_ratio, rolling_volatility_zscore, vix_change, regime_state, regime_change, lstm_latent_2, rsi
   âœ… Features dropped successfully

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 12
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-10-03 (400 samples)
Valid: 2022-10-04 to 2023-05-01 (120 samples)
Class distribution in validation: {1.0: 79, 0.0: 41}
   âœ… Positions opened: 14/120 (11.7%)
   ğŸ” Filter rejections: threshold=57 | percentile=26 | technical=23 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=14/14 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.986

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-10-04 to 2023-05-01
      Winning trades: 13/14 (92.9% win rate)
      Losing trades: 1
      Avoided losses: 40 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000516
      Std dev: 0.005040
      Min/Max: -0.017751 / 0.034596
      Long positions: 14
  â†’ AUC: 0.6091 | AUCPR: 0.7519 | Accuracy: 0.5917 (0.4417 w/ threshold)
  â†’ Sharpe: 0.7430 (1.3737 w/ threshold) | Max DD: -0.0270
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-30 to 2023-05-01 (400 samples)
Valid: 2023-05-02 to 2023-12-08 (120 samples)
Class distribution in validation: {1.0: 68, 0.0: 52}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=52 | percentile=18 | technical=19 | regime_gate=5 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-05-02 to 2023-12-08
      Winning trades: 11/26 (42.3% win rate)
      Losing trades: 15
      Avoided losses: 37 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000058
      Std dev: 0.004462
      Min/Max: -0.024606 / 0.015465
      Long positions: 26
  â†’ AUC: 0.4690 | AUCPR: 0.5256 | Accuracy: 0.5333 (0.4000 w/ threshold)
  â†’ Sharpe: 1.1233 (-0.0776 w/ threshold) | Max DD: -0.0700
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2022-02-03 to 2023-12-08 (400 samples)
Valid: 2023-12-11 to 2024-06-25 (120 samples)
Class distribution in validation: {1.0: 64, 0.0: 56}
   âœ… Positions opened: 15/120 (12.5%)
   ğŸ” Filter rejections: threshold=48 | percentile=17 | technical=40 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=15/15 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-12-11 to 2024-06-25
      Winning trades: 4/15 (26.7% win rate)
      Losing trades: 11
      Avoided losses: 45 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000020
      Std dev: 0.007323
      Min/Max: -0.019148 / 0.072649
      Long positions: 15
  â†’ AUC: 0.3331 | AUCPR: 0.4619 | Accuracy: 0.3083 (0.4083 w/ threshold)
  â†’ Sharpe: 0.2008 (-0.1279 w/ threshold) | Max DD: -0.0683
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-08-08 to 2024-06-25 (400 samples)
Valid: 2024-06-26 to 2024-12-19 (120 samples)
Class distribution in validation: {0.0: 67, 1.0: 53}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=56 | percentile=7 | technical=14 | regime_gate=17 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.842

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-06-26 to 2024-12-19
      Winning trades: 15/26 (57.7% win rate)
      Losing trades: 11
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000126
      Std dev: 0.004370
      Min/Max: -0.018217 / 0.018006
      Long positions: 26
  â†’ AUC: 0.6039 | AUCPR: 0.5151 | Accuracy: 0.5917 (0.5917 w/ threshold)
  â†’ Sharpe: 1.7772 (0.1680 w/ threshold) | Max DD: -0.0517
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-02-22 to 2024-12-19 (400 samples)
Valid: 2024-12-20 to 2025-08-01 (120 samples)
Class distribution in validation: {0.0: 82, 1.0: 38}
   âœ… Positions opened: 8/120 (6.7%)
   ğŸ” Filter rejections: threshold=57 | percentile=24 | technical=31 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=8/8 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.734

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-12-20 to 2025-08-01
      Winning trades: 2/8 (25.0% win rate)
      Losing trades: 6
      Avoided losses: 76 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000091
      Std dev: 0.003185
      Min/Max: -0.019251 / 0.016019
      Long positions: 8
  â†’ AUC: 0.6293 | AUCPR: 0.4230 | Accuracy: 0.4667 (0.6500 w/ threshold)
  â†’ Sharpe: -1.3368 (-0.8488 w/ threshold) | Max DD: -0.0399
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-09-25 to 2025-08-01 (400 samples)
Valid: 2025-08-04 to 2026-01-29 (98 samples)
Class distribution in validation: {1.0: 56, 0.0: 42}
   âœ… Positions opened: 21/98 (21.4%)
   ğŸ” Filter rejections: threshold=45 | percentile=10 | technical=14 | regime_gate=8 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=21/21 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.954

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-08-04 to 2026-01-29
      Winning trades: 9/21 (42.9% win rate)
      Losing trades: 12
      Avoided losses: 30 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 98/98):
      Mean return: 0.000933
      Std dev: 0.006231
      Min/Max: -0.017331 / 0.037615
      Long positions: 21
  â†’ AUC: 0.3440 | AUCPR: 0.5079 | Accuracy: 0.3367 (0.3980 w/ threshold)
  â†’ Sharpe: 2.6676 (2.1753 w/ threshold) | Max DD: -0.0288
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.609139 0.751852  0.591667              0.441667  0.743034     -0.026991            1.373673   0.928571 0.164557 0.279570           0.64             NaN           sharpe                 True           0.061863    0.047075    0.985919  5.915447       0.642857           14                     14                  0.116667        0.116667                  63                           14      0.054369                         57                          26                         23                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.469033 0.525633  0.533333              0.400000  1.123333     -0.069979           -0.077578   0.423077 0.161765 0.234042           0.64             NaN           sharpe                 True           0.006907   -0.038093   -1.403659 18.000000       0.576923           26                     26                  0.216667        0.216667                  68                           26      0.030729                         52                          18                         19                            5                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.333147 0.461907  0.308333              0.408333  0.200770     -0.068339           -0.127873   0.266667 0.062500 0.101266           0.64             NaN           sharpe                 True           0.002445   -0.022555   -0.574079 10.000000       0.200000           15                     15                  0.125000        0.125000                  72                           15      0.035264                         48                          17                         40                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.603914 0.515104  0.591667              0.591667  1.777202     -0.051720            0.168025   0.576923 0.283019 0.379746           0.64             NaN           sharpe                 True           0.015074   -0.001776   -0.346992  6.739847       0.461538           26                     26                  0.216667        0.216667                  64                           26      0.031414                         56                           7                         14                           17                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.629332 0.423003  0.466667              0.650000 -1.336809     -0.039915           -0.848813   0.250000 0.052632 0.086956           0.61             NaN           sharpe                 True          -0.010913   -0.018251   -1.142576  2.935035       0.500000            8                      8                  0.066667        0.066667                  63                            8      0.073816                         57                          24                         31                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.343963 0.507854  0.336735              0.397959  2.667616     -0.028775            2.175256   0.428571 0.160714 0.233766           0.64             NaN           sharpe                 True           0.091454    0.058072    1.326453 13.352688       0.666667           21                     21                  0.214286        0.214286                  53                           21      0.034889                         45                          10                         14                            8                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.4981 Â± 0.1361
AUCPR:                0.5309 Â± 0.1149
Accuracy:             0.4714 Â± 0.1245
Accuracy (threshold): 0.4816 Â± 0.1105
Sharpe Ratio:         0.8625 Â± 1.3749
Sharpe (threshold):   0.4438 Â± 1.1143
Net Sharpe:           -0.1925 Â± 1.1167
Net Return:           0.0041 Â± 0.0395
Turnover:             9.4905 Â± 5.4938
Trade Coverage:       0.1593 Â± 0.0651
EV Mean/Fold:         0.04341 Â± 0.01725
Coverage Ratio:       1.0000
Max Drawdown:         -0.0476 Â± 0.0189
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 795 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 795                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5443                         â•‘
â•‘ Average Accuracy: 0.5337                 â•‘
â•‘ Average Sharpe Ratio: 1.0387             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000601                      â•‘
â•‘ Accuracy Variance: 0.000487             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
distance_to_ma200    0.131057
         ema_long    0.112953
        ema_short    0.110047
             macd    0.102509
           ADX_14    0.099295
           roc_20    0.098857
    volatility_20    0.073069
            macds    0.063531
  close_vix_ratio    0.063408
              mfi    0.053477
   price_to_sma20    0.048934
              atr    0.042864
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - AAPL                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 56.7%                                              â”‚
â”‚    â€¢ Max Probability: 62.7%                                                  â”‚
â”‚    â€¢ Min Probability: 35.7%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 27.1% (Low consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $264.18                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $280.54 (+6.19%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $256.00 (-3.10%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 56.7%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 264.17999267578125,
  "profit_target": 280.5402180432999,
  "stop_loss": 255.99987999202193,
  "probability": 0.5672370741764704,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.01923 | Quality=0.067 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 12
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-10-03 (400 samples)
Valid: 2022-10-04 to 2023-05-01 (120 samples)
Class distribution in validation: {1.0: 79, 0.0: 41}
   âœ… Positions opened: 15/120 (12.5%)
   ğŸ” Filter rejections: threshold=61 | percentile=12 | technical=32 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=15/15 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.986

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-10-04 to 2023-05-01
      Winning trades: 14/15 (93.3% win rate)
      Losing trades: 1
      Avoided losses: 40 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000442
      Std dev: 0.005012
      Min/Max: -0.017751 / 0.034596
      Long positions: 15
  â†’ AUC: 0.5952 | AUCPR: 0.7432 | Accuracy: 0.6417 (0.4500 w/ threshold)
  â†’ Sharpe: 1.6080 (1.1483 w/ threshold) | Max DD: -0.0270
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-30 to 2023-05-01 (400 samples)
Valid: 2023-05-02 to 2023-12-08 (120 samples)
Class distribution in validation: {1.0: 68, 0.0: 52}
   âœ… Positions opened: 25/120 (20.8%)
   ğŸ” Filter rejections: threshold=52 | percentile=25 | technical=18 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=25/25 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-05-02 to 2023-12-08
      Winning trades: 13/25 (52.0% win rate)
      Losing trades: 12
      Avoided losses: 40 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000055
      Std dev: 0.005968
      Min/Max: -0.024606 / 0.046927
      Long positions: 25
  â†’ AUC: 0.4805 | AUCPR: 0.5366 | Accuracy: 0.5250 (0.4417 w/ threshold)
  â†’ Sharpe: 1.0170 (-0.0661 w/ threshold) | Max DD: -0.0703
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2022-02-03 to 2023-12-08 (400 samples)
Valid: 2023-12-11 to 2024-06-25 (120 samples)
Class distribution in validation: {1.0: 64, 0.0: 56}
   âœ… Positions opened: 15/120 (12.5%)
   ğŸ” Filter rejections: threshold=48 | percentile=17 | technical=40 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=15/15 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-12-11 to 2024-06-25
      Winning trades: 4/15 (26.7% win rate)
      Losing trades: 11
      Avoided losses: 45 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000020
      Std dev: 0.007323
      Min/Max: -0.019148 / 0.072649
      Long positions: 15
  â†’ AUC: 0.3320 | AUCPR: 0.4609 | Accuracy: 0.3000 (0.4083 w/ threshold)
  â†’ Sharpe: 0.1506 (-0.1279 w/ threshold) | Max DD: -0.0683
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-08-08 to 2024-06-25 (400 samples)
Valid: 2024-06-26 to 2024-12-19 (120 samples)
Class distribution in validation: {0.0: 67, 1.0: 53}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=55 | percentile=6 | technical=14 | regime_gate=19 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.842

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-06-26 to 2024-12-19
      Winning trades: 15/26 (57.7% win rate)
      Losing trades: 11
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000220
      Std dev: 0.004073
      Min/Max: -0.018217 / 0.018006
      Long positions: 26
  â†’ AUC: 0.6174 | AUCPR: 0.5262 | Accuracy: 0.5750 (0.5917 w/ threshold)
  â†’ Sharpe: 0.8582 (-1.1664 w/ threshold) | Max DD: -0.0542
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-02-22 to 2024-12-19 (400 samples)
Valid: 2024-12-20 to 2025-08-01 (120 samples)
Class distribution in validation: {0.0: 82, 1.0: 38}
   âœ… Positions opened: 8/120 (6.7%)
   ğŸ” Filter rejections: threshold=57 | percentile=24 | technical=31 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=8/8 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.734

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-12-20 to 2025-08-01
      Winning trades: 2/8 (25.0% win rate)
      Losing trades: 6
      Avoided losses: 76 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000091
      Std dev: 0.003185
      Min/Max: -0.019251 / 0.016019
      Long positions: 8
  â†’ AUC: 0.6327 | AUCPR: 0.4251 | Accuracy: 0.4667 (0.6500 w/ threshold)
  â†’ Sharpe: -0.9923 (-0.8488 w/ threshold) | Max DD: -0.0399
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-09-25 to 2025-08-01 (400 samples)
Valid: 2025-08-04 to 2026-01-29 (98 samples)
Class distribution in validation: {1.0: 56, 0.0: 42}
   âœ… Positions opened: 12/98 (12.2%)
   ğŸ” Filter rejections: threshold=49 | percentile=32 | technical=5 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=12/12 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.954

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-08-04 to 2026-01-29
      Winning trades: 6/12 (50.0% win rate)
      Losing trades: 6
      Avoided losses: 36 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 98/98):
      Mean return: 0.000166
      Std dev: 0.005377
      Min/Max: -0.030768 / 0.030552
      Long positions: 12
  â†’ Threshold (sharpe): BUY=0.6400 | Sharpe: 0.71 | WinRate: 40.0%
  â†’ AUC: 0.3359 | AUCPR: 0.5003 | Accuracy: 0.4184 (0.4286 w/ threshold)
  â†’ Sharpe: 3.2030 (0.2557 w/ threshold) | Max DD: -0.0517
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.595245 0.743158  0.641667              0.450000  1.607961     -0.026991            1.148262   0.933333 0.177215 0.297872           0.64             NaN           sharpe                 True           0.053027    0.033309    0.625647  7.887263       0.600000           15                     15                  0.125000        0.125000                  59                           15      0.054369                         61                          12                         32                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.480486 0.536575  0.525000              0.441667  1.016981     -0.070296           -0.066099   0.520000 0.191176 0.279569           0.64             NaN           sharpe                 True           0.006542   -0.043458   -1.162567 20.000000       0.440000           25                     25                  0.208333        0.208333                  68                           25      0.030729                         52                          25                         18                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.332031 0.460901  0.300000              0.408333  0.150613     -0.068339           -0.127873   0.266667 0.062500 0.101266           0.64             NaN           sharpe                 True           0.002445   -0.022555   -0.574079 10.000000       0.200000           15                     15                  0.125000        0.125000                  72                           15      0.035264                         48                          17                         40                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.617432 0.526193  0.575000              0.591667  0.858171     -0.054189           -1.166447   0.576923 0.283019 0.379746           0.64             NaN           sharpe                 True          -0.026386   -0.043236   -1.674362  6.739847       0.384615           26                     26                  0.216667        0.216667                  65                           26      0.031414                         55                           6                         14                           19                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.632702 0.425088  0.466667              0.650000 -0.992259     -0.039915           -0.848813   0.250000 0.052632 0.086956           0.61             NaN           sharpe                 True          -0.010913   -0.018251   -1.142576  2.935035       0.500000            8                      8                  0.066667        0.066667                  63                            8      0.073816                         57                          24                         31                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.335884 0.500310  0.418367              0.428571  3.203028     -0.051707            0.255686   0.500000 0.107143 0.176470           0.64             NaN           sharpe                 True           0.016265    0.001958   -0.177601  5.722581       0.500000           12                     20                  0.204082        0.122449                  49                           12      0.034889                         49                          32                          5                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.4990 Â± 0.1386
AUCPR:                0.5320 Â± 0.1115
Accuracy:             0.4878 Â± 0.1210
Accuracy (threshold): 0.4950 Â± 0.1002
Sharpe Ratio:         0.9741 Â± 1.4092
Sharpe (threshold):   -0.1342 Â± 0.8219
Net Sharpe:           -0.6843 Â± 0.8251
Net Return:           -0.0154 Â± 0.0293
Turnover:             8.8808 Â± 5.9294
Trade Coverage:       0.1440 Â± 0.0576
EV Mean/Fold:         0.04341 Â± 0.01725
Coverage Ratio:       1.0000
Max Drawdown:         -0.0519 Â± 0.0166
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 796 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 796                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5443                         â•‘
â•‘ Average Accuracy: 0.5336                 â•‘
â•‘ Average Sharpe Ratio: 1.0386             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000603                      â•‘
â•‘ Accuracy Variance: 0.000489             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
distance_to_ma200    0.109079
        ema_short    0.105411
           roc_20    0.105175
         ema_long    0.096055
           ADX_14    0.094870
             macd    0.087697
            macds    0.075841
              mfi    0.070497
              atr    0.070124
    volatility_20    0.067965
  close_vix_ratio    0.060492
   price_to_sma20    0.056794
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - AAPL                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 58.4%                                              â”‚
â”‚    â€¢ Max Probability: 60.7%                                                  â”‚
â”‚    â€¢ Min Probability: 51.1%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 9.6% (High consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $264.18                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $280.54 (+6.19%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $256.00 (-3.10%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 58.4%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 264.17999267578125,
  "profit_target": 280.5402180432999,
  "stop_loss": 255.99987999202193,
  "probability": 0.5844289362430573,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.02082 | Quality=0.084 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 12
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-10-03 (400 samples)
Valid: 2022-10-04 to 2023-05-01 (120 samples)
Class distribution in validation: {1.0: 79, 0.0: 41}
   âœ… Positions opened: 15/120 (12.5%)
   ğŸ” Filter rejections: threshold=61 | percentile=11 | technical=33 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=15/15 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.986

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-10-04 to 2023-05-01
      Winning trades: 14/15 (93.3% win rate)
      Losing trades: 1
      Avoided losses: 40 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000442
      Std dev: 0.005012
      Min/Max: -0.017751 / 0.034596
      Long positions: 15
  â†’ AUC: 0.5883 | AUCPR: 0.7350 | Accuracy: 0.6417 (0.4500 w/ threshold)
  â†’ Sharpe: 1.6080 (1.1483 w/ threshold) | Max DD: -0.0270
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-30 to 2023-05-01 (400 samples)
Valid: 2023-05-02 to 2023-12-08 (120 samples)
Class distribution in validation: {1.0: 68, 0.0: 52}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=52 | percentile=19 | technical=19 | regime_gate=4 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-05-02 to 2023-12-08
      Winning trades: 12/26 (46.2% win rate)
      Losing trades: 14
      Avoided losses: 38 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000061
      Std dev: 0.004463
      Min/Max: -0.024606 / 0.015465
      Long positions: 26
  â†’ AUC: 0.4673 | AUCPR: 0.5274 | Accuracy: 0.5333 (0.4167 w/ threshold)
  â†’ Sharpe: 1.1233 (-0.0657 w/ threshold) | Max DD: -0.0706
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2022-02-03 to 2023-12-08 (400 samples)
Valid: 2023-12-11 to 2024-06-25 (120 samples)
Class distribution in validation: {1.0: 64, 0.0: 56}
   âœ… Positions opened: 14/120 (11.7%)
   ğŸ” Filter rejections: threshold=48 | percentile=18 | technical=40 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=14/14 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-12-11 to 2024-06-25
      Winning trades: 4/14 (28.6% win rate)
      Losing trades: 10
      Avoided losses: 46 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000091
      Std dev: 0.007282
      Min/Max: -0.019148 / 0.072649
      Long positions: 14
  â†’ AUC: 0.3361 | AUCPR: 0.4641 | Accuracy: 0.3250 (0.4167 w/ threshold)
  â†’ Sharpe: 0.2945 (0.0246 w/ threshold) | Max DD: -0.0604
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-08-08 to 2024-06-25 (400 samples)
Valid: 2024-06-26 to 2024-12-19 (120 samples)
Class distribution in validation: {0.0: 67, 1.0: 53}
   âœ… Positions opened: 19/120 (15.8%)
   ğŸ” Filter rejections: threshold=58 | percentile=37 | technical=6 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=19/19 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.840

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-06-26 to 2024-12-19
      Winning trades: 13/19 (68.4% win rate)
      Losing trades: 6
      Avoided losses: 61 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000448
      Std dev: 0.003649
      Min/Max: -0.018217 / 0.018006
      Long positions: 19
  â†’ Threshold (sharpe): BUY=0.6400 | Sharpe: 1.56 | WinRate: 60.0%
  â†’ AUC: 0.6080 | AUCPR: 0.5366 | Accuracy: 0.6000 (0.6167 w/ threshold)
  â†’ Sharpe: 1.6216 (1.6038 w/ threshold) | Max DD: -0.0237
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-02-22 to 2024-12-19 (400 samples)
Valid: 2024-12-20 to 2025-08-01 (120 samples)
Class distribution in validation: {0.0: 82, 1.0: 38}
   âœ… Positions opened: 8/120 (6.7%)
   ğŸ” Filter rejections: threshold=55 | percentile=25 | technical=32 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=8/8 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.734

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-12-20 to 2025-08-01
      Winning trades: 2/8 (25.0% win rate)
      Losing trades: 6
      Avoided losses: 76 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000091
      Std dev: 0.003185
      Min/Max: -0.019251 / 0.016019
      Long positions: 8
  â†’ AUC: 0.6277 | AUCPR: 0.4205 | Accuracy: 0.4583 (0.6500 w/ threshold)
  â†’ Sharpe: -1.2420 (-0.8488 w/ threshold) | Max DD: -0.0399
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-09-25 to 2025-08-01 (400 samples)
Valid: 2025-08-04 to 2026-01-29 (98 samples)
Class distribution in validation: {1.0: 56, 0.0: 42}
   âœ… Positions opened: 6/98 (6.1%)
   ğŸ” Filter rejections: threshold=77 | percentile=13 | technical=2 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=6/6 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.954

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-08-04 to 2026-01-29
      Winning trades: 2/6 (33.3% win rate)
      Losing trades: 4
      Avoided losses: 38 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 98/98):
      Mean return: -0.000226
      Std dev: 0.004116
      Min/Max: -0.030768 / 0.016751
      Long positions: 6
  â†’ Threshold (sharpe): BUY=0.6100 | Sharpe: 1.63 | WinRate: 50.0%
  â†’ AUC: 0.3710 | AUCPR: 0.5133 | Accuracy: 0.3980 (0.4082 w/ threshold)
  â†’ Sharpe: 2.1862 (-1.1760 w/ threshold) | Max DD: -0.0517
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.588299 0.734954  0.641667              0.450000  1.607961     -0.026991            1.148262   0.933333 0.177215 0.297872           0.64             NaN           sharpe                 True           0.053027    0.033309    0.625647  7.887263       0.600000           15                     15                  0.125000        0.125000                  59                           15      0.054369                         61                          11                         33                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.467336 0.527369  0.533333              0.416667  1.123333     -0.070624           -0.065695   0.461538 0.176471 0.255319           0.64             NaN           sharpe                 True           0.007307   -0.042693   -1.537765 20.000000       0.538462           26                     26                  0.216667        0.216667                  68                           26      0.030729                         52                          19                         19                            4                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.336077 0.464142  0.325000              0.416667  0.294530     -0.060418            0.024552   0.285714 0.062500 0.102564           0.64             NaN           sharpe                 True           0.010875   -0.014125   -0.425440 10.000000       0.214286           14                     14                  0.116667        0.116667                  72                           14      0.035264                         48                          18                         40                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.607998 0.536624  0.600000              0.616667  1.621557     -0.023718            1.603800   0.684210 0.245283 0.361111           0.64             NaN           sharpe                 True           0.053763    0.020110    0.390384 13.461287       0.526316           19                     25                  0.208333        0.158333                  62                           19      0.031361                         58                          37                          6                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.627728 0.420536  0.458333              0.650000 -1.242025     -0.039915           -0.848813   0.250000 0.052632 0.086956           0.61             NaN           sharpe                 True          -0.010913   -0.018251   -1.142576  2.935035       0.500000            8                      8                  0.066667        0.066667                  65                            8      0.073816                         55                          25                         32                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.370961 0.513332  0.397959              0.408163  2.186201     -0.051707           -1.176027   0.333333 0.035714 0.064516           0.61             NaN           sharpe                 True          -0.022105   -0.026874   -1.359333  1.907527       0.333333            6                     10                  0.102041        0.061224                  21                            6      0.034889                         77                          13                          2                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.4997 Â± 0.1268
AUCPR:                0.5328 Â± 0.1083
Accuracy:             0.4927 Â± 0.1214
Accuracy (threshold): 0.4930 Â± 0.1101
Sharpe Ratio:         0.9319 Â± 1.2389
Sharpe (threshold):   0.1143 Â± 1.0882
Net Sharpe:           -0.5748 Â± 0.9231
Net Return:           -0.0081 Â± 0.0290
Turnover:             9.3652 Â± 6.7739
Trade Coverage:       0.1241 Â± 0.0584
EV Mean/Fold:         0.04340 Â± 0.01726
Coverage Ratio:       1.0000
Max Drawdown:         -0.0456 Â± 0.0187
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 797 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 797                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5442                         â•‘
â•‘ Average Accuracy: 0.5336                 â•‘
â•‘ Average Sharpe Ratio: 1.0384             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000604                      â•‘
â•‘ Accuracy Variance: 0.000490             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
distance_to_ma200    0.111655
           roc_20    0.110204
        ema_short    0.101479
         ema_long    0.095172
             macd    0.092785
           ADX_14    0.085552
  close_vix_ratio    0.084132
    volatility_20    0.068969
            macds    0.066547
              mfi    0.064813
   price_to_sma20    0.062893
              atr    0.055801
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - AAPL                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 57.6%                                              â”‚
â”‚    â€¢ Max Probability: 68.6%                                                  â”‚
â”‚    â€¢ Min Probability: 42.3%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 26.3% (Low consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $264.18                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $280.54 (+6.19%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $256.00 (-3.10%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 57.6%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 264.17999267578125,
  "profit_target": 280.5402180432999,
  "stop_loss": 255.99987999202193,
  "probability": 0.5763011028369268,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.02007 | Quality=0.076 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))
Engineering features...
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                      ğŸ”§ FEATURE ENGINEERING IN PROGRESS                      â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
Processing technical indicators...

âœ… Total features created: 95


ğŸš€ Creating Advanced Feature Interactions (Optimized)...
   â™»ï¸ Dropped redundant seq-equivalent features: tcn_price_5d, tcn_price_10d, tcn_price_20d, tcn_return_5d, tcn_return_10d, tcn_return_20d...
   ğŸ“Š Adding high-impact technical ratios...
   ğŸ§  Creating selective LSTMÃ—Technical interactions...
   ğŸ”¬ Adding essential combinations...
   âœ… Total features after optimized engineering: 100

ğŸ” Analyzing feature correlations (threshold=0.98)...
   âš ï¸ Dropping 'tcn_latent_2' (corr=1.000 with 'lstm_latent_2')
   âš ï¸ Dropping 'tcn_latent_8' (corr=1.000 with 'lstm_latent_8')
   âš ï¸ Dropping 'rsi_14' (corr=1.000 with 'rsi')
   âš ï¸ Dropping 'bb_lower' (corr=0.996 with 'bb_mid')
   âš ï¸ Dropping 'bb_mid' (corr=0.996 with 'bb_upper')
   âš ï¸ Dropping 'bb_upper' (corr=0.992 with 'KCLe_20_2')
   âš ï¸ Dropping 'KCLe_20_2' (corr=0.999 with 'KCBe_20_2')
   âš ï¸ Dropping 'KCBe_20_2' (corr=0.999 with 'KCUe_20_2')
   âš ï¸ Dropping 'high_52w' (corr=0.982 with 'ma_200')
   âš ï¸ Dropping 'KCUe_20_2' (corr=0.990 with 'HLC3')
   âš ï¸ Dropping 'roc_10' (corr=1.000 with 'price_momentum_10d')
   âœ… Removed 11 redundant features (protected 20 important ones)

ğŸ” Applying adaptive feature filtering...
   âš ï¸ Removing 8 known low-importance features:
      vix_change, regime_state, volume_roc_10, volume_ratio, regime_change, rolling_volatility_zscore, rsi, lstm_latent_2
   âœ… Features dropped successfully

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 11
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-10-03 (400 samples)
Valid: 2022-10-04 to 2023-05-01 (120 samples)
Class distribution in validation: {1.0: 79, 0.0: 41}
   âœ… Positions opened: 14/120 (11.7%)
   ğŸ” Filter rejections: threshold=57 | percentile=26 | technical=23 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=14/14 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.986

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-10-04 to 2023-05-01
      Winning trades: 13/14 (92.9% win rate)
      Losing trades: 1
      Avoided losses: 40 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000516
      Std dev: 0.005040
      Min/Max: -0.017751 / 0.034596
      Long positions: 14
  â†’ AUC: 0.6091 | AUCPR: 0.7519 | Accuracy: 0.5917 (0.4417 w/ threshold)
  â†’ Sharpe: 0.7430 (1.3737 w/ threshold) | Max DD: -0.0270
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-30 to 2023-05-01 (400 samples)
Valid: 2023-05-02 to 2023-12-08 (120 samples)
Class distribution in validation: {1.0: 68, 0.0: 52}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=52 | percentile=18 | technical=19 | regime_gate=5 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-05-02 to 2023-12-08
      Winning trades: 11/26 (42.3% win rate)
      Losing trades: 15
      Avoided losses: 37 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000058
      Std dev: 0.004462
      Min/Max: -0.024606 / 0.015465
      Long positions: 26
  â†’ AUC: 0.4690 | AUCPR: 0.5256 | Accuracy: 0.5333 (0.4000 w/ threshold)
  â†’ Sharpe: 1.1233 (-0.0776 w/ threshold) | Max DD: -0.0700
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2022-02-03 to 2023-12-08 (400 samples)
Valid: 2023-12-11 to 2024-06-25 (120 samples)
Class distribution in validation: {1.0: 64, 0.0: 56}
   âœ… Positions opened: 15/120 (12.5%)
   ğŸ” Filter rejections: threshold=48 | percentile=17 | technical=40 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=15/15 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-12-11 to 2024-06-25
      Winning trades: 4/15 (26.7% win rate)
      Losing trades: 11
      Avoided losses: 45 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000020
      Std dev: 0.007323
      Min/Max: -0.019148 / 0.072649
      Long positions: 15
  â†’ AUC: 0.3331 | AUCPR: 0.4619 | Accuracy: 0.3083 (0.4083 w/ threshold)
  â†’ Sharpe: 0.2008 (-0.1279 w/ threshold) | Max DD: -0.0683
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-08-08 to 2024-06-25 (400 samples)
Valid: 2024-06-26 to 2024-12-19 (120 samples)
Class distribution in validation: {0.0: 67, 1.0: 53}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=56 | percentile=7 | technical=14 | regime_gate=17 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.842

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-06-26 to 2024-12-19
      Winning trades: 15/26 (57.7% win rate)
      Losing trades: 11
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000126
      Std dev: 0.004370
      Min/Max: -0.018217 / 0.018006
      Long positions: 26
  â†’ AUC: 0.6039 | AUCPR: 0.5151 | Accuracy: 0.5917 (0.5917 w/ threshold)
  â†’ Sharpe: 1.7772 (0.1680 w/ threshold) | Max DD: -0.0517
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-02-22 to 2024-12-19 (400 samples)
Valid: 2024-12-20 to 2025-08-01 (120 samples)
Class distribution in validation: {0.0: 82, 1.0: 38}
   âœ… Positions opened: 8/120 (6.7%)
   ğŸ” Filter rejections: threshold=57 | percentile=24 | technical=31 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=8/8 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.734

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-12-20 to 2025-08-01
      Winning trades: 2/8 (25.0% win rate)
      Losing trades: 6
      Avoided losses: 76 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000091
      Std dev: 0.003185
      Min/Max: -0.019251 / 0.016019
      Long positions: 8
  â†’ AUC: 0.6293 | AUCPR: 0.4230 | Accuracy: 0.4667 (0.6500 w/ threshold)
  â†’ Sharpe: -1.3368 (-0.8488 w/ threshold) | Max DD: -0.0399
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-09-25 to 2025-08-01 (400 samples)
Valid: 2025-08-04 to 2026-01-29 (98 samples)
Class distribution in validation: {1.0: 56, 0.0: 42}
   âœ… Positions opened: 21/98 (21.4%)
   ğŸ” Filter rejections: threshold=45 | percentile=10 | technical=14 | regime_gate=8 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=21/21 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.954

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-08-04 to 2026-01-29
      Winning trades: 9/21 (42.9% win rate)
      Losing trades: 12
      Avoided losses: 30 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 98/98):
      Mean return: 0.000933
      Std dev: 0.006231
      Min/Max: -0.017331 / 0.037615
      Long positions: 21
  â†’ AUC: 0.3440 | AUCPR: 0.5079 | Accuracy: 0.3367 (0.3980 w/ threshold)
  â†’ Sharpe: 2.6676 (2.1753 w/ threshold) | Max DD: -0.0288
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.609139 0.751852  0.591667              0.441667  0.743034     -0.026991            1.373673   0.928571 0.164557 0.279570           0.64             NaN           sharpe                 True           0.061863    0.047075    0.985919  5.915447       0.642857           14                     14                  0.116667        0.116667                  63                           14      0.054369                         57                          26                         23                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.469033 0.525633  0.533333              0.400000  1.123333     -0.069979           -0.077578   0.423077 0.161765 0.234042           0.64             NaN           sharpe                 True           0.006907   -0.038093   -1.403659 18.000000       0.576923           26                     26                  0.216667        0.216667                  68                           26      0.030729                         52                          18                         19                            5                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.333147 0.461907  0.308333              0.408333  0.200770     -0.068339           -0.127873   0.266667 0.062500 0.101266           0.64             NaN           sharpe                 True           0.002445   -0.022555   -0.574079 10.000000       0.200000           15                     15                  0.125000        0.125000                  72                           15      0.035264                         48                          17                         40                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.603914 0.515104  0.591667              0.591667  1.777202     -0.051720            0.168025   0.576923 0.283019 0.379746           0.64             NaN           sharpe                 True           0.015074   -0.001776   -0.346992  6.739847       0.461538           26                     26                  0.216667        0.216667                  64                           26      0.031414                         56                           7                         14                           17                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.629332 0.423003  0.466667              0.650000 -1.336809     -0.039915           -0.848813   0.250000 0.052632 0.086956           0.61             NaN           sharpe                 True          -0.010913   -0.018251   -1.142576  2.935035       0.500000            8                      8                  0.066667        0.066667                  63                            8      0.073816                         57                          24                         31                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.343963 0.507854  0.336735              0.397959  2.667616     -0.028775            2.175256   0.428571 0.160714 0.233766           0.64             NaN           sharpe                 True           0.091454    0.058072    1.326453 13.352688       0.666667           21                     21                  0.214286        0.214286                  53                           21      0.034889                         45                          10                         14                            8                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.4981 Â± 0.1361
AUCPR:                0.5309 Â± 0.1149
Accuracy:             0.4714 Â± 0.1245
Accuracy (threshold): 0.4816 Â± 0.1105
Sharpe Ratio:         0.8625 Â± 1.3749
Sharpe (threshold):   0.4438 Â± 1.1143
Net Sharpe:           -0.1925 Â± 1.1167
Net Return:           0.0041 Â± 0.0395
Turnover:             9.4905 Â± 5.4938
Trade Coverage:       0.1593 Â± 0.0651
EV Mean/Fold:         0.04341 Â± 0.01725
Coverage Ratio:       1.0000
Max Drawdown:         -0.0476 Â± 0.0189
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 798 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 798                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5442                         â•‘
â•‘ Average Accuracy: 0.5335                 â•‘
â•‘ Average Sharpe Ratio: 1.0382             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000606                      â•‘
â•‘ Accuracy Variance: 0.000494             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
distance_to_ma200    0.131057
         ema_long    0.112953
        ema_short    0.110047
             macd    0.102509
           ADX_14    0.099295
           roc_20    0.098857
    volatility_20    0.073069
            macds    0.063531
  close_vix_ratio    0.063408
              mfi    0.053477
   price_to_sma20    0.048934
              atr    0.042864
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - AAPL                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 56.7%                                              â”‚
â”‚    â€¢ Max Probability: 62.7%                                                  â”‚
â”‚    â€¢ Min Probability: 35.7%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 27.1% (Low consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $264.18                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $280.54 (+6.19%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $256.00 (-3.10%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 56.7%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 264.17999267578125,
  "profit_target": 280.5402180432999,
  "stop_loss": 255.99987999202193,
  "probability": 0.5672370741764704,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.01923 | Quality=0.067 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 11
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-10-03 (400 samples)
Valid: 2022-10-04 to 2023-05-01 (120 samples)
Class distribution in validation: {1.0: 79, 0.0: 41}
   âœ… Positions opened: 15/120 (12.5%)
   ğŸ” Filter rejections: threshold=61 | percentile=12 | technical=32 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=15/15 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.986

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-10-04 to 2023-05-01
      Winning trades: 14/15 (93.3% win rate)
      Losing trades: 1
      Avoided losses: 40 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000442
      Std dev: 0.005012
      Min/Max: -0.017751 / 0.034596
      Long positions: 15
  â†’ AUC: 0.5952 | AUCPR: 0.7432 | Accuracy: 0.6417 (0.4500 w/ threshold)
  â†’ Sharpe: 1.6080 (1.1483 w/ threshold) | Max DD: -0.0270
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-30 to 2023-05-01 (400 samples)
Valid: 2023-05-02 to 2023-12-08 (120 samples)
Class distribution in validation: {1.0: 68, 0.0: 52}
   âœ… Positions opened: 25/120 (20.8%)
   ğŸ” Filter rejections: threshold=52 | percentile=25 | technical=18 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=25/25 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-05-02 to 2023-12-08
      Winning trades: 13/25 (52.0% win rate)
      Losing trades: 12
      Avoided losses: 40 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000055
      Std dev: 0.005968
      Min/Max: -0.024606 / 0.046927
      Long positions: 25
  â†’ AUC: 0.4805 | AUCPR: 0.5366 | Accuracy: 0.5250 (0.4417 w/ threshold)
  â†’ Sharpe: 1.0170 (-0.0661 w/ threshold) | Max DD: -0.0703
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2022-02-03 to 2023-12-08 (400 samples)
Valid: 2023-12-11 to 2024-06-25 (120 samples)
Class distribution in validation: {1.0: 64, 0.0: 56}
   âœ… Positions opened: 15/120 (12.5%)
   ğŸ” Filter rejections: threshold=48 | percentile=17 | technical=40 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=15/15 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-12-11 to 2024-06-25
      Winning trades: 4/15 (26.7% win rate)
      Losing trades: 11
      Avoided losses: 45 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000020
      Std dev: 0.007323
      Min/Max: -0.019148 / 0.072649
      Long positions: 15
  â†’ AUC: 0.3320 | AUCPR: 0.4609 | Accuracy: 0.3000 (0.4083 w/ threshold)
  â†’ Sharpe: 0.1506 (-0.1279 w/ threshold) | Max DD: -0.0683
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-08-08 to 2024-06-25 (400 samples)
Valid: 2024-06-26 to 2024-12-19 (120 samples)
Class distribution in validation: {0.0: 67, 1.0: 53}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=55 | percentile=6 | technical=14 | regime_gate=19 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.842

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-06-26 to 2024-12-19
      Winning trades: 15/26 (57.7% win rate)
      Losing trades: 11
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000220
      Std dev: 0.004073
      Min/Max: -0.018217 / 0.018006
      Long positions: 26
  â†’ AUC: 0.6174 | AUCPR: 0.5262 | Accuracy: 0.5750 (0.5917 w/ threshold)
  â†’ Sharpe: 0.8582 (-1.1664 w/ threshold) | Max DD: -0.0542
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-02-22 to 2024-12-19 (400 samples)
Valid: 2024-12-20 to 2025-08-01 (120 samples)
Class distribution in validation: {0.0: 82, 1.0: 38}
   âœ… Positions opened: 8/120 (6.7%)
   ğŸ” Filter rejections: threshold=57 | percentile=24 | technical=31 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=8/8 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.734

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-12-20 to 2025-08-01
      Winning trades: 2/8 (25.0% win rate)
      Losing trades: 6
      Avoided losses: 76 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000091
      Std dev: 0.003185
      Min/Max: -0.019251 / 0.016019
      Long positions: 8
  â†’ AUC: 0.6327 | AUCPR: 0.4251 | Accuracy: 0.4667 (0.6500 w/ threshold)
  â†’ Sharpe: -0.9923 (-0.8488 w/ threshold) | Max DD: -0.0399
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-09-25 to 2025-08-01 (400 samples)
Valid: 2025-08-04 to 2026-01-29 (98 samples)
Class distribution in validation: {1.0: 56, 0.0: 42}
   âœ… Positions opened: 12/98 (12.2%)
   ğŸ” Filter rejections: threshold=49 | percentile=32 | technical=5 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=12/12 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.954

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-08-04 to 2026-01-29
      Winning trades: 6/12 (50.0% win rate)
      Losing trades: 6
      Avoided losses: 36 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 98/98):
      Mean return: 0.000166
      Std dev: 0.005377
      Min/Max: -0.030768 / 0.030552
      Long positions: 12
  â†’ Threshold (sharpe): BUY=0.6400 | Sharpe: 0.71 | WinRate: 40.0%
  â†’ AUC: 0.3359 | AUCPR: 0.5003 | Accuracy: 0.4184 (0.4286 w/ threshold)
  â†’ Sharpe: 3.2030 (0.2557 w/ threshold) | Max DD: -0.0517
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.595245 0.743158  0.641667              0.450000  1.607961     -0.026991            1.148262   0.933333 0.177215 0.297872           0.64             NaN           sharpe                 True           0.053027    0.033309    0.625647  7.887263       0.600000           15                     15                  0.125000        0.125000                  59                           15      0.054369                         61                          12                         32                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.480486 0.536575  0.525000              0.441667  1.016981     -0.070296           -0.066099   0.520000 0.191176 0.279569           0.64             NaN           sharpe                 True           0.006542   -0.043458   -1.162567 20.000000       0.440000           25                     25                  0.208333        0.208333                  68                           25      0.030729                         52                          25                         18                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.332031 0.460901  0.300000              0.408333  0.150613     -0.068339           -0.127873   0.266667 0.062500 0.101266           0.64             NaN           sharpe                 True           0.002445   -0.022555   -0.574079 10.000000       0.200000           15                     15                  0.125000        0.125000                  72                           15      0.035264                         48                          17                         40                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.617432 0.526193  0.575000              0.591667  0.858171     -0.054189           -1.166447   0.576923 0.283019 0.379746           0.64             NaN           sharpe                 True          -0.026386   -0.043236   -1.674362  6.739847       0.384615           26                     26                  0.216667        0.216667                  65                           26      0.031414                         55                           6                         14                           19                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.632702 0.425088  0.466667              0.650000 -0.992259     -0.039915           -0.848813   0.250000 0.052632 0.086956           0.61             NaN           sharpe                 True          -0.010913   -0.018251   -1.142576  2.935035       0.500000            8                      8                  0.066667        0.066667                  63                            8      0.073816                         57                          24                         31                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.335884 0.500310  0.418367              0.428571  3.203028     -0.051707            0.255686   0.500000 0.107143 0.176470           0.64             NaN           sharpe                 True           0.016265    0.001958   -0.177601  5.722581       0.500000           12                     20                  0.204082        0.122449                  49                           12      0.034889                         49                          32                          5                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.4990 Â± 0.1386
AUCPR:                0.5320 Â± 0.1115
Accuracy:             0.4878 Â± 0.1210
Accuracy (threshold): 0.4950 Â± 0.1002
Sharpe Ratio:         0.9741 Â± 1.4092
Sharpe (threshold):   -0.1342 Â± 0.8219
Net Sharpe:           -0.6843 Â± 0.8251
Net Return:           -0.0154 Â± 0.0293
Turnover:             8.8808 Â± 5.9294
Trade Coverage:       0.1440 Â± 0.0576
EV Mean/Fold:         0.04341 Â± 0.01725
Coverage Ratio:       1.0000
Max Drawdown:         -0.0519 Â± 0.0166
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 799 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 799                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5441                         â•‘
â•‘ Average Accuracy: 0.5334                 â•‘
â•‘ Average Sharpe Ratio: 1.0381             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000608                      â•‘
â•‘ Accuracy Variance: 0.000496             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
distance_to_ma200    0.109079
        ema_short    0.105411
           roc_20    0.105175
         ema_long    0.096055
           ADX_14    0.094870
             macd    0.087697
            macds    0.075841
              mfi    0.070497
              atr    0.070124
    volatility_20    0.067965
  close_vix_ratio    0.060492
   price_to_sma20    0.056794
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - AAPL                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 58.4%                                              â”‚
â”‚    â€¢ Max Probability: 60.7%                                                  â”‚
â”‚    â€¢ Min Probability: 51.1%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 9.6% (High consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $264.18                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $280.54 (+6.19%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $256.00 (-3.10%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 58.4%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 264.17999267578125,
  "profit_target": 280.5402180432999,
  "stop_loss": 255.99987999202193,
  "probability": 0.5844289362430573,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.02082 | Quality=0.084 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 11
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-10-03 (400 samples)
Valid: 2022-10-04 to 2023-05-01 (120 samples)
Class distribution in validation: {1.0: 79, 0.0: 41}
   âœ… Positions opened: 15/120 (12.5%)
   ğŸ” Filter rejections: threshold=61 | percentile=11 | technical=33 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=15/15 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.986

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-10-04 to 2023-05-01
      Winning trades: 14/15 (93.3% win rate)
      Losing trades: 1
      Avoided losses: 40 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000442
      Std dev: 0.005012
      Min/Max: -0.017751 / 0.034596
      Long positions: 15
  â†’ AUC: 0.5883 | AUCPR: 0.7350 | Accuracy: 0.6417 (0.4500 w/ threshold)
  â†’ Sharpe: 1.6080 (1.1483 w/ threshold) | Max DD: -0.0270
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-30 to 2023-05-01 (400 samples)
Valid: 2023-05-02 to 2023-12-08 (120 samples)
Class distribution in validation: {1.0: 68, 0.0: 52}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=52 | percentile=19 | technical=19 | regime_gate=4 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-05-02 to 2023-12-08
      Winning trades: 12/26 (46.2% win rate)
      Losing trades: 14
      Avoided losses: 38 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000061
      Std dev: 0.004463
      Min/Max: -0.024606 / 0.015465
      Long positions: 26
  â†’ AUC: 0.4673 | AUCPR: 0.5274 | Accuracy: 0.5333 (0.4167 w/ threshold)
  â†’ Sharpe: 1.1233 (-0.0657 w/ threshold) | Max DD: -0.0706
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2022-02-03 to 2023-12-08 (400 samples)
Valid: 2023-12-11 to 2024-06-25 (120 samples)
Class distribution in validation: {1.0: 64, 0.0: 56}
   âœ… Positions opened: 14/120 (11.7%)
   ğŸ” Filter rejections: threshold=48 | percentile=18 | technical=40 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=14/14 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-12-11 to 2024-06-25
      Winning trades: 4/14 (28.6% win rate)
      Losing trades: 10
      Avoided losses: 46 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000091
      Std dev: 0.007282
      Min/Max: -0.019148 / 0.072649
      Long positions: 14
  â†’ AUC: 0.3361 | AUCPR: 0.4641 | Accuracy: 0.3250 (0.4167 w/ threshold)
  â†’ Sharpe: 0.2945 (0.0246 w/ threshold) | Max DD: -0.0604
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-08-08 to 2024-06-25 (400 samples)
Valid: 2024-06-26 to 2024-12-19 (120 samples)
Class distribution in validation: {0.0: 67, 1.0: 53}
   âœ… Positions opened: 19/120 (15.8%)
   ğŸ” Filter rejections: threshold=58 | percentile=37 | technical=6 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=19/19 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.840

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-06-26 to 2024-12-19
      Winning trades: 13/19 (68.4% win rate)
      Losing trades: 6
      Avoided losses: 61 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000448
      Std dev: 0.003649
      Min/Max: -0.018217 / 0.018006
      Long positions: 19
  â†’ Threshold (sharpe): BUY=0.6400 | Sharpe: 1.56 | WinRate: 60.0%
  â†’ AUC: 0.6080 | AUCPR: 0.5366 | Accuracy: 0.6000 (0.6167 w/ threshold)
  â†’ Sharpe: 1.6216 (1.6038 w/ threshold) | Max DD: -0.0237
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-02-22 to 2024-12-19 (400 samples)
Valid: 2024-12-20 to 2025-08-01 (120 samples)
Class distribution in validation: {0.0: 82, 1.0: 38}
   âœ… Positions opened: 8/120 (6.7%)
   ğŸ” Filter rejections: threshold=55 | percentile=25 | technical=32 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=8/8 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.734

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-12-20 to 2025-08-01
      Winning trades: 2/8 (25.0% win rate)
      Losing trades: 6
      Avoided losses: 76 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000091
      Std dev: 0.003185
      Min/Max: -0.019251 / 0.016019
      Long positions: 8
  â†’ AUC: 0.6277 | AUCPR: 0.4205 | Accuracy: 0.4583 (0.6500 w/ threshold)
  â†’ Sharpe: -1.2420 (-0.8488 w/ threshold) | Max DD: -0.0399
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-09-25 to 2025-08-01 (400 samples)
Valid: 2025-08-04 to 2026-01-29 (98 samples)
Class distribution in validation: {1.0: 56, 0.0: 42}
   âœ… Positions opened: 6/98 (6.1%)
   ğŸ” Filter rejections: threshold=77 | percentile=13 | technical=2 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=6/6 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.954

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-08-04 to 2026-01-29
      Winning trades: 2/6 (33.3% win rate)
      Losing trades: 4
      Avoided losses: 38 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 98/98):
      Mean return: -0.000226
      Std dev: 0.004116
      Min/Max: -0.030768 / 0.016751
      Long positions: 6
  â†’ Threshold (sharpe): BUY=0.6100 | Sharpe: 1.63 | WinRate: 50.0%
  â†’ AUC: 0.3710 | AUCPR: 0.5133 | Accuracy: 0.3980 (0.4082 w/ threshold)
  â†’ Sharpe: 2.1862 (-1.1760 w/ threshold) | Max DD: -0.0517
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.588299 0.734954  0.641667              0.450000  1.607961     -0.026991            1.148262   0.933333 0.177215 0.297872           0.64             NaN           sharpe                 True           0.053027    0.033309    0.625647  7.887263       0.600000           15                     15                  0.125000        0.125000                  59                           15      0.054369                         61                          11                         33                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.467336 0.527369  0.533333              0.416667  1.123333     -0.070624           -0.065695   0.461538 0.176471 0.255319           0.64             NaN           sharpe                 True           0.007307   -0.042693   -1.537765 20.000000       0.538462           26                     26                  0.216667        0.216667                  68                           26      0.030729                         52                          19                         19                            4                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.336077 0.464142  0.325000              0.416667  0.294530     -0.060418            0.024552   0.285714 0.062500 0.102564           0.64             NaN           sharpe                 True           0.010875   -0.014125   -0.425440 10.000000       0.214286           14                     14                  0.116667        0.116667                  72                           14      0.035264                         48                          18                         40                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.607998 0.536624  0.600000              0.616667  1.621557     -0.023718            1.603800   0.684210 0.245283 0.361111           0.64             NaN           sharpe                 True           0.053763    0.020110    0.390384 13.461287       0.526316           19                     25                  0.208333        0.158333                  62                           19      0.031361                         58                          37                          6                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.627728 0.420536  0.458333              0.650000 -1.242025     -0.039915           -0.848813   0.250000 0.052632 0.086956           0.61             NaN           sharpe                 True          -0.010913   -0.018251   -1.142576  2.935035       0.500000            8                      8                  0.066667        0.066667                  65                            8      0.073816                         55                          25                         32                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.370961 0.513332  0.397959              0.408163  2.186201     -0.051707           -1.176027   0.333333 0.035714 0.064516           0.61             NaN           sharpe                 True          -0.022105   -0.026874   -1.359333  1.907527       0.333333            6                     10                  0.102041        0.061224                  21                            6      0.034889                         77                          13                          2                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.4997 Â± 0.1268
AUCPR:                0.5328 Â± 0.1083
Accuracy:             0.4927 Â± 0.1214
Accuracy (threshold): 0.4930 Â± 0.1101
Sharpe Ratio:         0.9319 Â± 1.2389
Sharpe (threshold):   0.1143 Â± 1.0882
Net Sharpe:           -0.5748 Â± 0.9231
Net Return:           -0.0081 Â± 0.0290
Turnover:             9.3652 Â± 6.7739
Trade Coverage:       0.1241 Â± 0.0584
EV Mean/Fold:         0.04340 Â± 0.01726
Coverage Ratio:       1.0000
Max Drawdown:         -0.0456 Â± 0.0187
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 800 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 800                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5441                         â•‘
â•‘ Average Accuracy: 0.5334                 â•‘
â•‘ Average Sharpe Ratio: 1.0380             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000610                      â•‘
â•‘ Accuracy Variance: 0.000498             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
distance_to_ma200    0.111655
           roc_20    0.110204
        ema_short    0.101479
         ema_long    0.095172
             macd    0.092785
           ADX_14    0.085552
  close_vix_ratio    0.084132
    volatility_20    0.068969
            macds    0.066547
              mfi    0.064813
   price_to_sma20    0.062893
              atr    0.055801
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - AAPL                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 57.6%                                              â”‚
â”‚    â€¢ Max Probability: 68.6%                                                  â”‚
â”‚    â€¢ Min Probability: 42.3%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 26.3% (Low consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $264.18                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $280.54 (+6.19%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $256.00 (-3.10%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 57.6%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 264.17999267578125,
  "profit_target": 280.5402180432999,
  "stop_loss": 255.99987999202193,
  "probability": 0.5763011028369268,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.02007 | Quality=0.076 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))
Engineering features...
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                      ğŸ”§ FEATURE ENGINEERING IN PROGRESS                      â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
Processing technical indicators...

âœ… Total features created: 75


ğŸš€ Creating Advanced Feature Interactions (Optimized)...
   ğŸ“Š Adding high-impact technical ratios...
   ğŸ§  Creating selective LSTMÃ—Technical interactions...
   ğŸ”¬ Adding essential combinations...
   âœ… Total features after optimized engineering: 90

ğŸ” Analyzing feature correlations (threshold=0.98)...
   âš ï¸ Dropping 'lstm_price_5d' (corr=1.000 with 'lstm_price_10d')
   âš ï¸ Dropping 'lstm_price_10d' (corr=1.000 with 'lstm_price_20d')
   âš ï¸ Dropping 'rsi_14' (corr=1.000 with 'rsi')
   âš ï¸ Dropping 'lstm_price_20d' (corr=0.993 with 'bb_lower')
   âš ï¸ Dropping 'bb_lower' (corr=0.998 with 'bb_mid')
   âš ï¸ Dropping 'bb_mid' (corr=0.999 with 'bb_upper')
   âš ï¸ Dropping 'bb_upper' (corr=0.997 with 'KCLe_20_2')
   âš ï¸ Dropping 'KCLe_20_2' (corr=0.999 with 'KCBe_20_2')
   âš ï¸ Dropping 'KCBe_20_2' (corr=1.000 with 'KCUe_20_2')
   âš ï¸ Dropping 'KCUe_20_2' (corr=0.990 with 'sma_100')
   âš ï¸ Dropping 'sma_100' (corr=0.992 with 'high_52w')
   âš ï¸ Dropping 'high_52w' (corr=0.985 with 'ma_200')
   âš ï¸ Dropping 'roc_10' (corr=1.000 with 'price_momentum_10d')
   âœ… Removed 13 redundant features (protected 20 important ones)

ğŸ” Applying adaptive feature filtering...
   âš ï¸ Removing 8 known low-importance features:
      rsi, regime_state, regime_change, volume_roc_10, vix_change, volume_ratio, lstm_latent_2, rolling_volatility_zscore
   âœ… Features dropped successfully

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 13
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-10-11 (400 samples)
Valid: 2022-10-12 to 2023-05-23 (120 samples)
Class distribution in validation: {1.0: 98, 0.0: 22}
   âœ… Positions opened: 0/120 (0.0%)
   ğŸ” Filter rejections: threshold=64 | percentile=33 | technical=23 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=0/0 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.000
âš ï¸ Fold 1: Skipped from aggregate metrics - insufficient trades (0 < 3)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-16 to 2023-05-23 (400 samples)
Valid: 2023-05-24 to 2024-01-02 (120 samples)
Class distribution in validation: {0.0: 61, 1.0: 59}
   âœ… Positions opened: 5/120 (4.2%)
   ğŸ” Filter rejections: threshold=68 | percentile=36 | technical=11 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=5/5 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.693

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-05-24 to 2024-01-02
      Winning trades: 2/5 (40.0% win rate)
      Losing trades: 3
      Avoided losses: 58 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000079
      Std dev: 0.003286
      Min/Max: -0.026344 / 0.015470
      Long positions: 5
  â†’ Threshold (sharpe): BUY=0.6100 | Sharpe: 1.43 | WinRate: 50.0%
  â†’ AUC: 0.5392 | AUCPR: 0.5197 | Accuracy: 0.5333 (0.5000 w/ threshold)
  â†’ Sharpe: 2.0269 (-0.0026 w/ threshold) | Max DD: -0.0263
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2021-12-30 to 2024-01-02 (400 samples)
Valid: 2024-01-03 to 2024-07-25 (120 samples)
Class distribution in validation: {1.0: 78, 0.0: 42}
   âœ… Positions opened: 9/120 (7.5%)
   ğŸ” Filter rejections: threshold=89 | percentile=18 | technical=4 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=9/9 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.250

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-01-03 to 2024-07-25
      Winning trades: 4/9 (44.4% win rate)
      Losing trades: 5
      Avoided losses: 37 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000051
      Std dev: 0.002871
      Min/Max: -0.025012 / 0.009435
      Long positions: 9
  â†’ Threshold (sharpe): BUY=0.6100 | Sharpe: 0.78 | WinRate: 63.2%
  â†’ AUC: 0.3506 | AUCPR: 0.5731 | Accuracy: 0.3667 (0.3417 w/ threshold)
  â†’ Sharpe: 0.9015 (-0.7190 w/ threshold) | Max DD: -0.0382
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-07-29 to 2024-07-25 (400 samples)
Valid: 2024-07-26 to 2025-02-06 (120 samples)
Class distribution in validation: {1.0: 67, 0.0: 53}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=52 | percentile=7 | technical=19 | regime_gate=16 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.490

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-07-26 to 2025-02-06
      Winning trades: 18/26 (69.2% win rate)
      Losing trades: 8
      Avoided losses: 45 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000338
      Std dev: 0.009782
      Min/Max: -0.083160 / 0.021828
      Long positions: 26
  â†’ AUC: 0.4638 | AUCPR: 0.5265 | Accuracy: 0.5083 (0.5250 w/ threshold)
  â†’ Sharpe: -0.6822 (-0.6774 w/ threshold) | Max DD: -0.1026
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-03-03 to 2025-02-06 (400 samples)
Valid: 2025-02-07 to 2025-09-04 (120 samples)
Class distribution in validation: {0.0: 62, 1.0: 58}
   âœ… Positions opened: 21/120 (17.5%)
   ğŸ” Filter rejections: threshold=59 | percentile=17 | technical=23 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=21/21 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.781

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-02-07 to 2025-09-04
      Winning trades: 10/21 (47.6% win rate)
      Losing trades: 11
      Avoided losses: 51 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000114
      Std dev: 0.004190
      Min/Max: -0.027323 / 0.014958
      Long positions: 21
  â†’ AUC: 0.5487 | AUCPR: 0.4800 | Accuracy: 0.5833 (0.5083 w/ threshold)
  â†’ Sharpe: 1.3896 (0.1324 w/ threshold) | Max DD: -0.0321
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-10-17 to 2025-09-04 (400 samples)
Valid: 2025-09-05 to 2026-01-29 (93 samples)
Class distribution in validation: {0.0: 56, 1.0: 37}
   âœ… Positions opened: 20/93 (21.5%)
   ğŸ” Filter rejections: threshold=43 | percentile=15 | technical=15 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=20/20 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.999

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-09-05 to 2026-01-29
      Winning trades: 16/20 (80.0% win rate)
      Losing trades: 4
      Avoided losses: 52 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 93/93):
      Mean return: 0.001753
      Std dev: 0.010929
      Min/Max: -0.043764 / 0.049760
      Long positions: 20
  â†’ AUC: 0.8234 | AUCPR: 0.6845 | Accuracy: 0.6882 (0.7312 w/ threshold)
  â†’ Sharpe: 3.9034 (2.4316 w/ threshold) | Max DD: -0.0476
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 5 | Skipped: 1

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    2 0.539178 0.519720  0.533333              0.500000  2.026912     -0.026344           -0.002648   0.400000 0.033898 0.062500           0.61             NaN           sharpe                 True           0.009458   -0.007863   -0.698724  6.928403       0.600000            5                     14                  0.116667        0.041667                  52                            5      0.082710                         68                          36                         11                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.350580 0.573069  0.366667              0.341667  0.901521     -0.038160           -0.719037   0.444444 0.051282 0.091954           0.61             NaN           sharpe                 True          -0.006081   -0.009831   -0.894429  1.500000       0.555556            9                     19                  0.158333        0.075000                  31                            9      0.092605                         89                          18                          4                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.463813 0.526491  0.508333              0.525000 -0.682180     -0.102605           -0.677436   0.692308 0.268657 0.387096           0.64             NaN           sharpe                 True          -0.040569   -0.043020   -0.710083  0.980191       0.500000           26                     26                  0.216667        0.216667                  68                           26      0.094759                         52                           7                         19                           16                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.548665 0.480026  0.583333              0.508333  1.389607     -0.032075            0.132378   0.476190 0.172414 0.253164           0.64             NaN           sharpe                 True           0.013716    0.000054   -0.301468  5.464944       0.571429           21                     21                  0.175000        0.175000                  61                           21      0.080742                         59                          17                         23                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.823359 0.684534  0.688172              0.731183  3.903353     -0.047609            2.431564   0.800000 0.432432 0.561403           0.64             NaN           sharpe                 True           0.163066    0.138096    2.010917  9.987975       0.650000           20                     20                  0.215054        0.215054                  50                           20      0.050373                         43                          15                         15                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- SKIPPED FOLDS REPORT ---
Fold 1: insufficient_trades

--- AGGREGATE STATISTICS ---
AUC:                  0.5451 Â± 0.1746
AUCPR:                0.5568 Â± 0.0787
Accuracy:             0.5360 Â± 0.1171
Accuracy (threshold): 0.5212 Â± 0.1387
Sharpe Ratio:         1.5078 Â± 1.6723
Sharpe (threshold):   0.2330 Â± 1.2879
Net Sharpe:           -0.1188 Â± 1.2100
Net Return:           0.0155 Â± 0.0705
Turnover:             4.9723 Â± 3.7822
Trade Coverage:       0.1447 Â± 0.0814
EV Mean/Fold:         0.08024 Â± 0.01776
Coverage Ratio:       0.8333
Max Drawdown:         -0.0494 Â± 0.0308
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 801 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 801                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5441                         â•‘
â•‘ Average Accuracy: 0.5334                 â•‘
â•‘ Average Sharpe Ratio: 1.0386             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000609                      â•‘
â•‘ Accuracy Variance: 0.000497             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
           roc_20    0.132168
  close_vix_ratio    0.130789
              atr    0.122061
        ema_short    0.119977
         ema_long    0.094073
             macd    0.078267
    volatility_20    0.068413
distance_to_ma200    0.064838
            macds    0.059868
           ADX_14    0.051073
   price_to_sma20    0.039679
              mfi    0.038794
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - NVDA                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 5                                                     â”‚
â”‚    â€¢ Average Probability: 55.5%                                              â”‚
â”‚    â€¢ Max Probability: 59.1%                                                  â”‚
â”‚    â€¢ Min Probability: 50.9%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 8.3% (High consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $177.19                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $192.57 (+8.68%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $169.50 (-4.34%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 55.5%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 177.19000244140625,
  "profit_target": 192.5698729315299,
  "stop_loss": 169.50006719634445,
  "probability": 0.5548900127410888,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.02635 | Quality=0.055 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 13
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-10-11 (400 samples)
Valid: 2022-10-12 to 2023-05-23 (120 samples)
Class distribution in validation: {1.0: 98, 0.0: 22}
   âœ… Positions opened: 12/120 (10.0%)
   ğŸ” Filter rejections: threshold=61 | percentile=9 | technical=38 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=12/12 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-10-12 to 2023-05-23
      Winning trades: 7/12 (58.3% win rate)
      Losing trades: 5
      Avoided losses: 17 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000005
      Std dev: 0.007609
      Min/Max: -0.040851 / 0.040563
      Long positions: 12
  â†’ AUC: 0.2720 | AUCPR: 0.7266 | Accuracy: 0.4833 (0.2000 w/ threshold)
  â†’ Sharpe: 2.6448 (-0.1755 w/ threshold) | Max DD: -0.0875
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-16 to 2023-05-23 (400 samples)
Valid: 2023-05-24 to 2024-01-02 (120 samples)
Class distribution in validation: {0.0: 61, 1.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=58 | percentile=17 | technical=18 | regime_gate=1 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.728

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-05-24 to 2024-01-02
      Winning trades: 16/26 (61.5% win rate)
      Losing trades: 10
      Avoided losses: 51 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.001523
      Std dev: 0.008045
      Min/Max: -0.026344 / 0.061707
      Long positions: 26
  â†’ AUC: 0.5568 | AUCPR: 0.5444 | Accuracy: 0.5167 (0.5583 w/ threshold)
  â†’ Sharpe: 1.3222 (2.8484 w/ threshold) | Max DD: -0.0367
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2021-12-30 to 2024-01-02 (400 samples)
Valid: 2024-01-03 to 2024-07-25 (120 samples)
Class distribution in validation: {1.0: 78, 0.0: 42}
   âœ… Positions opened: 10/120 (8.3%)
   ğŸ” Filter rejections: threshold=85 | percentile=21 | technical=4 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=10/10 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.250

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-01-03 to 2024-07-25
      Winning trades: 4/10 (40.0% win rate)
      Losing trades: 6
      Avoided losses: 36 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000131
      Std dev: 0.003001
      Min/Max: -0.025012 / 0.009435
      Long positions: 10
  â†’ Threshold (sharpe): BUY=0.6100 | Sharpe: 0.83 | WinRate: 62.5%
  â†’ AUC: 0.3690 | AUCPR: 0.5802 | Accuracy: 0.4000 (0.3333 w/ threshold)
  â†’ Sharpe: 1.4597 (-1.1140 w/ threshold) | Max DD: -0.0457
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-07-29 to 2024-07-25 (400 samples)
Valid: 2024-07-26 to 2025-02-06 (120 samples)
Class distribution in validation: {1.0: 67, 0.0: 53}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=50 | percentile=26 | technical=10 | regime_gate=8 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.490

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-07-26 to 2025-02-06
      Winning trades: 18/26 (69.2% win rate)
      Losing trades: 8
      Avoided losses: 45 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000338
      Std dev: 0.009782
      Min/Max: -0.083160 / 0.021828
      Long positions: 26
  â†’ AUC: 0.4863 | AUCPR: 0.5483 | Accuracy: 0.5000 (0.5250 w/ threshold)
  â†’ Sharpe: -0.5613 (-0.6774 w/ threshold) | Max DD: -0.1026
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-03-03 to 2025-02-06 (400 samples)
Valid: 2025-02-07 to 2025-09-04 (120 samples)
Class distribution in validation: {0.0: 62, 1.0: 58}
   âœ… Positions opened: 21/120 (17.5%)
   ğŸ” Filter rejections: threshold=59 | percentile=17 | technical=23 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=21/21 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.781

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-02-07 to 2025-09-04
      Winning trades: 10/21 (47.6% win rate)
      Losing trades: 11
      Avoided losses: 51 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000114
      Std dev: 0.004190
      Min/Max: -0.027323 / 0.014958
      Long positions: 21
  â†’ AUC: 0.5435 | AUCPR: 0.4786 | Accuracy: 0.5833 (0.5083 w/ threshold)
  â†’ Sharpe: 1.3896 (0.1324 w/ threshold) | Max DD: -0.0321
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-10-17 to 2025-09-04 (400 samples)
Valid: 2025-09-05 to 2026-01-29 (93 samples)
Class distribution in validation: {0.0: 56, 1.0: 37}
   âœ… Positions opened: 19/93 (20.4%)
   ğŸ” Filter rejections: threshold=46 | percentile=14 | technical=14 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=19/19 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.999

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-09-05 to 2026-01-29
      Winning trades: 15/19 (78.9% win rate)
      Losing trades: 4
      Avoided losses: 52 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 93/93):
      Mean return: 0.001710
      Std dev: 0.010928
      Min/Max: -0.043764 / 0.049760
      Long positions: 19
  â†’ AUC: 0.8301 | AUCPR: 0.6957 | Accuracy: 0.7097 (0.7204 w/ threshold)
  â†’ Sharpe: 4.0158 (2.3684 w/ threshold) | Max DD: -0.0476
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.272032 0.726635  0.483333              0.200000  2.644838     -0.087497           -0.175526   0.583333 0.071429 0.127273           0.64             NaN           sharpe                 True          -0.000572   -0.020572   -0.528954  8.000000       0.500000           12                     12                  0.100000        0.100000                  59                           12      0.089164                         61                           9                         38                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.556821 0.544368  0.516667              0.558333  1.322164     -0.036700            2.848362   0.615385 0.271186 0.376470           0.64             NaN           sharpe                 True           0.182745    0.160892    2.479901  8.741139       0.692308           26                     26                  0.216667        0.216667                  62                           26      0.085217                         58                          17                         18                            1                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.369048 0.580182  0.400000              0.333333  1.459727     -0.045655           -1.113972   0.400000 0.051282 0.090909           0.61             NaN           sharpe                 True          -0.015747   -0.018247   -1.226652  1.000000       0.500000           10                     24                  0.200000        0.083333                  35                           10      0.092605                         85                          21                          4                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.486342 0.548275  0.500000              0.525000 -0.561283     -0.102605           -0.677436   0.692308 0.268657 0.387096           0.64             NaN           sharpe                 True          -0.040569   -0.043020   -0.710083  0.980191       0.500000           26                     26                  0.216667        0.216667                  70                           26      0.094759                         50                          26                         10                            8                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.543521 0.478648  0.583333              0.508333  1.389607     -0.032075            0.132378   0.476190 0.172414 0.253164           0.64             NaN           sharpe                 True           0.013716    0.000054   -0.301468  5.464944       0.571429           21                     21                  0.175000        0.175000                  61                           21      0.080742                         59                          17                         23                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.830116 0.695744  0.709677              0.720430  4.015823     -0.047609            2.368356   0.789474 0.405405 0.535714           0.64             NaN           sharpe                 True           0.159002    0.134032    1.948262  9.987975       0.631579           19                     19                  0.204301        0.204301                  47                           19      0.050373                         46                          14                         14                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.5096 Â± 0.1912
AUCPR:                0.5956 Â± 0.0959
Accuracy:             0.5322 Â± 0.1051
Accuracy (threshold): 0.4742 Â± 0.1825
Sharpe Ratio:         1.7118 Â± 1.5274
Sharpe (threshold):   0.5637 Â± 1.6471
Net Sharpe:           0.2768 Â± 1.5405
Net Return:           0.0355 Â± 0.0882
Turnover:             5.6957 Â± 3.9331
Trade Coverage:       0.1660 Â± 0.0598
EV Mean/Fold:         0.08214 Â± 0.01636
Coverage Ratio:       1.0000
Max Drawdown:         -0.0587 Â± 0.0291
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 802 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 802                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5440                         â•‘
â•‘ Average Accuracy: 0.5334                 â•‘
â•‘ Average Sharpe Ratio: 1.0394             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000610                      â•‘
â•‘ Accuracy Variance: 0.000497             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
  close_vix_ratio    0.125517
              atr    0.123712
        ema_short    0.117557
           roc_20    0.100196
         ema_long    0.083682
distance_to_ma200    0.080844
             macd    0.080316
    volatility_20    0.071201
            macds    0.056945
   price_to_sma20    0.055936
           ADX_14    0.053249
              mfi    0.050846
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - NVDA                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 54.8%                                              â”‚
â”‚    â€¢ Max Probability: 59.1%                                                  â”‚
â”‚    â€¢ Min Probability: 45.7%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 13.4% (Moderate consensus)                         â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $177.19                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $192.57 (+8.68%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $169.50 (-4.34%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 54.8%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 177.19000244140625,
  "profit_target": 192.5698729315299,
  "stop_loss": 169.50006719634445,
  "probability": 0.5477197964986166,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.02541 | Quality=0.048 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 13
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-10-11 (400 samples)
Valid: 2022-10-12 to 2023-05-23 (120 samples)
Class distribution in validation: {1.0: 98, 0.0: 22}
   âœ… Positions opened: 0/120 (0.0%)
   ğŸ” Filter rejections: threshold=69 | percentile=31 | technical=20 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=0/0 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.000
âš ï¸ Fold 1: Skipped from aggregate metrics - insufficient trades (0 < 3)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-16 to 2023-05-23 (400 samples)
Valid: 2023-05-24 to 2024-01-02 (120 samples)
Class distribution in validation: {0.0: 61, 1.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=59 | percentile=16 | technical=18 | regime_gate=1 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.728

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-05-24 to 2024-01-02
      Winning trades: 16/26 (61.5% win rate)
      Losing trades: 10
      Avoided losses: 51 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.001523
      Std dev: 0.008045
      Min/Max: -0.026344 / 0.061707
      Long positions: 26
  â†’ AUC: 0.5589 | AUCPR: 0.5454 | Accuracy: 0.5083 (0.5583 w/ threshold)
  â†’ Sharpe: 1.3009 (2.8484 w/ threshold) | Max DD: -0.0367
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2021-12-30 to 2024-01-02 (400 samples)
Valid: 2024-01-03 to 2024-07-25 (120 samples)
Class distribution in validation: {1.0: 78, 0.0: 42}
   âœ… Positions opened: 17/120 (14.2%)
   ğŸ” Filter rejections: threshold=67 | percentile=21 | technical=15 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=17/17 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.250

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-01-03 to 2024-07-25
      Winning trades: 6/17 (35.3% win rate)
      Losing trades: 11
      Avoided losses: 31 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000139
      Std dev: 0.003294
      Min/Max: -0.025012 / 0.010274
      Long positions: 17
  â†’ AUC: 0.4042 | AUCPR: 0.5900 | Accuracy: 0.4583 (0.3083 w/ threshold)
  â†’ Sharpe: 2.8896 (-1.0522 w/ threshold) | Max DD: -0.0541
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-07-29 to 2024-07-25 (400 samples)
Valid: 2024-07-26 to 2025-02-06 (120 samples)
Class distribution in validation: {1.0: 67, 0.0: 53}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=49 | percentile=22 | technical=11 | regime_gate=12 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.490

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-07-26 to 2025-02-06
      Winning trades: 18/26 (69.2% win rate)
      Losing trades: 8
      Avoided losses: 45 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000338
      Std dev: 0.009782
      Min/Max: -0.083160 / 0.021828
      Long positions: 26
  â†’ AUC: 0.4880 | AUCPR: 0.5402 | Accuracy: 0.5167 (0.5250 w/ threshold)
  â†’ Sharpe: -0.2802 (-0.6774 w/ threshold) | Max DD: -0.1026
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-03-03 to 2025-02-06 (400 samples)
Valid: 2025-02-07 to 2025-09-04 (120 samples)
Class distribution in validation: {0.0: 62, 1.0: 58}
   âœ… Positions opened: 21/120 (17.5%)
   ğŸ” Filter rejections: threshold=59 | percentile=17 | technical=23 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=21/21 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.781

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-02-07 to 2025-09-04
      Winning trades: 10/21 (47.6% win rate)
      Losing trades: 11
      Avoided losses: 51 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000114
      Std dev: 0.004190
      Min/Max: -0.027323 / 0.014958
      Long positions: 21
  â†’ AUC: 0.5455 | AUCPR: 0.4794 | Accuracy: 0.5833 (0.5083 w/ threshold)
  â†’ Sharpe: 1.3896 (0.1324 w/ threshold) | Max DD: -0.0321
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-10-17 to 2025-09-04 (400 samples)
Valid: 2025-09-05 to 2026-01-29 (93 samples)
Class distribution in validation: {0.0: 56, 1.0: 37}
   âœ… Positions opened: 20/93 (21.5%)
   ğŸ” Filter rejections: threshold=40 | percentile=18 | technical=15 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=20/20 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.999

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-09-05 to 2026-01-29
      Winning trades: 16/20 (80.0% win rate)
      Losing trades: 4
      Avoided losses: 52 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 93/93):
      Mean return: 0.001753
      Std dev: 0.010929
      Min/Max: -0.043764 / 0.049760
      Long positions: 20
  â†’ AUC: 0.8224 | AUCPR: 0.6842 | Accuracy: 0.6882 (0.7312 w/ threshold)
  â†’ Sharpe: 3.9034 (2.4316 w/ threshold) | Max DD: -0.0476
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 5 | Skipped: 1

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    2 0.558905 0.545389  0.508333              0.558333  1.300856     -0.036700            2.848362   0.615385 0.271186 0.376470           0.64             NaN           sharpe                 True           0.182745    0.160892    2.479901  8.741139       0.692308           26                     26                  0.216667        0.216667                  61                           26      0.085217                         59                          16                         18                            1                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.404151 0.589963  0.458333              0.308333  2.889561     -0.054112           -1.052159   0.352941 0.076923 0.126315           0.64             NaN           sharpe                 True          -0.016679   -0.021679   -1.253270  2.000000       0.470588           17                     17                  0.141667        0.141667                  53                           17      0.092605                         67                          21                         15                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.488032 0.540228  0.516667              0.525000 -0.280160     -0.102605           -0.677436   0.692308 0.268657 0.387096           0.64             NaN           sharpe                 True          -0.040569   -0.043020   -0.710083  0.980191       0.500000           26                     26                  0.216667        0.216667                  71                           26      0.094759                         49                          22                         11                           12                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.545467 0.479388  0.583333              0.508333  1.389607     -0.032075            0.132378   0.476190 0.172414 0.253164           0.64             NaN           sharpe                 True           0.013716    0.000054   -0.301468  5.464944       0.571429           21                     21                  0.175000        0.175000                  61                           21      0.080742                         59                          17                         23                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.822394 0.684166  0.688172              0.731183  3.903353     -0.047609            2.431564   0.800000 0.432432 0.561403           0.64             NaN           sharpe                 True           0.163066    0.138096    2.010917  9.987975       0.650000           20                     20                  0.215054        0.215054                  53                           20      0.050373                         40                          18                         15                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- SKIPPED FOLDS REPORT ---
Fold 1: insufficient_trades

--- AGGREGATE STATISTICS ---
AUC:                  0.5638 Â± 0.1569
AUCPR:                0.5678 Â± 0.0760
Accuracy:             0.5510 Â± 0.0887
Accuracy (threshold): 0.5262 Â± 0.1507
Sharpe Ratio:         1.8406 Â± 1.6084
Sharpe (threshold):   0.7365 Â± 1.7956
Net Sharpe:           0.4452 Â± 1.6859
Net Return:           0.0469 Â± 0.0953
Turnover:             5.4348 Â± 3.9782
Trade Coverage:       0.1930 Â± 0.0338
EV Mean/Fold:         0.08074 Â± 0.01789
Coverage Ratio:       0.8333
Max Drawdown:         -0.0546 Â± 0.0282
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 803 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 803                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5440                         â•‘
â•‘ Average Accuracy: 0.5334                 â•‘
â•‘ Average Sharpe Ratio: 1.0404             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000609                      â•‘
â•‘ Accuracy Variance: 0.000496             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
  close_vix_ratio    0.136077
        ema_short    0.122475
           roc_20    0.119206
              atr    0.110158
             macd    0.087276
         ema_long    0.080214
distance_to_ma200    0.076619
    volatility_20    0.069650
            macds    0.062816
           ADX_14    0.056173
              mfi    0.043912
   price_to_sma20    0.035424
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - NVDA                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 5                                                     â”‚
â”‚    â€¢ Average Probability: 57.0%                                              â”‚
â”‚    â€¢ Max Probability: 59.3%                                                  â”‚
â”‚    â€¢ Min Probability: 51.3%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 7.9% (High consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $177.19                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $192.57 (+8.68%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $169.50 (-4.34%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 57.0%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 177.19000244140625,
  "profit_target": 192.5698729315299,
  "stop_loss": 169.50006719634445,
  "probability": 0.5695225238800049,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.02825 | Quality=0.070 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))
Engineering features...
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                      ğŸ”§ FEATURE ENGINEERING IN PROGRESS                      â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
Processing technical indicators...

âœ… Total features created: 95


ğŸš€ Creating Advanced Feature Interactions (Optimized)...
   â™»ï¸ Dropped redundant seq-equivalent features: tcn_price_5d, tcn_price_10d, tcn_price_20d, tcn_return_5d, tcn_return_10d, tcn_return_20d...
   ğŸ“Š Adding high-impact technical ratios...
   ğŸ§  Creating selective LSTMÃ—Technical interactions...
   ğŸ”¬ Adding essential combinations...
   âœ… Total features after optimized engineering: 100

ğŸ” Analyzing feature correlations (threshold=0.98)...
   âš ï¸ Dropping 'lstm_price_5d' (corr=0.988 with 'lstm_price_10d')
   âš ï¸ Dropping 'lstm_price_10d' (corr=0.994 with 'lstm_price_20d')
   âš ï¸ Dropping 'tcn_latent_2' (corr=1.000 with 'lstm_latent_2')
   âš ï¸ Dropping 'tcn_latent_8' (corr=1.000 with 'lstm_latent_8')
   âš ï¸ Dropping 'rsi_14' (corr=1.000 with 'rsi')
   âš ï¸ Dropping 'lstm_price_20d' (corr=0.990 with 'bb_lower')
   âš ï¸ Dropping 'bb_lower' (corr=0.998 with 'bb_mid')
   âš ï¸ Dropping 'bb_mid' (corr=0.999 with 'bb_upper')
   âš ï¸ Dropping 'bb_upper' (corr=0.997 with 'KCLe_20_2')
   âš ï¸ Dropping 'KCLe_20_2' (corr=0.999 with 'KCBe_20_2')
   âš ï¸ Dropping 'KCBe_20_2' (corr=1.000 with 'KCUe_20_2')
   âš ï¸ Dropping 'KCUe_20_2' (corr=0.990 with 'sma_100')
   âš ï¸ Dropping 'sma_100' (corr=0.992 with 'high_52w')
   âš ï¸ Dropping 'high_52w' (corr=0.985 with 'ma_200')
   âš ï¸ Dropping 'roc_10' (corr=1.000 with 'price_momentum_10d')
   âœ… Removed 15 redundant features (protected 20 important ones)

ğŸ” Applying adaptive feature filtering...
   âš ï¸ Removing 8 known low-importance features:
      lstm_latent_2, vix_change, regime_state, volume_roc_10, rsi, rolling_volatility_zscore, volume_ratio, regime_change
   âœ… Features dropped successfully

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 15
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-10-11 (400 samples)
Valid: 2022-10-12 to 2023-05-23 (120 samples)
Class distribution in validation: {1.0: 98, 0.0: 22}
   âœ… Positions opened: 0/120 (0.0%)
   ğŸ” Filter rejections: threshold=64 | percentile=33 | technical=23 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=0/0 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.000
âš ï¸ Fold 1: Skipped from aggregate metrics - insufficient trades (0 < 3)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-16 to 2023-05-23 (400 samples)
Valid: 2023-05-24 to 2024-01-02 (120 samples)
Class distribution in validation: {0.0: 61, 1.0: 59}
   âœ… Positions opened: 5/120 (4.2%)
   ğŸ” Filter rejections: threshold=68 | percentile=36 | technical=11 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=5/5 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.693

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-05-24 to 2024-01-02
      Winning trades: 2/5 (40.0% win rate)
      Losing trades: 3
      Avoided losses: 58 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000079
      Std dev: 0.003286
      Min/Max: -0.026344 / 0.015470
      Long positions: 5
  â†’ Threshold (sharpe): BUY=0.6100 | Sharpe: 1.43 | WinRate: 50.0%
  â†’ AUC: 0.5392 | AUCPR: 0.5197 | Accuracy: 0.5333 (0.5000 w/ threshold)
  â†’ Sharpe: 2.0269 (-0.0026 w/ threshold) | Max DD: -0.0263
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2021-12-30 to 2024-01-02 (400 samples)
Valid: 2024-01-03 to 2024-07-25 (120 samples)
Class distribution in validation: {1.0: 78, 0.0: 42}
   âœ… Positions opened: 9/120 (7.5%)
   ğŸ” Filter rejections: threshold=89 | percentile=18 | technical=4 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=9/9 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.250

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-01-03 to 2024-07-25
      Winning trades: 4/9 (44.4% win rate)
      Losing trades: 5
      Avoided losses: 37 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000051
      Std dev: 0.002871
      Min/Max: -0.025012 / 0.009435
      Long positions: 9
  â†’ Threshold (sharpe): BUY=0.6100 | Sharpe: 0.78 | WinRate: 63.2%
  â†’ AUC: 0.3506 | AUCPR: 0.5731 | Accuracy: 0.3667 (0.3417 w/ threshold)
  â†’ Sharpe: 0.9015 (-0.7190 w/ threshold) | Max DD: -0.0382
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-07-29 to 2024-07-25 (400 samples)
Valid: 2024-07-26 to 2025-02-06 (120 samples)
Class distribution in validation: {1.0: 67, 0.0: 53}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=52 | percentile=7 | technical=19 | regime_gate=16 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.490

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-07-26 to 2025-02-06
      Winning trades: 18/26 (69.2% win rate)
      Losing trades: 8
      Avoided losses: 45 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000338
      Std dev: 0.009782
      Min/Max: -0.083160 / 0.021828
      Long positions: 26
  â†’ AUC: 0.4638 | AUCPR: 0.5265 | Accuracy: 0.5083 (0.5250 w/ threshold)
  â†’ Sharpe: -0.6822 (-0.6774 w/ threshold) | Max DD: -0.1026
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-03-03 to 2025-02-06 (400 samples)
Valid: 2025-02-07 to 2025-09-04 (120 samples)
Class distribution in validation: {0.0: 62, 1.0: 58}
   âœ… Positions opened: 21/120 (17.5%)
   ğŸ” Filter rejections: threshold=59 | percentile=17 | technical=23 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=21/21 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.781

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-02-07 to 2025-09-04
      Winning trades: 10/21 (47.6% win rate)
      Losing trades: 11
      Avoided losses: 51 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000114
      Std dev: 0.004190
      Min/Max: -0.027323 / 0.014958
      Long positions: 21
  â†’ AUC: 0.5487 | AUCPR: 0.4800 | Accuracy: 0.5833 (0.5083 w/ threshold)
  â†’ Sharpe: 1.3896 (0.1324 w/ threshold) | Max DD: -0.0321
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-10-17 to 2025-09-04 (400 samples)
Valid: 2025-09-05 to 2026-01-29 (93 samples)
Class distribution in validation: {0.0: 56, 1.0: 37}
   âœ… Positions opened: 20/93 (21.5%)
   ğŸ” Filter rejections: threshold=43 | percentile=15 | technical=15 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=20/20 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.999

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-09-05 to 2026-01-29
      Winning trades: 16/20 (80.0% win rate)
      Losing trades: 4
      Avoided losses: 52 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 93/93):
      Mean return: 0.001753
      Std dev: 0.010929
      Min/Max: -0.043764 / 0.049760
      Long positions: 20
  â†’ AUC: 0.8234 | AUCPR: 0.6845 | Accuracy: 0.6882 (0.7312 w/ threshold)
  â†’ Sharpe: 3.9034 (2.4316 w/ threshold) | Max DD: -0.0476
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 5 | Skipped: 1

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    2 0.539178 0.519720  0.533333              0.500000  2.026912     -0.026344           -0.002648   0.400000 0.033898 0.062500           0.61             NaN           sharpe                 True           0.009458   -0.007863   -0.698724  6.928403       0.600000            5                     14                  0.116667        0.041667                  52                            5      0.082710                         68                          36                         11                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.350580 0.573069  0.366667              0.341667  0.901521     -0.038160           -0.719037   0.444444 0.051282 0.091954           0.61             NaN           sharpe                 True          -0.006081   -0.009831   -0.894429  1.500000       0.555556            9                     19                  0.158333        0.075000                  31                            9      0.092605                         89                          18                          4                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.463813 0.526491  0.508333              0.525000 -0.682180     -0.102605           -0.677436   0.692308 0.268657 0.387096           0.64             NaN           sharpe                 True          -0.040569   -0.043020   -0.710083  0.980191       0.500000           26                     26                  0.216667        0.216667                  68                           26      0.094759                         52                           7                         19                           16                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.548665 0.480026  0.583333              0.508333  1.389607     -0.032075            0.132378   0.476190 0.172414 0.253164           0.64             NaN           sharpe                 True           0.013716    0.000054   -0.301468  5.464944       0.571429           21                     21                  0.175000        0.175000                  61                           21      0.080742                         59                          17                         23                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.823359 0.684534  0.688172              0.731183  3.903353     -0.047609            2.431564   0.800000 0.432432 0.561403           0.64             NaN           sharpe                 True           0.163066    0.138096    2.010917  9.987975       0.650000           20                     20                  0.215054        0.215054                  50                           20      0.050373                         43                          15                         15                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- SKIPPED FOLDS REPORT ---
Fold 1: insufficient_trades

--- AGGREGATE STATISTICS ---
AUC:                  0.5451 Â± 0.1746
AUCPR:                0.5568 Â± 0.0787
Accuracy:             0.5360 Â± 0.1171
Accuracy (threshold): 0.5212 Â± 0.1387
Sharpe Ratio:         1.5078 Â± 1.6723
Sharpe (threshold):   0.2330 Â± 1.2879
Net Sharpe:           -0.1188 Â± 1.2100
Net Return:           0.0155 Â± 0.0705
Turnover:             4.9723 Â± 3.7822
Trade Coverage:       0.1447 Â± 0.0814
EV Mean/Fold:         0.08024 Â± 0.01776
Coverage Ratio:       0.8333
Max Drawdown:         -0.0494 Â± 0.0308
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 804 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 804                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5440                         â•‘
â•‘ Average Accuracy: 0.5334                 â•‘
â•‘ Average Sharpe Ratio: 1.0410             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000609                      â•‘
â•‘ Accuracy Variance: 0.000496             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
           roc_20    0.132168
  close_vix_ratio    0.130789
              atr    0.122061
        ema_short    0.119977
         ema_long    0.094073
             macd    0.078267
    volatility_20    0.068413
distance_to_ma200    0.064838
            macds    0.059868
           ADX_14    0.051073
   price_to_sma20    0.039679
              mfi    0.038794
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - NVDA                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 5                                                     â”‚
â”‚    â€¢ Average Probability: 55.5%                                              â”‚
â”‚    â€¢ Max Probability: 59.1%                                                  â”‚
â”‚    â€¢ Min Probability: 50.9%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 8.3% (High consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $177.19                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $192.57 (+8.68%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $169.50 (-4.34%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 55.5%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 177.19000244140625,
  "profit_target": 192.5698729315299,
  "stop_loss": 169.50006719634445,
  "probability": 0.5548900127410888,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.02635 | Quality=0.055 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 15
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-10-11 (400 samples)
Valid: 2022-10-12 to 2023-05-23 (120 samples)
Class distribution in validation: {1.0: 98, 0.0: 22}
   âœ… Positions opened: 12/120 (10.0%)
   ğŸ” Filter rejections: threshold=61 | percentile=9 | technical=38 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=12/12 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-10-12 to 2023-05-23
      Winning trades: 7/12 (58.3% win rate)
      Losing trades: 5
      Avoided losses: 17 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000005
      Std dev: 0.007609
      Min/Max: -0.040851 / 0.040563
      Long positions: 12
  â†’ AUC: 0.2720 | AUCPR: 0.7266 | Accuracy: 0.4833 (0.2000 w/ threshold)
  â†’ Sharpe: 2.6448 (-0.1755 w/ threshold) | Max DD: -0.0875
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-16 to 2023-05-23 (400 samples)
Valid: 2023-05-24 to 2024-01-02 (120 samples)
Class distribution in validation: {0.0: 61, 1.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=58 | percentile=17 | technical=18 | regime_gate=1 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.728

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-05-24 to 2024-01-02
      Winning trades: 16/26 (61.5% win rate)
      Losing trades: 10
      Avoided losses: 51 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.001523
      Std dev: 0.008045
      Min/Max: -0.026344 / 0.061707
      Long positions: 26
  â†’ AUC: 0.5568 | AUCPR: 0.5444 | Accuracy: 0.5167 (0.5583 w/ threshold)
  â†’ Sharpe: 1.3222 (2.8484 w/ threshold) | Max DD: -0.0367
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2021-12-30 to 2024-01-02 (400 samples)
Valid: 2024-01-03 to 2024-07-25 (120 samples)
Class distribution in validation: {1.0: 78, 0.0: 42}
   âœ… Positions opened: 10/120 (8.3%)
   ğŸ” Filter rejections: threshold=85 | percentile=21 | technical=4 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=10/10 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.250

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-01-03 to 2024-07-25
      Winning trades: 4/10 (40.0% win rate)
      Losing trades: 6
      Avoided losses: 36 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000131
      Std dev: 0.003001
      Min/Max: -0.025012 / 0.009435
      Long positions: 10
  â†’ Threshold (sharpe): BUY=0.6100 | Sharpe: 0.83 | WinRate: 62.5%
  â†’ AUC: 0.3690 | AUCPR: 0.5802 | Accuracy: 0.4000 (0.3333 w/ threshold)
  â†’ Sharpe: 1.4597 (-1.1140 w/ threshold) | Max DD: -0.0457
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-07-29 to 2024-07-25 (400 samples)
Valid: 2024-07-26 to 2025-02-06 (120 samples)
Class distribution in validation: {1.0: 67, 0.0: 53}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=50 | percentile=26 | technical=10 | regime_gate=8 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.490

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-07-26 to 2025-02-06
      Winning trades: 18/26 (69.2% win rate)
      Losing trades: 8
      Avoided losses: 45 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000338
      Std dev: 0.009782
      Min/Max: -0.083160 / 0.021828
      Long positions: 26
  â†’ AUC: 0.4863 | AUCPR: 0.5483 | Accuracy: 0.5000 (0.5250 w/ threshold)
  â†’ Sharpe: -0.5613 (-0.6774 w/ threshold) | Max DD: -0.1026
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-03-03 to 2025-02-06 (400 samples)
Valid: 2025-02-07 to 2025-09-04 (120 samples)
Class distribution in validation: {0.0: 62, 1.0: 58}
   âœ… Positions opened: 21/120 (17.5%)
   ğŸ” Filter rejections: threshold=59 | percentile=17 | technical=23 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=21/21 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.781

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-02-07 to 2025-09-04
      Winning trades: 10/21 (47.6% win rate)
      Losing trades: 11
      Avoided losses: 51 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000114
      Std dev: 0.004190
      Min/Max: -0.027323 / 0.014958
      Long positions: 21
  â†’ AUC: 0.5435 | AUCPR: 0.4786 | Accuracy: 0.5833 (0.5083 w/ threshold)
  â†’ Sharpe: 1.3896 (0.1324 w/ threshold) | Max DD: -0.0321
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-10-17 to 2025-09-04 (400 samples)
Valid: 2025-09-05 to 2026-01-29 (93 samples)
Class distribution in validation: {0.0: 56, 1.0: 37}
   âœ… Positions opened: 19/93 (20.4%)
   ğŸ” Filter rejections: threshold=46 | percentile=14 | technical=14 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=19/19 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.999

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-09-05 to 2026-01-29
      Winning trades: 15/19 (78.9% win rate)
      Losing trades: 4
      Avoided losses: 52 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 93/93):
      Mean return: 0.001710
      Std dev: 0.010928
      Min/Max: -0.043764 / 0.049760
      Long positions: 19
  â†’ AUC: 0.8301 | AUCPR: 0.6957 | Accuracy: 0.7097 (0.7204 w/ threshold)
  â†’ Sharpe: 4.0158 (2.3684 w/ threshold) | Max DD: -0.0476
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.272032 0.726635  0.483333              0.200000  2.644838     -0.087497           -0.175526   0.583333 0.071429 0.127273           0.64             NaN           sharpe                 True          -0.000572   -0.020572   -0.528954  8.000000       0.500000           12                     12                  0.100000        0.100000                  59                           12      0.089164                         61                           9                         38                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.556821 0.544368  0.516667              0.558333  1.322164     -0.036700            2.848362   0.615385 0.271186 0.376470           0.64             NaN           sharpe                 True           0.182745    0.160892    2.479901  8.741139       0.692308           26                     26                  0.216667        0.216667                  62                           26      0.085217                         58                          17                         18                            1                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.369048 0.580182  0.400000              0.333333  1.459727     -0.045655           -1.113972   0.400000 0.051282 0.090909           0.61             NaN           sharpe                 True          -0.015747   -0.018247   -1.226652  1.000000       0.500000           10                     24                  0.200000        0.083333                  35                           10      0.092605                         85                          21                          4                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.486342 0.548275  0.500000              0.525000 -0.561283     -0.102605           -0.677436   0.692308 0.268657 0.387096           0.64             NaN           sharpe                 True          -0.040569   -0.043020   -0.710083  0.980191       0.500000           26                     26                  0.216667        0.216667                  70                           26      0.094759                         50                          26                         10                            8                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.543521 0.478648  0.583333              0.508333  1.389607     -0.032075            0.132378   0.476190 0.172414 0.253164           0.64             NaN           sharpe                 True           0.013716    0.000054   -0.301468  5.464944       0.571429           21                     21                  0.175000        0.175000                  61                           21      0.080742                         59                          17                         23                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.830116 0.695744  0.709677              0.720430  4.015823     -0.047609            2.368356   0.789474 0.405405 0.535714           0.64             NaN           sharpe                 True           0.159002    0.134032    1.948262  9.987975       0.631579           19                     19                  0.204301        0.204301                  47                           19      0.050373                         46                          14                         14                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.5096 Â± 0.1912
AUCPR:                0.5956 Â± 0.0959
Accuracy:             0.5322 Â± 0.1051
Accuracy (threshold): 0.4742 Â± 0.1825
Sharpe Ratio:         1.7118 Â± 1.5274
Sharpe (threshold):   0.5637 Â± 1.6471
Net Sharpe:           0.2768 Â± 1.5405
Net Return:           0.0355 Â± 0.0882
Turnover:             5.6957 Â± 3.9331
Trade Coverage:       0.1660 Â± 0.0598
EV Mean/Fold:         0.08214 Â± 0.01636
Coverage Ratio:       1.0000
Max Drawdown:         -0.0587 Â± 0.0291
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 805 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 805                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5440                         â•‘
â•‘ Average Accuracy: 0.5334                 â•‘
â•‘ Average Sharpe Ratio: 1.0419             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000609                      â•‘
â•‘ Accuracy Variance: 0.000495             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
  close_vix_ratio    0.125517
              atr    0.123712
        ema_short    0.117557
           roc_20    0.100196
         ema_long    0.083682
distance_to_ma200    0.080844
             macd    0.080316
    volatility_20    0.071201
            macds    0.056945
   price_to_sma20    0.055936
           ADX_14    0.053249
              mfi    0.050846
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - NVDA                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 54.8%                                              â”‚
â”‚    â€¢ Max Probability: 59.1%                                                  â”‚
â”‚    â€¢ Min Probability: 45.7%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 13.4% (Moderate consensus)                         â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $177.19                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $192.57 (+8.68%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $169.50 (-4.34%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 54.8%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 177.19000244140625,
  "profit_target": 192.5698729315299,
  "stop_loss": 169.50006719634445,
  "probability": 0.5477197964986166,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.02541 | Quality=0.048 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 15
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-10-11 (400 samples)
Valid: 2022-10-12 to 2023-05-23 (120 samples)
Class distribution in validation: {1.0: 98, 0.0: 22}
   âœ… Positions opened: 0/120 (0.0%)
   ğŸ” Filter rejections: threshold=69 | percentile=31 | technical=20 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=0/0 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.000
âš ï¸ Fold 1: Skipped from aggregate metrics - insufficient trades (0 < 3)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-16 to 2023-05-23 (400 samples)
Valid: 2023-05-24 to 2024-01-02 (120 samples)
Class distribution in validation: {0.0: 61, 1.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=59 | percentile=16 | technical=18 | regime_gate=1 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.728

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-05-24 to 2024-01-02
      Winning trades: 16/26 (61.5% win rate)
      Losing trades: 10
      Avoided losses: 51 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.001523
      Std dev: 0.008045
      Min/Max: -0.026344 / 0.061707
      Long positions: 26
  â†’ AUC: 0.5589 | AUCPR: 0.5454 | Accuracy: 0.5083 (0.5583 w/ threshold)
  â†’ Sharpe: 1.3009 (2.8484 w/ threshold) | Max DD: -0.0367
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2021-12-30 to 2024-01-02 (400 samples)
Valid: 2024-01-03 to 2024-07-25 (120 samples)
Class distribution in validation: {1.0: 78, 0.0: 42}
   âœ… Positions opened: 17/120 (14.2%)
   ğŸ” Filter rejections: threshold=67 | percentile=21 | technical=15 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=17/17 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.250

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-01-03 to 2024-07-25
      Winning trades: 6/17 (35.3% win rate)
      Losing trades: 11
      Avoided losses: 31 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000139
      Std dev: 0.003294
      Min/Max: -0.025012 / 0.010274
      Long positions: 17
  â†’ AUC: 0.4042 | AUCPR: 0.5900 | Accuracy: 0.4583 (0.3083 w/ threshold)
  â†’ Sharpe: 2.8896 (-1.0522 w/ threshold) | Max DD: -0.0541
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-07-29 to 2024-07-25 (400 samples)
Valid: 2024-07-26 to 2025-02-06 (120 samples)
Class distribution in validation: {1.0: 67, 0.0: 53}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=49 | percentile=22 | technical=11 | regime_gate=12 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.490

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-07-26 to 2025-02-06
      Winning trades: 18/26 (69.2% win rate)
      Losing trades: 8
      Avoided losses: 45 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000338
      Std dev: 0.009782
      Min/Max: -0.083160 / 0.021828
      Long positions: 26
  â†’ AUC: 0.4880 | AUCPR: 0.5402 | Accuracy: 0.5167 (0.5250 w/ threshold)
  â†’ Sharpe: -0.2802 (-0.6774 w/ threshold) | Max DD: -0.1026
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-03-03 to 2025-02-06 (400 samples)
Valid: 2025-02-07 to 2025-09-04 (120 samples)
Class distribution in validation: {0.0: 62, 1.0: 58}
   âœ… Positions opened: 21/120 (17.5%)
   ğŸ” Filter rejections: threshold=59 | percentile=17 | technical=23 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=21/21 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.781

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-02-07 to 2025-09-04
      Winning trades: 10/21 (47.6% win rate)
      Losing trades: 11
      Avoided losses: 51 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000114
      Std dev: 0.004190
      Min/Max: -0.027323 / 0.014958
      Long positions: 21
  â†’ AUC: 0.5455 | AUCPR: 0.4794 | Accuracy: 0.5833 (0.5083 w/ threshold)
  â†’ Sharpe: 1.3896 (0.1324 w/ threshold) | Max DD: -0.0321
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-10-17 to 2025-09-04 (400 samples)
Valid: 2025-09-05 to 2026-01-29 (93 samples)
Class distribution in validation: {0.0: 56, 1.0: 37}
   âœ… Positions opened: 20/93 (21.5%)
   ğŸ” Filter rejections: threshold=40 | percentile=18 | technical=15 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=20/20 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.999

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-09-05 to 2026-01-29
      Winning trades: 16/20 (80.0% win rate)
      Losing trades: 4
      Avoided losses: 52 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 93/93):
      Mean return: 0.001753
      Std dev: 0.010929
      Min/Max: -0.043764 / 0.049760
      Long positions: 20
  â†’ AUC: 0.8224 | AUCPR: 0.6842 | Accuracy: 0.6882 (0.7312 w/ threshold)
  â†’ Sharpe: 3.9034 (2.4316 w/ threshold) | Max DD: -0.0476
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 5 | Skipped: 1

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    2 0.558905 0.545389  0.508333              0.558333  1.300856     -0.036700            2.848362   0.615385 0.271186 0.376470           0.64             NaN           sharpe                 True           0.182745    0.160892    2.479901  8.741139       0.692308           26                     26                  0.216667        0.216667                  61                           26      0.085217                         59                          16                         18                            1                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.404151 0.589963  0.458333              0.308333  2.889561     -0.054112           -1.052159   0.352941 0.076923 0.126315           0.64             NaN           sharpe                 True          -0.016679   -0.021679   -1.253270  2.000000       0.470588           17                     17                  0.141667        0.141667                  53                           17      0.092605                         67                          21                         15                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.488032 0.540228  0.516667              0.525000 -0.280160     -0.102605           -0.677436   0.692308 0.268657 0.387096           0.64             NaN           sharpe                 True          -0.040569   -0.043020   -0.710083  0.980191       0.500000           26                     26                  0.216667        0.216667                  71                           26      0.094759                         49                          22                         11                           12                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.545467 0.479388  0.583333              0.508333  1.389607     -0.032075            0.132378   0.476190 0.172414 0.253164           0.64             NaN           sharpe                 True           0.013716    0.000054   -0.301468  5.464944       0.571429           21                     21                  0.175000        0.175000                  61                           21      0.080742                         59                          17                         23                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.822394 0.684166  0.688172              0.731183  3.903353     -0.047609            2.431564   0.800000 0.432432 0.561403           0.64             NaN           sharpe                 True           0.163066    0.138096    2.010917  9.987975       0.650000           20                     20                  0.215054        0.215054                  53                           20      0.050373                         40                          18                         15                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- SKIPPED FOLDS REPORT ---
Fold 1: insufficient_trades

--- AGGREGATE STATISTICS ---
AUC:                  0.5638 Â± 0.1569
AUCPR:                0.5678 Â± 0.0760
Accuracy:             0.5510 Â± 0.0887
Accuracy (threshold): 0.5262 Â± 0.1507
Sharpe Ratio:         1.8406 Â± 1.6084
Sharpe (threshold):   0.7365 Â± 1.7956
Net Sharpe:           0.4452 Â± 1.6859
Net Return:           0.0469 Â± 0.0953
Turnover:             5.4348 Â± 3.9782
Trade Coverage:       0.1930 Â± 0.0338
EV Mean/Fold:         0.08074 Â± 0.01789
Coverage Ratio:       0.8333
Max Drawdown:         -0.0546 Â± 0.0282
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 806 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 806                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5440                         â•‘
â•‘ Average Accuracy: 0.5334                 â•‘
â•‘ Average Sharpe Ratio: 1.0428             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000609                      â•‘
â•‘ Accuracy Variance: 0.000495             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
  close_vix_ratio    0.136077
        ema_short    0.122475
           roc_20    0.119206
              atr    0.110158
             macd    0.087276
         ema_long    0.080214
distance_to_ma200    0.076619
    volatility_20    0.069650
            macds    0.062816
           ADX_14    0.056173
              mfi    0.043912
   price_to_sma20    0.035424
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - NVDA                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 5                                                     â”‚
â”‚    â€¢ Average Probability: 57.0%                                              â”‚
â”‚    â€¢ Max Probability: 59.3%                                                  â”‚
â”‚    â€¢ Min Probability: 51.3%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 7.9% (High consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $177.19                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $192.57 (+8.68%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $169.50 (-4.34%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 57.0%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 177.19000244140625,
  "profit_target": 192.5698729315299,
  "stop_loss": 169.50006719634445,
  "probability": 0.5695225238800049,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.02825 | Quality=0.070 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 13
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-09-15 (400 samples)
Valid: 2022-09-16 to 2023-03-29 (120 samples)
Class distribution in validation: {1.0: 64, 0.0: 56}
   âœ… Positions opened: 3/120 (2.5%)
   ğŸ” Filter rejections: threshold=55 | percentile=17 | technical=45 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=3/3 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.919

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-09-16 to 2023-03-29
      Winning trades: 3/3 (100.0% win rate)
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000234
      Std dev: 0.002964
      Min/Max: -0.013206 / 0.024858
      Long positions: 3
  â†’ AUC: 0.5130 | AUCPR: 0.5354 | Accuracy: 0.5583 (0.4917 w/ threshold)
  â†’ Sharpe: 0.7262 (0.8262 w/ threshold) | Max DD: -0.0132
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-18 to 2023-03-29 (400 samples)
Valid: 2023-03-30 to 2023-10-10 (120 samples)
Class distribution in validation: {1.0: 77, 0.0: 43}
   âœ… Positions opened: 16/120 (13.3%)
   ğŸ” Filter rejections: threshold=63 | percentile=36 | technical=5 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=16/16 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-03-30 to 2023-10-10
      Winning trades: 9/16 (56.2% win rate)
      Losing trades: 7
      Avoided losses: 36 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000513
      Std dev: 0.008005
      Min/Max: -0.021498 / 0.072435
      Long positions: 16
  â†’ Threshold (sharpe): BUY=0.6400 | Sharpe: 0.90 | WinRate: 52.4%
  â†’ AUC: 0.3428 | AUCPR: 0.5863 | Accuracy: 0.4083 (0.3750 w/ threshold)
  â†’ Sharpe: 1.7305 (0.8606 w/ threshold) | Max DD: -0.0282
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2022-01-11 to 2023-10-10 (400 samples)
Valid: 2023-10-11 to 2024-05-16 (120 samples)
Class distribution in validation: {1.0: 61, 0.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=63 | percentile=10 | technical=13 | regime_gate=8 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-10-11 to 2024-05-16
      Winning trades: 9/26 (34.6% win rate)
      Losing trades: 17
      Avoided losses: 42 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000437
      Std dev: 0.005884
      Min/Max: -0.029572 / 0.026600
      Long positions: 26
  â†’ AUC: 0.4293 | AUCPR: 0.4550 | Accuracy: 0.4667 (0.4250 w/ threshold)
  â†’ Sharpe: 1.6772 (0.9644 w/ threshold) | Max DD: -0.0323
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-07-21 to 2024-05-16 (400 samples)
Valid: 2024-05-17 to 2024-11-26 (120 samples)
Class distribution in validation: {0.0: 60, 1.0: 60}
   âœ… Positions opened: 6/120 (5.0%)
   ğŸ” Filter rejections: threshold=79 | percentile=28 | technical=7 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=6/6 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.348

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-05-17 to 2024-11-26
      Winning trades: 5/6 (83.3% win rate)
      Losing trades: 1
      Avoided losses: 59 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000063
      Std dev: 0.000500
      Min/Max: -0.000390 / 0.004504
      Long positions: 6
  â†’ Threshold (sharpe): BUY=0.6100 | Sharpe: 0.96 | WinRate: 50.0%
  â†’ AUC: 0.8036 | AUCPR: 0.7560 | Accuracy: 0.7000 (0.5333 w/ threshold)
  â†’ Sharpe: 1.6455 (-0.5334 w/ threshold) | Max DD: -0.0008
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-01-20 to 2024-11-26 (400 samples)
Valid: 2024-11-27 to 2025-06-17 (120 samples)
Class distribution in validation: {0.0: 75, 1.0: 45}
   âœ… Positions opened: 12/120 (10.0%)
   ğŸ” Filter rejections: threshold=64 | percentile=11 | technical=33 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=12/12 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.776

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-11-27 to 2025-06-17
      Winning trades: 5/12 (41.7% win rate)
      Losing trades: 7
      Avoided losses: 68 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000061
      Std dev: 0.003576
      Min/Max: -0.013426 / 0.032055
      Long positions: 12
  â†’ AUC: 0.5452 | AUCPR: 0.4005 | Accuracy: 0.5167 (0.6083 w/ threshold)
  â†’ Sharpe: -1.1502 (-0.0811 w/ threshold) | Max DD: -0.0377
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-08-07 to 2025-06-17 (400 samples)
Valid: 2025-06-18 to 2026-01-12 (120 samples)
Class distribution in validation: {0.0: 61, 1.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=59 | percentile=6 | technical=17 | regime_gate=12 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-06-18 to 2026-01-12
      Winning trades: 14/26 (53.8% win rate)
      Losing trades: 12
      Avoided losses: 49 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000601
      Std dev: 0.004247
      Min/Max: -0.021899 / 0.021688
      Long positions: 26
  â†’ AUC: 0.6260 | AUCPR: 0.5882 | Accuracy: 0.5750 (0.5250 w/ threshold)
  â†’ Sharpe: 1.3255 (1.9496 w/ threshold) | Max DD: -0.0265
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.512974 0.535434  0.558333              0.491667  0.726199     -0.013206            0.826158   1.000000 0.046875 0.089552           0.61             NaN           sharpe                 True           0.028034    0.018846    0.421890  3.675058       0.666667            3                      3                  0.025000        0.025000                  65                            3      0.053845                         55                          17                         45                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.342797 0.586274  0.408333              0.375000  1.730534     -0.028165            0.860648   0.562500 0.116883 0.193548           0.64             NaN           sharpe                 True           0.061603    0.026603    0.284395 14.000000       0.500000           16                     21                  0.175000        0.133333                  57                           16      0.037757                         63                          36                          5                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.429286 0.455041  0.466667              0.425000  1.677212     -0.032274            0.964373   0.346154 0.147541 0.206896           0.64             NaN           sharpe                 True           0.052416    0.027416    0.403700 10.000000       0.461538           26                     26                  0.216667        0.216667                  57                           26      0.031817                         63                          10                         13                            8                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.803611 0.755997  0.700000              0.533333  1.645520     -0.000765           -0.533374   0.833333 0.083333 0.151515           0.61             NaN           sharpe                 True           0.007508    0.002744   -2.081138  1.905554       0.500000            6                     12                  0.100000        0.050000                  41                            6      0.018376                         79                          28                          7                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.545185 0.400497  0.516667              0.608333 -1.150203     -0.037723           -0.081137   0.416667 0.111111 0.175438           0.64             NaN           sharpe                 True           0.007330   -0.008190   -0.659199  6.208242       0.416667           12                     12                  0.100000        0.100000                  56                           12      0.047787                         64                          11                         33                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.626007 0.588161  0.575000              0.525000  1.325453     -0.026465            1.949612   0.538462 0.237288 0.329411           0.64             NaN           sharpe                 True           0.072120    0.042120    1.046043 12.000000       0.538462           26                     26                  0.216667        0.216667                  61                           26      0.025248                         59                           6                         17                           12                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.5433 Â± 0.1605
AUCPR:                0.5536 Â± 0.1239
Accuracy:             0.5375 Â± 0.1004
Accuracy (threshold): 0.4931 Â± 0.0831
Sharpe Ratio:         0.9925 Â± 1.1147
Sharpe (threshold):   0.6644 Â± 0.8714
Net Sharpe:           -0.0974 Â± 1.1158
Net Return:           0.0183 Â± 0.0182
Turnover:             7.9648 Â± 4.7969
Trade Coverage:       0.1236 Â± 0.0814
EV Mean/Fold:         0.03581 Â± 0.01345
Coverage Ratio:       1.0000
Max Drawdown:         -0.0231 Â± 0.0137
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 807 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 807                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5440                         â•‘
â•‘ Average Accuracy: 0.5334                 â•‘
â•‘ Average Sharpe Ratio: 1.0428             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000608                      â•‘
â•‘ Accuracy Variance: 0.000494             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
           ADX_14    0.170502
             macd    0.128160
         ema_long    0.101580
        ema_short    0.093348
distance_to_ma200    0.092510
  close_vix_ratio    0.078448
            macds    0.074936
              mfi    0.063843
    volatility_20    0.061514
   price_to_sma20    0.051008
              atr    0.043066
           roc_20    0.041085
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - MSFT                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 51.7%                                              â”‚
â”‚    â€¢ Max Probability: 62.5%                                                  â”‚
â”‚    â€¢ Min Probability: 36.0%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 26.5% (Low consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $392.74                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $420.27 (+7.01%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $378.97 (-3.50%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 51.7%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 392.739990234375,
  "profit_target": 420.270839075018,
  "stop_loss": 378.9745658140535,
  "probability": 0.5174471586942673,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.01686 | Quality=0.017 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 13
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-09-15 (400 samples)
Valid: 2022-09-16 to 2023-03-29 (120 samples)
Class distribution in validation: {1.0: 64, 0.0: 56}
   âœ… Positions opened: 3/120 (2.5%)
   ğŸ” Filter rejections: threshold=55 | percentile=20 | technical=42 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=3/3 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.919

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-09-16 to 2023-03-29
      Winning trades: 3/3 (100.0% win rate)
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000234
      Std dev: 0.002964
      Min/Max: -0.013206 / 0.024858
      Long positions: 3
  â†’ AUC: 0.4911 | AUCPR: 0.5256 | Accuracy: 0.5417 (0.4917 w/ threshold)
  â†’ Sharpe: 0.7267 (0.8262 w/ threshold) | Max DD: -0.0132
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-18 to 2023-03-29 (400 samples)
Valid: 2023-03-30 to 2023-10-10 (120 samples)
Class distribution in validation: {1.0: 77, 0.0: 43}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=64 | percentile=4 | technical=15 | regime_gate=11 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-03-30 to 2023-10-10
      Winning trades: 10/26 (38.5% win rate)
      Losing trades: 16
      Avoided losses: 27 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000136
      Std dev: 0.006357
      Min/Max: -0.023977 / 0.039800
      Long positions: 26
  â†’ AUC: 0.3129 | AUCPR: 0.5563 | Accuracy: 0.3250 (0.3083 w/ threshold)
  â†’ Sharpe: 0.5762 (-0.5388 w/ threshold) | Max DD: -0.0548
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2022-01-11 to 2023-10-10 (400 samples)
Valid: 2023-10-11 to 2024-05-16 (120 samples)
Class distribution in validation: {1.0: 61, 0.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=68 | percentile=5 | technical=13 | regime_gate=8 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-10-11 to 2024-05-16
      Winning trades: 10/26 (38.5% win rate)
      Losing trades: 16
      Avoided losses: 43 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000483
      Std dev: 0.005846
      Min/Max: -0.029572 / 0.026600
      Long positions: 26
  â†’ AUC: 0.4182 | AUCPR: 0.4506 | Accuracy: 0.4583 (0.4417 w/ threshold)
  â†’ Sharpe: 1.7212 (1.0963 w/ threshold) | Max DD: -0.0323
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-07-21 to 2024-05-16 (400 samples)
Valid: 2024-05-17 to 2024-11-26 (120 samples)
Class distribution in validation: {0.0: 60, 1.0: 60}
   âœ… Positions opened: 10/120 (8.3%)
   ğŸ” Filter rejections: threshold=75 | percentile=31 | technical=4 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=10/10 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.446

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-05-17 to 2024-11-26
      Winning trades: 6/10 (60.0% win rate)
      Losing trades: 4
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000093
      Std dev: 0.001296
      Min/Max: -0.010516 / 0.005483
      Long positions: 10
  â†’ Threshold (sharpe): BUY=0.6100 | Sharpe: 0.69 | WinRate: 72.2%
  â†’ AUC: 0.8108 | AUCPR: 0.7511 | Accuracy: 0.7000 (0.5167 w/ threshold)
  â†’ Sharpe: 1.6455 (0.1652 w/ threshold) | Max DD: -0.0105
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-01-20 to 2024-11-26 (400 samples)
Valid: 2024-11-27 to 2025-06-17 (120 samples)
Class distribution in validation: {0.0: 75, 1.0: 45}
   âœ… Positions opened: 11/120 (9.2%)
   ğŸ” Filter rejections: threshold=64 | percentile=12 | technical=33 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=11/11 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.776

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-11-27 to 2025-06-17
      Winning trades: 5/11 (45.5% win rate)
      Losing trades: 6
      Avoided losses: 69 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000079
      Std dev: 0.003571
      Min/Max: -0.013426 / 0.032055
      Long positions: 11
  â†’ AUC: 0.5505 | AUCPR: 0.4044 | Accuracy: 0.5083 (0.6167 w/ threshold)
  â†’ Sharpe: -1.0070 (-0.0014 w/ threshold) | Max DD: -0.0356
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-08-07 to 2025-06-17 (400 samples)
Valid: 2025-06-18 to 2026-01-12 (120 samples)
Class distribution in validation: {0.0: 61, 1.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=60 | percentile=6 | technical=17 | regime_gate=11 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-06-18 to 2026-01-12
      Winning trades: 15/26 (57.7% win rate)
      Losing trades: 11
      Avoided losses: 50 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000641
      Std dev: 0.004280
      Min/Max: -0.021899 / 0.021688
      Long positions: 26
  â†’ AUC: 0.6357 | AUCPR: 0.5969 | Accuracy: 0.5833 (0.5417 w/ threshold)
  â†’ Sharpe: 1.2390 (2.0845 w/ threshold) | Max DD: -0.0265
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.491071 0.525580  0.541667              0.491667  0.726659     -0.013206            0.826158   1.000000 0.046875 0.089552           0.61             NaN           sharpe                 True           0.028034    0.018846    0.421890  3.675058       0.666667            3                      3                  0.025000        0.025000                  65                            3      0.053845                         55                          20                         42                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.312896 0.556257  0.325000              0.308333  0.576209     -0.054751           -0.538808   0.384615 0.129870 0.194174           0.64             NaN           sharpe                 True          -0.016370   -0.041370   -1.035277 10.000000       0.461538           26                     26                  0.216667        0.216667                  56                           26      0.037757                         64                           4                         15                           11                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.418172 0.450620  0.458333              0.441667  1.721154     -0.032274            1.096341   0.384615 0.163934 0.229885           0.64             NaN           sharpe                 True           0.057975    0.032975    0.529111 10.000000       0.461538           26                     26                  0.216667        0.216667                  52                           26      0.031817                         68                           5                         13                            8                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.810833 0.751124  0.700000              0.516667  1.645520     -0.010516            0.165168   0.600000 0.100000 0.171428           0.61             NaN           sharpe                 True           0.011142    0.001531   -0.864839  3.844395       0.700000           10                     18                  0.150000        0.083333                  45                           10      0.020519                         75                          31                          4                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.550519 0.404446  0.508333              0.616667 -1.007047     -0.035645           -0.001428   0.454545 0.111111 0.178571           0.61             NaN           sharpe                 True           0.009485   -0.006035   -0.571636  6.208242       0.454545           11                     11                  0.091667        0.091667                  56                           11      0.047787                         64                          12                         33                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.635732 0.596901  0.583333              0.541667  1.239016     -0.026465            2.084544   0.576923 0.254237 0.352941           0.64             NaN           sharpe                 True           0.076970    0.046970    1.186608 12.000000       0.576923           26                     26                  0.216667        0.216667                  60                           26      0.025248                         60                           6                         17                           11                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.5365 Â± 0.1740
AUCPR:                0.5475 Â± 0.1219
Accuracy:             0.5194 Â± 0.1256
Accuracy (threshold): 0.4861 Â± 0.1046
Sharpe Ratio:         0.8169 Â± 1.0075
Sharpe (threshold):   0.6053 Â± 0.9326
Net Sharpe:           -0.0557 Â± 0.8937
Net Return:           0.0088 Â± 0.0314
Turnover:             7.6213 Â± 3.5306
Trade Coverage:       0.1417 Â± 0.0853
EV Mean/Fold:         0.03616 Â± 0.01291
Coverage Ratio:       1.0000
Max Drawdown:         -0.0288 Â± 0.0162
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 808 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 808                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5440                         â•‘
â•‘ Average Accuracy: 0.5334                 â•‘
â•‘ Average Sharpe Ratio: 1.0425             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000608                      â•‘
â•‘ Accuracy Variance: 0.000494             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
           ADX_14    0.159464
             macd    0.110481
         ema_long    0.107796
        ema_short    0.096095
  close_vix_ratio    0.089146
            macds    0.088482
              mfi    0.069082
    volatility_20    0.067571
distance_to_ma200    0.066596
   price_to_sma20    0.057937
           roc_20    0.045473
              atr    0.041878
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - MSFT                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 47.6%                                              â”‚
â”‚    â€¢ Max Probability: 64.3%                                                  â”‚
â”‚    â€¢ Min Probability: 19.3%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 45.0% (Low consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $392.74                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $420.27 (+7.01%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $378.97 (-3.50%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 47.6%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 392.739990234375,
  "profit_target": 420.270839075018,
  "stop_loss": 378.9745658140535,
  "probability": 0.47588181495666504,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.01249 | Quality=0.000 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 13
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-09-15 (400 samples)
Valid: 2022-09-16 to 2023-03-29 (120 samples)
Class distribution in validation: {1.0: 64, 0.0: 56}
   âœ… Positions opened: 3/120 (2.5%)
   ğŸ” Filter rejections: threshold=52 | percentile=27 | technical=38 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=3/3 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.919

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-09-16 to 2023-03-29
      Winning trades: 3/3 (100.0% win rate)
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000234
      Std dev: 0.002964
      Min/Max: -0.013206 / 0.024858
      Long positions: 3
  â†’ AUC: 0.5022 | AUCPR: 0.5368 | Accuracy: 0.5500 (0.4917 w/ threshold)
  â†’ Sharpe: 0.7483 (0.8262 w/ threshold) | Max DD: -0.0132
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-18 to 2023-03-29 (400 samples)
Valid: 2023-03-30 to 2023-10-10 (120 samples)
Class distribution in validation: {1.0: 77, 0.0: 43}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=64 | percentile=4 | technical=15 | regime_gate=11 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-03-30 to 2023-10-10
      Winning trades: 10/26 (38.5% win rate)
      Losing trades: 16
      Avoided losses: 27 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000136
      Std dev: 0.006357
      Min/Max: -0.023977 / 0.039800
      Long positions: 26
  â†’ AUC: 0.3120 | AUCPR: 0.5561 | Accuracy: 0.3250 (0.3083 w/ threshold)
  â†’ Sharpe: 0.5762 (-0.5388 w/ threshold) | Max DD: -0.0548
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2022-01-11 to 2023-10-10 (400 samples)
Valid: 2023-10-11 to 2024-05-16 (120 samples)
Class distribution in validation: {1.0: 61, 0.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=62 | percentile=11 | technical=13 | regime_gate=8 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-10-11 to 2024-05-16
      Winning trades: 9/26 (34.6% win rate)
      Losing trades: 17
      Avoided losses: 42 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000437
      Std dev: 0.005884
      Min/Max: -0.029572 / 0.026600
      Long positions: 26
  â†’ AUC: 0.4276 | AUCPR: 0.4544 | Accuracy: 0.4583 (0.4250 w/ threshold)
  â†’ Sharpe: 1.8161 (0.9644 w/ threshold) | Max DD: -0.0323
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-07-21 to 2024-05-16 (400 samples)
Valid: 2024-05-17 to 2024-11-26 (120 samples)
Class distribution in validation: {0.0: 60, 1.0: 60}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=51 | percentile=17 | technical=19 | regime_gate=7 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.861

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-05-17 to 2024-11-26
      Winning trades: 15/26 (57.7% win rate)
      Losing trades: 11
      Avoided losses: 49 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000036
      Std dev: 0.003939
      Min/Max: -0.023975 / 0.018910
      Long positions: 26
  â†’ AUC: 0.7989 | AUCPR: 0.7224 | Accuracy: 0.7583 (0.5333 w/ threshold)
  â†’ Sharpe: 1.2698 (-0.1733 w/ threshold) | Max DD: -0.0341
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-01-20 to 2024-11-26 (400 samples)
Valid: 2024-11-27 to 2025-06-17 (120 samples)
Class distribution in validation: {0.0: 75, 1.0: 45}
   âœ… Positions opened: 12/120 (10.0%)
   ğŸ” Filter rejections: threshold=65 | percentile=10 | technical=33 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=12/12 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.776

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-11-27 to 2025-06-17
      Winning trades: 5/12 (41.7% win rate)
      Losing trades: 7
      Avoided losses: 68 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000061
      Std dev: 0.003576
      Min/Max: -0.013426 / 0.032055
      Long positions: 12
  â†’ AUC: 0.5461 | AUCPR: 0.4011 | Accuracy: 0.5167 (0.6083 w/ threshold)
  â†’ Sharpe: -1.1502 (-0.0811 w/ threshold) | Max DD: -0.0377
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-08-07 to 2025-06-17 (400 samples)
Valid: 2025-06-18 to 2026-01-12 (120 samples)
Class distribution in validation: {0.0: 61, 1.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=60 | percentile=6 | technical=17 | regime_gate=11 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-06-18 to 2026-01-12
      Winning trades: 15/26 (57.7% win rate)
      Losing trades: 11
      Avoided losses: 50 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000641
      Std dev: 0.004280
      Min/Max: -0.021899 / 0.021688
      Long positions: 26
  â†’ AUC: 0.6346 | AUCPR: 0.5965 | Accuracy: 0.5750 (0.5417 w/ threshold)
  â†’ Sharpe: 1.3255 (2.0845 w/ threshold) | Max DD: -0.0265
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.502232 0.536785  0.550000              0.491667  0.748313     -0.013206            0.826158   1.000000 0.046875 0.089552           0.61             NaN           sharpe                 True           0.028034    0.018846    0.421890  3.675058       0.666667            3                      3                  0.025000        0.025000                  68                            3      0.053845                         52                          27                         38                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.311990 0.556109  0.325000              0.308333  0.576209     -0.054751           -0.538808   0.384615 0.129870 0.194174           0.64             NaN           sharpe                 True          -0.016370   -0.041370   -1.035277 10.000000       0.461538           26                     26                  0.216667        0.216667                  56                           26      0.037757                         64                           4                         15                           11                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.427619 0.454421  0.458333              0.425000  1.816107     -0.032274            0.964373   0.346154 0.147541 0.206896           0.64             NaN           sharpe                 True           0.052416    0.027416    0.403700 10.000000       0.461538           26                     26                  0.216667        0.216667                  58                           26      0.031817                         62                          11                         13                            8                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.798889 0.722398  0.758333              0.533333  1.269774     -0.034149           -0.173349   0.576923 0.250000 0.348837           0.64             NaN           sharpe                 True           0.004362   -0.015005   -0.835616  7.747055       0.500000           26                     26                  0.216667        0.216667                  69                           26      0.029547                         51                          17                         19                            7                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.546074 0.401093  0.516667              0.608333 -1.150203     -0.037723           -0.081137   0.416667 0.111111 0.175438           0.64             NaN           sharpe                 True           0.007330   -0.008190   -0.659199  6.208242       0.416667           12                     12                  0.100000        0.100000                  55                           12      0.047787                         65                          10                         33                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.634621 0.596456  0.575000              0.541667  1.325453     -0.026465            2.084544   0.576923 0.254237 0.352941           0.64             NaN           sharpe                 True           0.076970    0.046970    1.186608 12.000000       0.576923           26                     26                  0.216667        0.216667                  60                           26      0.025248                         60                           6                         17                           11                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.5369 Â± 0.1685
AUCPR:                0.5445 Â± 0.1124
Accuracy:             0.5306 Â± 0.1428
Accuracy (threshold): 0.4847 Â± 0.1055
Sharpe Ratio:         0.7643 Â± 1.0371
Sharpe (threshold):   0.5136 Â± 0.9697
Net Sharpe:           -0.0863 Â± 0.8842
Net Return:           0.0048 Â± 0.0322
Turnover:             8.2717 Â± 3.0178
Trade Coverage:       0.1653 Â± 0.0831
EV Mean/Fold:         0.03767 Â± 0.01112
Coverage Ratio:       1.0000
Max Drawdown:         -0.0331 Â± 0.0137
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 809 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 809                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5440                         â•‘
â•‘ Average Accuracy: 0.5334                 â•‘
â•‘ Average Sharpe Ratio: 1.0422             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000607                      â•‘
â•‘ Accuracy Variance: 0.000493             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
           ADX_14    0.174539
             macd    0.112696
        ema_short    0.112142
         ema_long    0.087568
            macds    0.087334
    volatility_20    0.077971
distance_to_ma200    0.077321
  close_vix_ratio    0.069650
              mfi    0.064480
   price_to_sma20    0.053557
           roc_20    0.044886
              atr    0.037856
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - MSFT                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 50.8%                                              â”‚
â”‚    â€¢ Max Probability: 60.8%                                                  â”‚
â”‚    â€¢ Min Probability: 14.6%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 46.3% (Low consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $392.74                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $420.27 (+7.01%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $378.97 (-3.50%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 50.8%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 392.739990234375,
  "profit_target": 420.270839075018,
  "stop_loss": 378.9745658140535,
  "probability": 0.5075393443306287,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.01582 | Quality=0.008 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 12
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-09-15 (400 samples)
Valid: 2022-09-16 to 2023-03-29 (120 samples)
Class distribution in validation: {1.0: 64, 0.0: 56}
   âœ… Positions opened: 3/120 (2.5%)
   ğŸ” Filter rejections: threshold=55 | percentile=17 | technical=45 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=3/3 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.919

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-09-16 to 2023-03-29
      Winning trades: 3/3 (100.0% win rate)
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000234
      Std dev: 0.002964
      Min/Max: -0.013206 / 0.024858
      Long positions: 3
  â†’ AUC: 0.5130 | AUCPR: 0.5354 | Accuracy: 0.5583 (0.4917 w/ threshold)
  â†’ Sharpe: 0.7262 (0.8262 w/ threshold) | Max DD: -0.0132
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-18 to 2023-03-29 (400 samples)
Valid: 2023-03-30 to 2023-10-10 (120 samples)
Class distribution in validation: {1.0: 77, 0.0: 43}
   âœ… Positions opened: 16/120 (13.3%)
   ğŸ” Filter rejections: threshold=63 | percentile=36 | technical=5 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=16/16 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-03-30 to 2023-10-10
      Winning trades: 9/16 (56.2% win rate)
      Losing trades: 7
      Avoided losses: 36 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000513
      Std dev: 0.008005
      Min/Max: -0.021498 / 0.072435
      Long positions: 16
  â†’ Threshold (sharpe): BUY=0.6400 | Sharpe: 0.90 | WinRate: 52.4%
  â†’ AUC: 0.3428 | AUCPR: 0.5863 | Accuracy: 0.4083 (0.3750 w/ threshold)
  â†’ Sharpe: 1.7305 (0.8606 w/ threshold) | Max DD: -0.0282
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2022-01-11 to 2023-10-10 (400 samples)
Valid: 2023-10-11 to 2024-05-16 (120 samples)
Class distribution in validation: {1.0: 61, 0.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=63 | percentile=10 | technical=13 | regime_gate=8 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-10-11 to 2024-05-16
      Winning trades: 9/26 (34.6% win rate)
      Losing trades: 17
      Avoided losses: 42 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000437
      Std dev: 0.005884
      Min/Max: -0.029572 / 0.026600
      Long positions: 26
  â†’ AUC: 0.4293 | AUCPR: 0.4550 | Accuracy: 0.4667 (0.4250 w/ threshold)
  â†’ Sharpe: 1.6772 (0.9644 w/ threshold) | Max DD: -0.0323
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-07-21 to 2024-05-16 (400 samples)
Valid: 2024-05-17 to 2024-11-26 (120 samples)
Class distribution in validation: {0.0: 60, 1.0: 60}
   âœ… Positions opened: 6/120 (5.0%)
   ğŸ” Filter rejections: threshold=79 | percentile=28 | technical=7 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=6/6 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.348

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-05-17 to 2024-11-26
      Winning trades: 5/6 (83.3% win rate)
      Losing trades: 1
      Avoided losses: 59 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000063
      Std dev: 0.000500
      Min/Max: -0.000390 / 0.004504
      Long positions: 6
  â†’ Threshold (sharpe): BUY=0.6100 | Sharpe: 0.96 | WinRate: 50.0%
  â†’ AUC: 0.8036 | AUCPR: 0.7560 | Accuracy: 0.7000 (0.5333 w/ threshold)
  â†’ Sharpe: 1.6455 (-0.5334 w/ threshold) | Max DD: -0.0008
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-01-20 to 2024-11-26 (400 samples)
Valid: 2024-11-27 to 2025-06-17 (120 samples)
Class distribution in validation: {0.0: 75, 1.0: 45}
   âœ… Positions opened: 12/120 (10.0%)
   ğŸ” Filter rejections: threshold=64 | percentile=11 | technical=33 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=12/12 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.776

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-11-27 to 2025-06-17
      Winning trades: 5/12 (41.7% win rate)
      Losing trades: 7
      Avoided losses: 68 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000061
      Std dev: 0.003576
      Min/Max: -0.013426 / 0.032055
      Long positions: 12
  â†’ AUC: 0.5452 | AUCPR: 0.4005 | Accuracy: 0.5167 (0.6083 w/ threshold)
  â†’ Sharpe: -1.1502 (-0.0811 w/ threshold) | Max DD: -0.0377
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-08-07 to 2025-06-17 (400 samples)
Valid: 2025-06-18 to 2026-01-12 (120 samples)
Class distribution in validation: {0.0: 61, 1.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=59 | percentile=6 | technical=17 | regime_gate=12 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-06-18 to 2026-01-12
      Winning trades: 14/26 (53.8% win rate)
      Losing trades: 12
      Avoided losses: 49 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000601
      Std dev: 0.004247
      Min/Max: -0.021899 / 0.021688
      Long positions: 26
  â†’ AUC: 0.6260 | AUCPR: 0.5882 | Accuracy: 0.5750 (0.5250 w/ threshold)
  â†’ Sharpe: 1.3255 (1.9496 w/ threshold) | Max DD: -0.0265
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.512974 0.535434  0.558333              0.491667  0.726199     -0.013206            0.826158   1.000000 0.046875 0.089552           0.61             NaN           sharpe                 True           0.028034    0.018846    0.421890  3.675058       0.666667            3                      3                  0.025000        0.025000                  65                            3      0.053845                         55                          17                         45                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.342797 0.586274  0.408333              0.375000  1.730534     -0.028165            0.860648   0.562500 0.116883 0.193548           0.64             NaN           sharpe                 True           0.061603    0.026603    0.284395 14.000000       0.500000           16                     21                  0.175000        0.133333                  57                           16      0.037757                         63                          36                          5                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.429286 0.455041  0.466667              0.425000  1.677212     -0.032274            0.964373   0.346154 0.147541 0.206896           0.64             NaN           sharpe                 True           0.052416    0.027416    0.403700 10.000000       0.461538           26                     26                  0.216667        0.216667                  57                           26      0.031817                         63                          10                         13                            8                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.803611 0.755997  0.700000              0.533333  1.645520     -0.000765           -0.533374   0.833333 0.083333 0.151515           0.61             NaN           sharpe                 True           0.007508    0.002744   -2.081138  1.905554       0.500000            6                     12                  0.100000        0.050000                  41                            6      0.018376                         79                          28                          7                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.545185 0.400497  0.516667              0.608333 -1.150203     -0.037723           -0.081137   0.416667 0.111111 0.175438           0.64             NaN           sharpe                 True           0.007330   -0.008190   -0.659199  6.208242       0.416667           12                     12                  0.100000        0.100000                  56                           12      0.047787                         64                          11                         33                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.626007 0.588161  0.575000              0.525000  1.325453     -0.026465            1.949612   0.538462 0.237288 0.329411           0.64             NaN           sharpe                 True           0.072120    0.042120    1.046043 12.000000       0.538462           26                     26                  0.216667        0.216667                  61                           26      0.025248                         59                           6                         17                           12                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.5433 Â± 0.1605
AUCPR:                0.5536 Â± 0.1239
Accuracy:             0.5375 Â± 0.1004
Accuracy (threshold): 0.4931 Â± 0.0831
Sharpe Ratio:         0.9925 Â± 1.1147
Sharpe (threshold):   0.6644 Â± 0.8714
Net Sharpe:           -0.0974 Â± 1.1158
Net Return:           0.0183 Â± 0.0182
Turnover:             7.9648 Â± 4.7969
Trade Coverage:       0.1236 Â± 0.0814
EV Mean/Fold:         0.03581 Â± 0.01345
Coverage Ratio:       1.0000
Max Drawdown:         -0.0231 Â± 0.0137
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 810 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 810                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5440                         â•‘
â•‘ Average Accuracy: 0.5334                 â•‘
â•‘ Average Sharpe Ratio: 1.0421             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000606                      â•‘
â•‘ Accuracy Variance: 0.000493             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
           ADX_14    0.170502
             macd    0.128160
         ema_long    0.101580
        ema_short    0.093348
distance_to_ma200    0.092510
  close_vix_ratio    0.078448
            macds    0.074936
              mfi    0.063843
    volatility_20    0.061514
   price_to_sma20    0.051008
              atr    0.043066
           roc_20    0.041085
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - MSFT                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 51.7%                                              â”‚
â”‚    â€¢ Max Probability: 62.5%                                                  â”‚
â”‚    â€¢ Min Probability: 36.0%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 26.5% (Low consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $392.74                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $420.27 (+7.01%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $378.97 (-3.50%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 51.7%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 392.739990234375,
  "profit_target": 420.270839075018,
  "stop_loss": 378.9745658140535,
  "probability": 0.5174471586942673,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.01686 | Quality=0.017 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 12
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-09-15 (400 samples)
Valid: 2022-09-16 to 2023-03-29 (120 samples)
Class distribution in validation: {1.0: 64, 0.0: 56}
   âœ… Positions opened: 3/120 (2.5%)
   ğŸ” Filter rejections: threshold=55 | percentile=20 | technical=42 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=3/3 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.919

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-09-16 to 2023-03-29
      Winning trades: 3/3 (100.0% win rate)
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000234
      Std dev: 0.002964
      Min/Max: -0.013206 / 0.024858
      Long positions: 3
  â†’ AUC: 0.4911 | AUCPR: 0.5256 | Accuracy: 0.5417 (0.4917 w/ threshold)
  â†’ Sharpe: 0.7267 (0.8262 w/ threshold) | Max DD: -0.0132
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-18 to 2023-03-29 (400 samples)
Valid: 2023-03-30 to 2023-10-10 (120 samples)
Class distribution in validation: {1.0: 77, 0.0: 43}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=64 | percentile=4 | technical=15 | regime_gate=11 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-03-30 to 2023-10-10
      Winning trades: 10/26 (38.5% win rate)
      Losing trades: 16
      Avoided losses: 27 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000136
      Std dev: 0.006357
      Min/Max: -0.023977 / 0.039800
      Long positions: 26
  â†’ AUC: 0.3129 | AUCPR: 0.5563 | Accuracy: 0.3250 (0.3083 w/ threshold)
  â†’ Sharpe: 0.5762 (-0.5388 w/ threshold) | Max DD: -0.0548
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2022-01-11 to 2023-10-10 (400 samples)
Valid: 2023-10-11 to 2024-05-16 (120 samples)
Class distribution in validation: {1.0: 61, 0.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=68 | percentile=5 | technical=13 | regime_gate=8 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-10-11 to 2024-05-16
      Winning trades: 10/26 (38.5% win rate)
      Losing trades: 16
      Avoided losses: 43 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000483
      Std dev: 0.005846
      Min/Max: -0.029572 / 0.026600
      Long positions: 26
  â†’ AUC: 0.4182 | AUCPR: 0.4506 | Accuracy: 0.4583 (0.4417 w/ threshold)
  â†’ Sharpe: 1.7212 (1.0963 w/ threshold) | Max DD: -0.0323
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-07-21 to 2024-05-16 (400 samples)
Valid: 2024-05-17 to 2024-11-26 (120 samples)
Class distribution in validation: {0.0: 60, 1.0: 60}
   âœ… Positions opened: 10/120 (8.3%)
   ğŸ” Filter rejections: threshold=75 | percentile=31 | technical=4 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=10/10 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.446

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-05-17 to 2024-11-26
      Winning trades: 6/10 (60.0% win rate)
      Losing trades: 4
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000093
      Std dev: 0.001296
      Min/Max: -0.010516 / 0.005483
      Long positions: 10
  â†’ Threshold (sharpe): BUY=0.6100 | Sharpe: 0.69 | WinRate: 72.2%
  â†’ AUC: 0.8108 | AUCPR: 0.7511 | Accuracy: 0.7000 (0.5167 w/ threshold)
  â†’ Sharpe: 1.6455 (0.1652 w/ threshold) | Max DD: -0.0105
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-01-20 to 2024-11-26 (400 samples)
Valid: 2024-11-27 to 2025-06-17 (120 samples)
Class distribution in validation: {0.0: 75, 1.0: 45}
   âœ… Positions opened: 11/120 (9.2%)
   ğŸ” Filter rejections: threshold=64 | percentile=12 | technical=33 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=11/11 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.776

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-11-27 to 2025-06-17
      Winning trades: 5/11 (45.5% win rate)
      Losing trades: 6
      Avoided losses: 69 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000079
      Std dev: 0.003571
      Min/Max: -0.013426 / 0.032055
      Long positions: 11
  â†’ AUC: 0.5505 | AUCPR: 0.4044 | Accuracy: 0.5083 (0.6167 w/ threshold)
  â†’ Sharpe: -1.0070 (-0.0014 w/ threshold) | Max DD: -0.0356
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-08-07 to 2025-06-17 (400 samples)
Valid: 2025-06-18 to 2026-01-12 (120 samples)
Class distribution in validation: {0.0: 61, 1.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=60 | percentile=6 | technical=17 | regime_gate=11 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-06-18 to 2026-01-12
      Winning trades: 15/26 (57.7% win rate)
      Losing trades: 11
      Avoided losses: 50 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000641
      Std dev: 0.004280
      Min/Max: -0.021899 / 0.021688
      Long positions: 26
  â†’ AUC: 0.6357 | AUCPR: 0.5969 | Accuracy: 0.5833 (0.5417 w/ threshold)
  â†’ Sharpe: 1.2390 (2.0845 w/ threshold) | Max DD: -0.0265
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.491071 0.525580  0.541667              0.491667  0.726659     -0.013206            0.826158   1.000000 0.046875 0.089552           0.61             NaN           sharpe                 True           0.028034    0.018846    0.421890  3.675058       0.666667            3                      3                  0.025000        0.025000                  65                            3      0.053845                         55                          20                         42                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.312896 0.556257  0.325000              0.308333  0.576209     -0.054751           -0.538808   0.384615 0.129870 0.194174           0.64             NaN           sharpe                 True          -0.016370   -0.041370   -1.035277 10.000000       0.461538           26                     26                  0.216667        0.216667                  56                           26      0.037757                         64                           4                         15                           11                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.418172 0.450620  0.458333              0.441667  1.721154     -0.032274            1.096341   0.384615 0.163934 0.229885           0.64             NaN           sharpe                 True           0.057975    0.032975    0.529111 10.000000       0.461538           26                     26                  0.216667        0.216667                  52                           26      0.031817                         68                           5                         13                            8                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.810833 0.751124  0.700000              0.516667  1.645520     -0.010516            0.165168   0.600000 0.100000 0.171428           0.61             NaN           sharpe                 True           0.011142    0.001531   -0.864839  3.844395       0.700000           10                     18                  0.150000        0.083333                  45                           10      0.020519                         75                          31                          4                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.550519 0.404446  0.508333              0.616667 -1.007047     -0.035645           -0.001428   0.454545 0.111111 0.178571           0.61             NaN           sharpe                 True           0.009485   -0.006035   -0.571636  6.208242       0.454545           11                     11                  0.091667        0.091667                  56                           11      0.047787                         64                          12                         33                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.635732 0.596901  0.583333              0.541667  1.239016     -0.026465            2.084544   0.576923 0.254237 0.352941           0.64             NaN           sharpe                 True           0.076970    0.046970    1.186608 12.000000       0.576923           26                     26                  0.216667        0.216667                  60                           26      0.025248                         60                           6                         17                           11                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.5365 Â± 0.1740
AUCPR:                0.5475 Â± 0.1219
Accuracy:             0.5194 Â± 0.1256
Accuracy (threshold): 0.4861 Â± 0.1046
Sharpe Ratio:         0.8169 Â± 1.0075
Sharpe (threshold):   0.6053 Â± 0.9326
Net Sharpe:           -0.0557 Â± 0.8937
Net Return:           0.0088 Â± 0.0314
Turnover:             7.6213 Â± 3.5306
Trade Coverage:       0.1417 Â± 0.0853
EV Mean/Fold:         0.03616 Â± 0.01291
Coverage Ratio:       1.0000
Max Drawdown:         -0.0288 Â± 0.0162
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 811 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 811                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5440                         â•‘
â•‘ Average Accuracy: 0.5334                 â•‘
â•‘ Average Sharpe Ratio: 1.0418             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000605                      â•‘
â•‘ Accuracy Variance: 0.000492             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
           ADX_14    0.159464
             macd    0.110481
         ema_long    0.107796
        ema_short    0.096095
  close_vix_ratio    0.089146
            macds    0.088482
              mfi    0.069082
    volatility_20    0.067571
distance_to_ma200    0.066596
   price_to_sma20    0.057937
           roc_20    0.045473
              atr    0.041878
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - MSFT                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 47.6%                                              â”‚
â”‚    â€¢ Max Probability: 64.3%                                                  â”‚
â”‚    â€¢ Min Probability: 19.3%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 45.0% (Low consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $392.74                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $420.27 (+7.01%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $378.97 (-3.50%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 47.6%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 392.739990234375,
  "profit_target": 420.270839075018,
  "stop_loss": 378.9745658140535,
  "probability": 0.47588181495666504,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.01249 | Quality=0.000 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 12
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-09-15 (400 samples)
Valid: 2022-09-16 to 2023-03-29 (120 samples)
Class distribution in validation: {1.0: 64, 0.0: 56}
   âœ… Positions opened: 3/120 (2.5%)
   ğŸ” Filter rejections: threshold=52 | percentile=27 | technical=38 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=3/3 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.919

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-09-16 to 2023-03-29
      Winning trades: 3/3 (100.0% win rate)
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000234
      Std dev: 0.002964
      Min/Max: -0.013206 / 0.024858
      Long positions: 3
  â†’ AUC: 0.5022 | AUCPR: 0.5368 | Accuracy: 0.5500 (0.4917 w/ threshold)
  â†’ Sharpe: 0.7483 (0.8262 w/ threshold) | Max DD: -0.0132
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-18 to 2023-03-29 (400 samples)
Valid: 2023-03-30 to 2023-10-10 (120 samples)
Class distribution in validation: {1.0: 77, 0.0: 43}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=64 | percentile=4 | technical=15 | regime_gate=11 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-03-30 to 2023-10-10
      Winning trades: 10/26 (38.5% win rate)
      Losing trades: 16
      Avoided losses: 27 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000136
      Std dev: 0.006357
      Min/Max: -0.023977 / 0.039800
      Long positions: 26
  â†’ AUC: 0.3120 | AUCPR: 0.5561 | Accuracy: 0.3250 (0.3083 w/ threshold)
  â†’ Sharpe: 0.5762 (-0.5388 w/ threshold) | Max DD: -0.0548
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2022-01-11 to 2023-10-10 (400 samples)
Valid: 2023-10-11 to 2024-05-16 (120 samples)
Class distribution in validation: {1.0: 61, 0.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=62 | percentile=11 | technical=13 | regime_gate=8 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-10-11 to 2024-05-16
      Winning trades: 9/26 (34.6% win rate)
      Losing trades: 17
      Avoided losses: 42 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000437
      Std dev: 0.005884
      Min/Max: -0.029572 / 0.026600
      Long positions: 26
  â†’ AUC: 0.4276 | AUCPR: 0.4544 | Accuracy: 0.4583 (0.4250 w/ threshold)
  â†’ Sharpe: 1.8161 (0.9644 w/ threshold) | Max DD: -0.0323
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-07-21 to 2024-05-16 (400 samples)
Valid: 2024-05-17 to 2024-11-26 (120 samples)
Class distribution in validation: {0.0: 60, 1.0: 60}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=51 | percentile=17 | technical=19 | regime_gate=7 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.861

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-05-17 to 2024-11-26
      Winning trades: 15/26 (57.7% win rate)
      Losing trades: 11
      Avoided losses: 49 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000036
      Std dev: 0.003939
      Min/Max: -0.023975 / 0.018910
      Long positions: 26
  â†’ AUC: 0.7989 | AUCPR: 0.7224 | Accuracy: 0.7583 (0.5333 w/ threshold)
  â†’ Sharpe: 1.2698 (-0.1733 w/ threshold) | Max DD: -0.0341
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-01-20 to 2024-11-26 (400 samples)
Valid: 2024-11-27 to 2025-06-17 (120 samples)
Class distribution in validation: {0.0: 75, 1.0: 45}
   âœ… Positions opened: 12/120 (10.0%)
   ğŸ” Filter rejections: threshold=65 | percentile=10 | technical=33 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=12/12 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.776

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-11-27 to 2025-06-17
      Winning trades: 5/12 (41.7% win rate)
      Losing trades: 7
      Avoided losses: 68 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000061
      Std dev: 0.003576
      Min/Max: -0.013426 / 0.032055
      Long positions: 12
  â†’ AUC: 0.5461 | AUCPR: 0.4011 | Accuracy: 0.5167 (0.6083 w/ threshold)
  â†’ Sharpe: -1.1502 (-0.0811 w/ threshold) | Max DD: -0.0377
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-08-07 to 2025-06-17 (400 samples)
Valid: 2025-06-18 to 2026-01-12 (120 samples)
Class distribution in validation: {0.0: 61, 1.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=60 | percentile=6 | technical=17 | regime_gate=11 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-06-18 to 2026-01-12
      Winning trades: 15/26 (57.7% win rate)
      Losing trades: 11
      Avoided losses: 50 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000641
      Std dev: 0.004280
      Min/Max: -0.021899 / 0.021688
      Long positions: 26
  â†’ AUC: 0.6346 | AUCPR: 0.5965 | Accuracy: 0.5750 (0.5417 w/ threshold)
  â†’ Sharpe: 1.3255 (2.0845 w/ threshold) | Max DD: -0.0265
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.502232 0.536785  0.550000              0.491667  0.748313     -0.013206            0.826158   1.000000 0.046875 0.089552           0.61             NaN           sharpe                 True           0.028034    0.018846    0.421890  3.675058       0.666667            3                      3                  0.025000        0.025000                  68                            3      0.053845                         52                          27                         38                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.311990 0.556109  0.325000              0.308333  0.576209     -0.054751           -0.538808   0.384615 0.129870 0.194174           0.64             NaN           sharpe                 True          -0.016370   -0.041370   -1.035277 10.000000       0.461538           26                     26                  0.216667        0.216667                  56                           26      0.037757                         64                           4                         15                           11                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.427619 0.454421  0.458333              0.425000  1.816107     -0.032274            0.964373   0.346154 0.147541 0.206896           0.64             NaN           sharpe                 True           0.052416    0.027416    0.403700 10.000000       0.461538           26                     26                  0.216667        0.216667                  58                           26      0.031817                         62                          11                         13                            8                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.798889 0.722398  0.758333              0.533333  1.269774     -0.034149           -0.173349   0.576923 0.250000 0.348837           0.64             NaN           sharpe                 True           0.004362   -0.015005   -0.835616  7.747055       0.500000           26                     26                  0.216667        0.216667                  69                           26      0.029547                         51                          17                         19                            7                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.546074 0.401093  0.516667              0.608333 -1.150203     -0.037723           -0.081137   0.416667 0.111111 0.175438           0.64             NaN           sharpe                 True           0.007330   -0.008190   -0.659199  6.208242       0.416667           12                     12                  0.100000        0.100000                  55                           12      0.047787                         65                          10                         33                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.634621 0.596456  0.575000              0.541667  1.325453     -0.026465            2.084544   0.576923 0.254237 0.352941           0.64             NaN           sharpe                 True           0.076970    0.046970    1.186608 12.000000       0.576923           26                     26                  0.216667        0.216667                  60                           26      0.025248                         60                           6                         17                           11                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.5369 Â± 0.1685
AUCPR:                0.5445 Â± 0.1124
Accuracy:             0.5306 Â± 0.1428
Accuracy (threshold): 0.4847 Â± 0.1055
Sharpe Ratio:         0.7643 Â± 1.0371
Sharpe (threshold):   0.5136 Â± 0.9697
Net Sharpe:           -0.0863 Â± 0.8842
Net Return:           0.0048 Â± 0.0322
Turnover:             8.2717 Â± 3.0178
Trade Coverage:       0.1653 Â± 0.0831
EV Mean/Fold:         0.03767 Â± 0.01112
Coverage Ratio:       1.0000
Max Drawdown:         -0.0331 Â± 0.0137
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 812 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 812                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5440                         â•‘
â•‘ Average Accuracy: 0.5334                 â•‘
â•‘ Average Sharpe Ratio: 1.0415             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000605                      â•‘
â•‘ Accuracy Variance: 0.000492             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
           ADX_14    0.174539
             macd    0.112696
        ema_short    0.112142
         ema_long    0.087568
            macds    0.087334
    volatility_20    0.077971
distance_to_ma200    0.077321
  close_vix_ratio    0.069650
              mfi    0.064480
   price_to_sma20    0.053557
           roc_20    0.044886
              atr    0.037856
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - MSFT                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 50.8%                                              â”‚
â”‚    â€¢ Max Probability: 60.8%                                                  â”‚
â”‚    â€¢ Min Probability: 14.6%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 46.3% (Low consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $392.74                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $420.27 (+7.01%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $378.97 (-3.50%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 50.8%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 392.739990234375,
  "profit_target": 420.270839075018,
  "stop_loss": 378.9745658140535,
  "probability": 0.5075393443306287,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.01582 | Quality=0.008 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 12
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-10-03 (400 samples)
Valid: 2022-10-04 to 2023-05-01 (120 samples)
Class distribution in validation: {1.0: 79, 0.0: 41}
   âœ… Positions opened: 14/120 (11.7%)
   ğŸ” Filter rejections: threshold=57 | percentile=26 | technical=23 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=14/14 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.986

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-10-04 to 2023-05-01
      Winning trades: 13/14 (92.9% win rate)
      Losing trades: 1
      Avoided losses: 40 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000516
      Std dev: 0.005040
      Min/Max: -0.017751 / 0.034596
      Long positions: 14
  â†’ AUC: 0.6091 | AUCPR: 0.7519 | Accuracy: 0.5917 (0.4417 w/ threshold)
  â†’ Sharpe: 0.7430 (1.3737 w/ threshold) | Max DD: -0.0270
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-30 to 2023-05-01 (400 samples)
Valid: 2023-05-02 to 2023-12-08 (120 samples)
Class distribution in validation: {1.0: 68, 0.0: 52}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=52 | percentile=18 | technical=19 | regime_gate=5 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-05-02 to 2023-12-08
      Winning trades: 11/26 (42.3% win rate)
      Losing trades: 15
      Avoided losses: 37 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000058
      Std dev: 0.004462
      Min/Max: -0.024606 / 0.015465
      Long positions: 26
  â†’ AUC: 0.4690 | AUCPR: 0.5256 | Accuracy: 0.5333 (0.4000 w/ threshold)
  â†’ Sharpe: 1.1233 (-0.0776 w/ threshold) | Max DD: -0.0700
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2022-02-03 to 2023-12-08 (400 samples)
Valid: 2023-12-11 to 2024-06-25 (120 samples)
Class distribution in validation: {1.0: 64, 0.0: 56}
   âœ… Positions opened: 15/120 (12.5%)
   ğŸ” Filter rejections: threshold=48 | percentile=17 | technical=40 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=15/15 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-12-11 to 2024-06-25
      Winning trades: 4/15 (26.7% win rate)
      Losing trades: 11
      Avoided losses: 45 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000020
      Std dev: 0.007323
      Min/Max: -0.019148 / 0.072649
      Long positions: 15
  â†’ AUC: 0.3331 | AUCPR: 0.4619 | Accuracy: 0.3083 (0.4083 w/ threshold)
  â†’ Sharpe: 0.2008 (-0.1279 w/ threshold) | Max DD: -0.0683
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-08-08 to 2024-06-25 (400 samples)
Valid: 2024-06-26 to 2024-12-19 (120 samples)
Class distribution in validation: {0.0: 67, 1.0: 53}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=56 | percentile=7 | technical=14 | regime_gate=17 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.842

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-06-26 to 2024-12-19
      Winning trades: 15/26 (57.7% win rate)
      Losing trades: 11
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000126
      Std dev: 0.004370
      Min/Max: -0.018217 / 0.018006
      Long positions: 26
  â†’ AUC: 0.6039 | AUCPR: 0.5151 | Accuracy: 0.5917 (0.5917 w/ threshold)
  â†’ Sharpe: 1.7772 (0.1680 w/ threshold) | Max DD: -0.0517
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-02-22 to 2024-12-19 (400 samples)
Valid: 2024-12-20 to 2025-08-01 (120 samples)
Class distribution in validation: {0.0: 82, 1.0: 38}
   âœ… Positions opened: 8/120 (6.7%)
   ğŸ” Filter rejections: threshold=57 | percentile=24 | technical=31 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=8/8 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.734

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-12-20 to 2025-08-01
      Winning trades: 2/8 (25.0% win rate)
      Losing trades: 6
      Avoided losses: 76 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000091
      Std dev: 0.003185
      Min/Max: -0.019251 / 0.016019
      Long positions: 8
  â†’ AUC: 0.6293 | AUCPR: 0.4230 | Accuracy: 0.4667 (0.6500 w/ threshold)
  â†’ Sharpe: -1.3368 (-0.8488 w/ threshold) | Max DD: -0.0399
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-09-25 to 2025-08-01 (400 samples)
Valid: 2025-08-04 to 2026-01-29 (98 samples)
Class distribution in validation: {1.0: 56, 0.0: 42}
   âœ… Positions opened: 21/98 (21.4%)
   ğŸ” Filter rejections: threshold=45 | percentile=10 | technical=14 | regime_gate=8 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=21/21 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.954

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-08-04 to 2026-01-29
      Winning trades: 9/21 (42.9% win rate)
      Losing trades: 12
      Avoided losses: 30 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 98/98):
      Mean return: 0.000933
      Std dev: 0.006231
      Min/Max: -0.017331 / 0.037615
      Long positions: 21
  â†’ AUC: 0.3440 | AUCPR: 0.5079 | Accuracy: 0.3367 (0.3980 w/ threshold)
  â†’ Sharpe: 2.6676 (2.1753 w/ threshold) | Max DD: -0.0288
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.609139 0.751852  0.591667              0.441667  0.743034     -0.026991            1.373673   0.928571 0.164557 0.279570           0.64             NaN           sharpe                 True           0.061863    0.047075    0.985919  5.915447       0.642857           14                     14                  0.116667        0.116667                  63                           14      0.054369                         57                          26                         23                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.469033 0.525633  0.533333              0.400000  1.123333     -0.069979           -0.077578   0.423077 0.161765 0.234042           0.64             NaN           sharpe                 True           0.006907   -0.038093   -1.403659 18.000000       0.576923           26                     26                  0.216667        0.216667                  68                           26      0.030729                         52                          18                         19                            5                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.333147 0.461907  0.308333              0.408333  0.200770     -0.068339           -0.127873   0.266667 0.062500 0.101266           0.64             NaN           sharpe                 True           0.002445   -0.022555   -0.574079 10.000000       0.200000           15                     15                  0.125000        0.125000                  72                           15      0.035264                         48                          17                         40                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.603914 0.515104  0.591667              0.591667  1.777202     -0.051720            0.168025   0.576923 0.283019 0.379746           0.64             NaN           sharpe                 True           0.015074   -0.001776   -0.346992  6.739847       0.461538           26                     26                  0.216667        0.216667                  64                           26      0.031414                         56                           7                         14                           17                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.629332 0.423003  0.466667              0.650000 -1.336809     -0.039915           -0.848813   0.250000 0.052632 0.086956           0.61             NaN           sharpe                 True          -0.010913   -0.018251   -1.142576  2.935035       0.500000            8                      8                  0.066667        0.066667                  63                            8      0.073816                         57                          24                         31                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.343963 0.507854  0.336735              0.397959  2.667616     -0.028775            2.175256   0.428571 0.160714 0.233766           0.64             NaN           sharpe                 True           0.091454    0.058072    1.326453 13.352688       0.666667           21                     21                  0.214286        0.214286                  53                           21      0.034889                         45                          10                         14                            8                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.4981 Â± 0.1361
AUCPR:                0.5309 Â± 0.1149
Accuracy:             0.4714 Â± 0.1245
Accuracy (threshold): 0.4816 Â± 0.1105
Sharpe Ratio:         0.8625 Â± 1.3749
Sharpe (threshold):   0.4438 Â± 1.1143
Net Sharpe:           -0.1925 Â± 1.1167
Net Return:           0.0041 Â± 0.0395
Turnover:             9.4905 Â± 5.4938
Trade Coverage:       0.1593 Â± 0.0651
EV Mean/Fold:         0.04341 Â± 0.01725
Coverage Ratio:       1.0000
Max Drawdown:         -0.0476 Â± 0.0189
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 813 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 813                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5439                         â•‘
â•‘ Average Accuracy: 0.5333                 â•‘
â•‘ Average Sharpe Ratio: 1.0413             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000607                      â•‘
â•‘ Accuracy Variance: 0.000496             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
distance_to_ma200    0.131057
         ema_long    0.112953
        ema_short    0.110047
             macd    0.102509
           ADX_14    0.099295
           roc_20    0.098857
    volatility_20    0.073069
            macds    0.063531
  close_vix_ratio    0.063408
              mfi    0.053477
   price_to_sma20    0.048934
              atr    0.042864
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - AAPL                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 56.7%                                              â”‚
â”‚    â€¢ Max Probability: 62.7%                                                  â”‚
â”‚    â€¢ Min Probability: 35.7%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 27.1% (Low consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $264.18                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $280.54 (+6.19%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $256.00 (-3.10%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 56.7%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 264.17999267578125,
  "profit_target": 280.5402180432999,
  "stop_loss": 255.99987999202193,
  "probability": 0.5672370741764704,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.01923 | Quality=0.067 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 12
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-10-03 (400 samples)
Valid: 2022-10-04 to 2023-05-01 (120 samples)
Class distribution in validation: {1.0: 79, 0.0: 41}
   âœ… Positions opened: 15/120 (12.5%)
   ğŸ” Filter rejections: threshold=61 | percentile=12 | technical=32 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=15/15 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.986

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-10-04 to 2023-05-01
      Winning trades: 14/15 (93.3% win rate)
      Losing trades: 1
      Avoided losses: 40 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000442
      Std dev: 0.005012
      Min/Max: -0.017751 / 0.034596
      Long positions: 15
  â†’ AUC: 0.5952 | AUCPR: 0.7432 | Accuracy: 0.6417 (0.4500 w/ threshold)
  â†’ Sharpe: 1.6080 (1.1483 w/ threshold) | Max DD: -0.0270
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-30 to 2023-05-01 (400 samples)
Valid: 2023-05-02 to 2023-12-08 (120 samples)
Class distribution in validation: {1.0: 68, 0.0: 52}
   âœ… Positions opened: 25/120 (20.8%)
   ğŸ” Filter rejections: threshold=52 | percentile=25 | technical=18 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=25/25 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-05-02 to 2023-12-08
      Winning trades: 13/25 (52.0% win rate)
      Losing trades: 12
      Avoided losses: 40 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000055
      Std dev: 0.005968
      Min/Max: -0.024606 / 0.046927
      Long positions: 25
  â†’ AUC: 0.4805 | AUCPR: 0.5366 | Accuracy: 0.5250 (0.4417 w/ threshold)
  â†’ Sharpe: 1.0170 (-0.0661 w/ threshold) | Max DD: -0.0703
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2022-02-03 to 2023-12-08 (400 samples)
Valid: 2023-12-11 to 2024-06-25 (120 samples)
Class distribution in validation: {1.0: 64, 0.0: 56}
   âœ… Positions opened: 15/120 (12.5%)
   ğŸ” Filter rejections: threshold=48 | percentile=17 | technical=40 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=15/15 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-12-11 to 2024-06-25
      Winning trades: 4/15 (26.7% win rate)
      Losing trades: 11
      Avoided losses: 45 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000020
      Std dev: 0.007323
      Min/Max: -0.019148 / 0.072649
      Long positions: 15
  â†’ AUC: 0.3320 | AUCPR: 0.4609 | Accuracy: 0.3000 (0.4083 w/ threshold)
  â†’ Sharpe: 0.1506 (-0.1279 w/ threshold) | Max DD: -0.0683
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-08-08 to 2024-06-25 (400 samples)
Valid: 2024-06-26 to 2024-12-19 (120 samples)
Class distribution in validation: {0.0: 67, 1.0: 53}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=55 | percentile=6 | technical=14 | regime_gate=19 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.842

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-06-26 to 2024-12-19
      Winning trades: 15/26 (57.7% win rate)
      Losing trades: 11
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000220
      Std dev: 0.004073
      Min/Max: -0.018217 / 0.018006
      Long positions: 26
  â†’ AUC: 0.6174 | AUCPR: 0.5262 | Accuracy: 0.5750 (0.5917 w/ threshold)
  â†’ Sharpe: 0.8582 (-1.1664 w/ threshold) | Max DD: -0.0542
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-02-22 to 2024-12-19 (400 samples)
Valid: 2024-12-20 to 2025-08-01 (120 samples)
Class distribution in validation: {0.0: 82, 1.0: 38}
   âœ… Positions opened: 8/120 (6.7%)
   ğŸ” Filter rejections: threshold=57 | percentile=24 | technical=31 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=8/8 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.734

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-12-20 to 2025-08-01
      Winning trades: 2/8 (25.0% win rate)
      Losing trades: 6
      Avoided losses: 76 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000091
      Std dev: 0.003185
      Min/Max: -0.019251 / 0.016019
      Long positions: 8
  â†’ AUC: 0.6327 | AUCPR: 0.4251 | Accuracy: 0.4667 (0.6500 w/ threshold)
  â†’ Sharpe: -0.9923 (-0.8488 w/ threshold) | Max DD: -0.0399
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-09-25 to 2025-08-01 (400 samples)
Valid: 2025-08-04 to 2026-01-29 (98 samples)
Class distribution in validation: {1.0: 56, 0.0: 42}
   âœ… Positions opened: 12/98 (12.2%)
   ğŸ” Filter rejections: threshold=49 | percentile=32 | technical=5 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=12/12 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.954

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-08-04 to 2026-01-29
      Winning trades: 6/12 (50.0% win rate)
      Losing trades: 6
      Avoided losses: 36 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 98/98):
      Mean return: 0.000166
      Std dev: 0.005377
      Min/Max: -0.030768 / 0.030552
      Long positions: 12
  â†’ Threshold (sharpe): BUY=0.6400 | Sharpe: 0.71 | WinRate: 40.0%
  â†’ AUC: 0.3359 | AUCPR: 0.5003 | Accuracy: 0.4184 (0.4286 w/ threshold)
  â†’ Sharpe: 3.2030 (0.2557 w/ threshold) | Max DD: -0.0517
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.595245 0.743158  0.641667              0.450000  1.607961     -0.026991            1.148262   0.933333 0.177215 0.297872           0.64             NaN           sharpe                 True           0.053027    0.033309    0.625647  7.887263       0.600000           15                     15                  0.125000        0.125000                  59                           15      0.054369                         61                          12                         32                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.480486 0.536575  0.525000              0.441667  1.016981     -0.070296           -0.066099   0.520000 0.191176 0.279569           0.64             NaN           sharpe                 True           0.006542   -0.043458   -1.162567 20.000000       0.440000           25                     25                  0.208333        0.208333                  68                           25      0.030729                         52                          25                         18                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.332031 0.460901  0.300000              0.408333  0.150613     -0.068339           -0.127873   0.266667 0.062500 0.101266           0.64             NaN           sharpe                 True           0.002445   -0.022555   -0.574079 10.000000       0.200000           15                     15                  0.125000        0.125000                  72                           15      0.035264                         48                          17                         40                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.617432 0.526193  0.575000              0.591667  0.858171     -0.054189           -1.166447   0.576923 0.283019 0.379746           0.64             NaN           sharpe                 True          -0.026386   -0.043236   -1.674362  6.739847       0.384615           26                     26                  0.216667        0.216667                  65                           26      0.031414                         55                           6                         14                           19                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.632702 0.425088  0.466667              0.650000 -0.992259     -0.039915           -0.848813   0.250000 0.052632 0.086956           0.61             NaN           sharpe                 True          -0.010913   -0.018251   -1.142576  2.935035       0.500000            8                      8                  0.066667        0.066667                  63                            8      0.073816                         57                          24                         31                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.335884 0.500310  0.418367              0.428571  3.203028     -0.051707            0.255686   0.500000 0.107143 0.176470           0.64             NaN           sharpe                 True           0.016265    0.001958   -0.177601  5.722581       0.500000           12                     20                  0.204082        0.122449                  49                           12      0.034889                         49                          32                          5                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.4990 Â± 0.1386
AUCPR:                0.5320 Â± 0.1115
Accuracy:             0.4878 Â± 0.1210
Accuracy (threshold): 0.4950 Â± 0.1002
Sharpe Ratio:         0.9741 Â± 1.4092
Sharpe (threshold):   -0.1342 Â± 0.8219
Net Sharpe:           -0.6843 Â± 0.8251
Net Return:           -0.0154 Â± 0.0293
Turnover:             8.8808 Â± 5.9294
Trade Coverage:       0.1440 Â± 0.0576
EV Mean/Fold:         0.04341 Â± 0.01725
Coverage Ratio:       1.0000
Max Drawdown:         -0.0519 Â± 0.0166
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 814 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 814                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5439                         â•‘
â•‘ Average Accuracy: 0.5333                 â•‘
â•‘ Average Sharpe Ratio: 1.0412             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000608                      â•‘
â•‘ Accuracy Variance: 0.000498             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
distance_to_ma200    0.109079
        ema_short    0.105411
           roc_20    0.105175
         ema_long    0.096055
           ADX_14    0.094870
             macd    0.087697
            macds    0.075841
              mfi    0.070497
              atr    0.070124
    volatility_20    0.067965
  close_vix_ratio    0.060492
   price_to_sma20    0.056794
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - AAPL                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 58.4%                                              â”‚
â”‚    â€¢ Max Probability: 60.7%                                                  â”‚
â”‚    â€¢ Min Probability: 51.1%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 9.6% (High consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $264.18                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $280.54 (+6.19%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $256.00 (-3.10%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 58.4%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 264.17999267578125,
  "profit_target": 280.5402180432999,
  "stop_loss": 255.99987999202193,
  "probability": 0.5844289362430573,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.02082 | Quality=0.084 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 12
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-10-03 (400 samples)
Valid: 2022-10-04 to 2023-05-01 (120 samples)
Class distribution in validation: {1.0: 79, 0.0: 41}
   âœ… Positions opened: 15/120 (12.5%)
   ğŸ” Filter rejections: threshold=61 | percentile=11 | technical=33 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=15/15 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.986

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-10-04 to 2023-05-01
      Winning trades: 14/15 (93.3% win rate)
      Losing trades: 1
      Avoided losses: 40 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000442
      Std dev: 0.005012
      Min/Max: -0.017751 / 0.034596
      Long positions: 15
  â†’ AUC: 0.5883 | AUCPR: 0.7350 | Accuracy: 0.6417 (0.4500 w/ threshold)
  â†’ Sharpe: 1.6080 (1.1483 w/ threshold) | Max DD: -0.0270
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-30 to 2023-05-01 (400 samples)
Valid: 2023-05-02 to 2023-12-08 (120 samples)
Class distribution in validation: {1.0: 68, 0.0: 52}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=52 | percentile=19 | technical=19 | regime_gate=4 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-05-02 to 2023-12-08
      Winning trades: 12/26 (46.2% win rate)
      Losing trades: 14
      Avoided losses: 38 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000061
      Std dev: 0.004463
      Min/Max: -0.024606 / 0.015465
      Long positions: 26
  â†’ AUC: 0.4673 | AUCPR: 0.5274 | Accuracy: 0.5333 (0.4167 w/ threshold)
  â†’ Sharpe: 1.1233 (-0.0657 w/ threshold) | Max DD: -0.0706
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2022-02-03 to 2023-12-08 (400 samples)
Valid: 2023-12-11 to 2024-06-25 (120 samples)
Class distribution in validation: {1.0: 64, 0.0: 56}
   âœ… Positions opened: 14/120 (11.7%)
   ğŸ” Filter rejections: threshold=48 | percentile=18 | technical=40 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=14/14 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-12-11 to 2024-06-25
      Winning trades: 4/14 (28.6% win rate)
      Losing trades: 10
      Avoided losses: 46 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000091
      Std dev: 0.007282
      Min/Max: -0.019148 / 0.072649
      Long positions: 14
  â†’ AUC: 0.3361 | AUCPR: 0.4641 | Accuracy: 0.3250 (0.4167 w/ threshold)
  â†’ Sharpe: 0.2945 (0.0246 w/ threshold) | Max DD: -0.0604
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-08-08 to 2024-06-25 (400 samples)
Valid: 2024-06-26 to 2024-12-19 (120 samples)
Class distribution in validation: {0.0: 67, 1.0: 53}
   âœ… Positions opened: 19/120 (15.8%)
   ğŸ” Filter rejections: threshold=58 | percentile=37 | technical=6 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=19/19 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.840

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-06-26 to 2024-12-19
      Winning trades: 13/19 (68.4% win rate)
      Losing trades: 6
      Avoided losses: 61 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000448
      Std dev: 0.003649
      Min/Max: -0.018217 / 0.018006
      Long positions: 19
  â†’ Threshold (sharpe): BUY=0.6400 | Sharpe: 1.56 | WinRate: 60.0%
  â†’ AUC: 0.6080 | AUCPR: 0.5366 | Accuracy: 0.6000 (0.6167 w/ threshold)
  â†’ Sharpe: 1.6216 (1.6038 w/ threshold) | Max DD: -0.0237
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-02-22 to 2024-12-19 (400 samples)
Valid: 2024-12-20 to 2025-08-01 (120 samples)
Class distribution in validation: {0.0: 82, 1.0: 38}
   âœ… Positions opened: 8/120 (6.7%)
   ğŸ” Filter rejections: threshold=55 | percentile=25 | technical=32 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=8/8 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.734

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-12-20 to 2025-08-01
      Winning trades: 2/8 (25.0% win rate)
      Losing trades: 6
      Avoided losses: 76 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000091
      Std dev: 0.003185
      Min/Max: -0.019251 / 0.016019
      Long positions: 8
  â†’ AUC: 0.6277 | AUCPR: 0.4205 | Accuracy: 0.4583 (0.6500 w/ threshold)
  â†’ Sharpe: -1.2420 (-0.8488 w/ threshold) | Max DD: -0.0399
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-09-25 to 2025-08-01 (400 samples)
Valid: 2025-08-04 to 2026-01-29 (98 samples)
Class distribution in validation: {1.0: 56, 0.0: 42}
   âœ… Positions opened: 6/98 (6.1%)
   ğŸ” Filter rejections: threshold=77 | percentile=13 | technical=2 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=6/6 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.954

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-08-04 to 2026-01-29
      Winning trades: 2/6 (33.3% win rate)
      Losing trades: 4
      Avoided losses: 38 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 98/98):
      Mean return: -0.000226
      Std dev: 0.004116
      Min/Max: -0.030768 / 0.016751
      Long positions: 6
  â†’ Threshold (sharpe): BUY=0.6100 | Sharpe: 1.63 | WinRate: 50.0%
  â†’ AUC: 0.3710 | AUCPR: 0.5133 | Accuracy: 0.3980 (0.4082 w/ threshold)
  â†’ Sharpe: 2.1862 (-1.1760 w/ threshold) | Max DD: -0.0517
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.588299 0.734954  0.641667              0.450000  1.607961     -0.026991            1.148262   0.933333 0.177215 0.297872           0.64             NaN           sharpe                 True           0.053027    0.033309    0.625647  7.887263       0.600000           15                     15                  0.125000        0.125000                  59                           15      0.054369                         61                          11                         33                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.467336 0.527369  0.533333              0.416667  1.123333     -0.070624           -0.065695   0.461538 0.176471 0.255319           0.64             NaN           sharpe                 True           0.007307   -0.042693   -1.537765 20.000000       0.538462           26                     26                  0.216667        0.216667                  68                           26      0.030729                         52                          19                         19                            4                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.336077 0.464142  0.325000              0.416667  0.294530     -0.060418            0.024552   0.285714 0.062500 0.102564           0.64             NaN           sharpe                 True           0.010875   -0.014125   -0.425440 10.000000       0.214286           14                     14                  0.116667        0.116667                  72                           14      0.035264                         48                          18                         40                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.607998 0.536624  0.600000              0.616667  1.621557     -0.023718            1.603800   0.684210 0.245283 0.361111           0.64             NaN           sharpe                 True           0.053763    0.020110    0.390384 13.461287       0.526316           19                     25                  0.208333        0.158333                  62                           19      0.031361                         58                          37                          6                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.627728 0.420536  0.458333              0.650000 -1.242025     -0.039915           -0.848813   0.250000 0.052632 0.086956           0.61             NaN           sharpe                 True          -0.010913   -0.018251   -1.142576  2.935035       0.500000            8                      8                  0.066667        0.066667                  65                            8      0.073816                         55                          25                         32                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.370961 0.513332  0.397959              0.408163  2.186201     -0.051707           -1.176027   0.333333 0.035714 0.064516           0.61             NaN           sharpe                 True          -0.022105   -0.026874   -1.359333  1.907527       0.333333            6                     10                  0.102041        0.061224                  21                            6      0.034889                         77                          13                          2                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.4997 Â± 0.1268
AUCPR:                0.5328 Â± 0.1083
Accuracy:             0.4927 Â± 0.1214
Accuracy (threshold): 0.4930 Â± 0.1101
Sharpe Ratio:         0.9319 Â± 1.2389
Sharpe (threshold):   0.1143 Â± 1.0882
Net Sharpe:           -0.5748 Â± 0.9231
Net Return:           -0.0081 Â± 0.0290
Turnover:             9.3652 Â± 6.7739
Trade Coverage:       0.1241 Â± 0.0584
EV Mean/Fold:         0.04340 Â± 0.01726
Coverage Ratio:       1.0000
Max Drawdown:         -0.0456 Â± 0.0187
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 815 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 815                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5438                         â•‘
â•‘ Average Accuracy: 0.5332                 â•‘
â•‘ Average Sharpe Ratio: 1.0410             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000610                      â•‘
â•‘ Accuracy Variance: 0.000499             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
distance_to_ma200    0.111655
           roc_20    0.110204
        ema_short    0.101479
         ema_long    0.095172
             macd    0.092785
           ADX_14    0.085552
  close_vix_ratio    0.084132
    volatility_20    0.068969
            macds    0.066547
              mfi    0.064813
   price_to_sma20    0.062893
              atr    0.055801
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - AAPL                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 57.6%                                              â”‚
â”‚    â€¢ Max Probability: 68.6%                                                  â”‚
â”‚    â€¢ Min Probability: 42.3%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 26.3% (Low consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $264.18                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $280.54 (+6.19%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $256.00 (-3.10%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 57.6%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 264.17999267578125,
  "profit_target": 280.5402180432999,
  "stop_loss": 255.99987999202193,
  "probability": 0.5763011028369268,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.02007 | Quality=0.076 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 11
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-10-03 (400 samples)
Valid: 2022-10-04 to 2023-05-01 (120 samples)
Class distribution in validation: {1.0: 79, 0.0: 41}
   âœ… Positions opened: 14/120 (11.7%)
   ğŸ” Filter rejections: threshold=57 | percentile=26 | technical=23 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=14/14 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.986

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-10-04 to 2023-05-01
      Winning trades: 13/14 (92.9% win rate)
      Losing trades: 1
      Avoided losses: 40 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000516
      Std dev: 0.005040
      Min/Max: -0.017751 / 0.034596
      Long positions: 14
  â†’ AUC: 0.6091 | AUCPR: 0.7519 | Accuracy: 0.5917 (0.4417 w/ threshold)
  â†’ Sharpe: 0.7430 (1.3737 w/ threshold) | Max DD: -0.0270
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-30 to 2023-05-01 (400 samples)
Valid: 2023-05-02 to 2023-12-08 (120 samples)
Class distribution in validation: {1.0: 68, 0.0: 52}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=52 | percentile=18 | technical=19 | regime_gate=5 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-05-02 to 2023-12-08
      Winning trades: 11/26 (42.3% win rate)
      Losing trades: 15
      Avoided losses: 37 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000058
      Std dev: 0.004462
      Min/Max: -0.024606 / 0.015465
      Long positions: 26
  â†’ AUC: 0.4690 | AUCPR: 0.5256 | Accuracy: 0.5333 (0.4000 w/ threshold)
  â†’ Sharpe: 1.1233 (-0.0776 w/ threshold) | Max DD: -0.0700
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2022-02-03 to 2023-12-08 (400 samples)
Valid: 2023-12-11 to 2024-06-25 (120 samples)
Class distribution in validation: {1.0: 64, 0.0: 56}
   âœ… Positions opened: 15/120 (12.5%)
   ğŸ” Filter rejections: threshold=48 | percentile=17 | technical=40 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=15/15 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-12-11 to 2024-06-25
      Winning trades: 4/15 (26.7% win rate)
      Losing trades: 11
      Avoided losses: 45 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000020
      Std dev: 0.007323
      Min/Max: -0.019148 / 0.072649
      Long positions: 15
  â†’ AUC: 0.3331 | AUCPR: 0.4619 | Accuracy: 0.3083 (0.4083 w/ threshold)
  â†’ Sharpe: 0.2008 (-0.1279 w/ threshold) | Max DD: -0.0683
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-08-08 to 2024-06-25 (400 samples)
Valid: 2024-06-26 to 2024-12-19 (120 samples)
Class distribution in validation: {0.0: 67, 1.0: 53}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=56 | percentile=7 | technical=14 | regime_gate=17 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.842

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-06-26 to 2024-12-19
      Winning trades: 15/26 (57.7% win rate)
      Losing trades: 11
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000126
      Std dev: 0.004370
      Min/Max: -0.018217 / 0.018006
      Long positions: 26
  â†’ AUC: 0.6039 | AUCPR: 0.5151 | Accuracy: 0.5917 (0.5917 w/ threshold)
  â†’ Sharpe: 1.7772 (0.1680 w/ threshold) | Max DD: -0.0517
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-02-22 to 2024-12-19 (400 samples)
Valid: 2024-12-20 to 2025-08-01 (120 samples)
Class distribution in validation: {0.0: 82, 1.0: 38}
   âœ… Positions opened: 8/120 (6.7%)
   ğŸ” Filter rejections: threshold=57 | percentile=24 | technical=31 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=8/8 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.734

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-12-20 to 2025-08-01
      Winning trades: 2/8 (25.0% win rate)
      Losing trades: 6
      Avoided losses: 76 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000091
      Std dev: 0.003185
      Min/Max: -0.019251 / 0.016019
      Long positions: 8
  â†’ AUC: 0.6293 | AUCPR: 0.4230 | Accuracy: 0.4667 (0.6500 w/ threshold)
  â†’ Sharpe: -1.3368 (-0.8488 w/ threshold) | Max DD: -0.0399
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-09-25 to 2025-08-01 (400 samples)
Valid: 2025-08-04 to 2026-01-29 (98 samples)
Class distribution in validation: {1.0: 56, 0.0: 42}
   âœ… Positions opened: 21/98 (21.4%)
   ğŸ” Filter rejections: threshold=45 | percentile=10 | technical=14 | regime_gate=8 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=21/21 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.954

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-08-04 to 2026-01-29
      Winning trades: 9/21 (42.9% win rate)
      Losing trades: 12
      Avoided losses: 30 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 98/98):
      Mean return: 0.000933
      Std dev: 0.006231
      Min/Max: -0.017331 / 0.037615
      Long positions: 21
  â†’ AUC: 0.3440 | AUCPR: 0.5079 | Accuracy: 0.3367 (0.3980 w/ threshold)
  â†’ Sharpe: 2.6676 (2.1753 w/ threshold) | Max DD: -0.0288
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.609139 0.751852  0.591667              0.441667  0.743034     -0.026991            1.373673   0.928571 0.164557 0.279570           0.64             NaN           sharpe                 True           0.061863    0.047075    0.985919  5.915447       0.642857           14                     14                  0.116667        0.116667                  63                           14      0.054369                         57                          26                         23                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.469033 0.525633  0.533333              0.400000  1.123333     -0.069979           -0.077578   0.423077 0.161765 0.234042           0.64             NaN           sharpe                 True           0.006907   -0.038093   -1.403659 18.000000       0.576923           26                     26                  0.216667        0.216667                  68                           26      0.030729                         52                          18                         19                            5                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.333147 0.461907  0.308333              0.408333  0.200770     -0.068339           -0.127873   0.266667 0.062500 0.101266           0.64             NaN           sharpe                 True           0.002445   -0.022555   -0.574079 10.000000       0.200000           15                     15                  0.125000        0.125000                  72                           15      0.035264                         48                          17                         40                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.603914 0.515104  0.591667              0.591667  1.777202     -0.051720            0.168025   0.576923 0.283019 0.379746           0.64             NaN           sharpe                 True           0.015074   -0.001776   -0.346992  6.739847       0.461538           26                     26                  0.216667        0.216667                  64                           26      0.031414                         56                           7                         14                           17                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.629332 0.423003  0.466667              0.650000 -1.336809     -0.039915           -0.848813   0.250000 0.052632 0.086956           0.61             NaN           sharpe                 True          -0.010913   -0.018251   -1.142576  2.935035       0.500000            8                      8                  0.066667        0.066667                  63                            8      0.073816                         57                          24                         31                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.343963 0.507854  0.336735              0.397959  2.667616     -0.028775            2.175256   0.428571 0.160714 0.233766           0.64             NaN           sharpe                 True           0.091454    0.058072    1.326453 13.352688       0.666667           21                     21                  0.214286        0.214286                  53                           21      0.034889                         45                          10                         14                            8                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.4981 Â± 0.1361
AUCPR:                0.5309 Â± 0.1149
Accuracy:             0.4714 Â± 0.1245
Accuracy (threshold): 0.4816 Â± 0.1105
Sharpe Ratio:         0.8625 Â± 1.3749
Sharpe (threshold):   0.4438 Â± 1.1143
Net Sharpe:           -0.1925 Â± 1.1167
Net Return:           0.0041 Â± 0.0395
Turnover:             9.4905 Â± 5.4938
Trade Coverage:       0.1593 Â± 0.0651
EV Mean/Fold:         0.04341 Â± 0.01725
Coverage Ratio:       1.0000
Max Drawdown:         -0.0476 Â± 0.0189
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 816 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 816                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5438                         â•‘
â•‘ Average Accuracy: 0.5331                 â•‘
â•‘ Average Sharpe Ratio: 1.0408             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000612                      â•‘
â•‘ Accuracy Variance: 0.000503             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
distance_to_ma200    0.131057
         ema_long    0.112953
        ema_short    0.110047
             macd    0.102509
           ADX_14    0.099295
           roc_20    0.098857
    volatility_20    0.073069
            macds    0.063531
  close_vix_ratio    0.063408
              mfi    0.053477
   price_to_sma20    0.048934
              atr    0.042864
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - AAPL                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 56.7%                                              â”‚
â”‚    â€¢ Max Probability: 62.7%                                                  â”‚
â”‚    â€¢ Min Probability: 35.7%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 27.1% (Low consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $264.18                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $280.54 (+6.19%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $256.00 (-3.10%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 56.7%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 264.17999267578125,
  "profit_target": 280.5402180432999,
  "stop_loss": 255.99987999202193,
  "probability": 0.5672370741764704,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.01923 | Quality=0.067 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 11
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-10-03 (400 samples)
Valid: 2022-10-04 to 2023-05-01 (120 samples)
Class distribution in validation: {1.0: 79, 0.0: 41}
   âœ… Positions opened: 15/120 (12.5%)
   ğŸ” Filter rejections: threshold=61 | percentile=12 | technical=32 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=15/15 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.986

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-10-04 to 2023-05-01
      Winning trades: 14/15 (93.3% win rate)
      Losing trades: 1
      Avoided losses: 40 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000442
      Std dev: 0.005012
      Min/Max: -0.017751 / 0.034596
      Long positions: 15
  â†’ AUC: 0.5952 | AUCPR: 0.7432 | Accuracy: 0.6417 (0.4500 w/ threshold)
  â†’ Sharpe: 1.6080 (1.1483 w/ threshold) | Max DD: -0.0270
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-30 to 2023-05-01 (400 samples)
Valid: 2023-05-02 to 2023-12-08 (120 samples)
Class distribution in validation: {1.0: 68, 0.0: 52}
   âœ… Positions opened: 25/120 (20.8%)
   ğŸ” Filter rejections: threshold=52 | percentile=25 | technical=18 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=25/25 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-05-02 to 2023-12-08
      Winning trades: 13/25 (52.0% win rate)
      Losing trades: 12
      Avoided losses: 40 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000055
      Std dev: 0.005968
      Min/Max: -0.024606 / 0.046927
      Long positions: 25
  â†’ AUC: 0.4805 | AUCPR: 0.5366 | Accuracy: 0.5250 (0.4417 w/ threshold)
  â†’ Sharpe: 1.0170 (-0.0661 w/ threshold) | Max DD: -0.0703
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2022-02-03 to 2023-12-08 (400 samples)
Valid: 2023-12-11 to 2024-06-25 (120 samples)
Class distribution in validation: {1.0: 64, 0.0: 56}
   âœ… Positions opened: 15/120 (12.5%)
   ğŸ” Filter rejections: threshold=48 | percentile=17 | technical=40 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=15/15 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-12-11 to 2024-06-25
      Winning trades: 4/15 (26.7% win rate)
      Losing trades: 11
      Avoided losses: 45 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000020
      Std dev: 0.007323
      Min/Max: -0.019148 / 0.072649
      Long positions: 15
  â†’ AUC: 0.3320 | AUCPR: 0.4609 | Accuracy: 0.3000 (0.4083 w/ threshold)
  â†’ Sharpe: 0.1506 (-0.1279 w/ threshold) | Max DD: -0.0683
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-08-08 to 2024-06-25 (400 samples)
Valid: 2024-06-26 to 2024-12-19 (120 samples)
Class distribution in validation: {0.0: 67, 1.0: 53}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=55 | percentile=6 | technical=14 | regime_gate=19 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.842

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-06-26 to 2024-12-19
      Winning trades: 15/26 (57.7% win rate)
      Losing trades: 11
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000220
      Std dev: 0.004073
      Min/Max: -0.018217 / 0.018006
      Long positions: 26
  â†’ AUC: 0.6174 | AUCPR: 0.5262 | Accuracy: 0.5750 (0.5917 w/ threshold)
  â†’ Sharpe: 0.8582 (-1.1664 w/ threshold) | Max DD: -0.0542
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-02-22 to 2024-12-19 (400 samples)
Valid: 2024-12-20 to 2025-08-01 (120 samples)
Class distribution in validation: {0.0: 82, 1.0: 38}
   âœ… Positions opened: 8/120 (6.7%)
   ğŸ” Filter rejections: threshold=57 | percentile=24 | technical=31 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=8/8 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.734

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-12-20 to 2025-08-01
      Winning trades: 2/8 (25.0% win rate)
      Losing trades: 6
      Avoided losses: 76 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000091
      Std dev: 0.003185
      Min/Max: -0.019251 / 0.016019
      Long positions: 8
  â†’ AUC: 0.6327 | AUCPR: 0.4251 | Accuracy: 0.4667 (0.6500 w/ threshold)
  â†’ Sharpe: -0.9923 (-0.8488 w/ threshold) | Max DD: -0.0399
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-09-25 to 2025-08-01 (400 samples)
Valid: 2025-08-04 to 2026-01-29 (98 samples)
Class distribution in validation: {1.0: 56, 0.0: 42}
   âœ… Positions opened: 12/98 (12.2%)
   ğŸ” Filter rejections: threshold=49 | percentile=32 | technical=5 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=12/12 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.954

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-08-04 to 2026-01-29
      Winning trades: 6/12 (50.0% win rate)
      Losing trades: 6
      Avoided losses: 36 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 98/98):
      Mean return: 0.000166
      Std dev: 0.005377
      Min/Max: -0.030768 / 0.030552
      Long positions: 12
  â†’ Threshold (sharpe): BUY=0.6400 | Sharpe: 0.71 | WinRate: 40.0%
  â†’ AUC: 0.3359 | AUCPR: 0.5003 | Accuracy: 0.4184 (0.4286 w/ threshold)
  â†’ Sharpe: 3.2030 (0.2557 w/ threshold) | Max DD: -0.0517
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.595245 0.743158  0.641667              0.450000  1.607961     -0.026991            1.148262   0.933333 0.177215 0.297872           0.64             NaN           sharpe                 True           0.053027    0.033309    0.625647  7.887263       0.600000           15                     15                  0.125000        0.125000                  59                           15      0.054369                         61                          12                         32                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.480486 0.536575  0.525000              0.441667  1.016981     -0.070296           -0.066099   0.520000 0.191176 0.279569           0.64             NaN           sharpe                 True           0.006542   -0.043458   -1.162567 20.000000       0.440000           25                     25                  0.208333        0.208333                  68                           25      0.030729                         52                          25                         18                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.332031 0.460901  0.300000              0.408333  0.150613     -0.068339           -0.127873   0.266667 0.062500 0.101266           0.64             NaN           sharpe                 True           0.002445   -0.022555   -0.574079 10.000000       0.200000           15                     15                  0.125000        0.125000                  72                           15      0.035264                         48                          17                         40                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.617432 0.526193  0.575000              0.591667  0.858171     -0.054189           -1.166447   0.576923 0.283019 0.379746           0.64             NaN           sharpe                 True          -0.026386   -0.043236   -1.674362  6.739847       0.384615           26                     26                  0.216667        0.216667                  65                           26      0.031414                         55                           6                         14                           19                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.632702 0.425088  0.466667              0.650000 -0.992259     -0.039915           -0.848813   0.250000 0.052632 0.086956           0.61             NaN           sharpe                 True          -0.010913   -0.018251   -1.142576  2.935035       0.500000            8                      8                  0.066667        0.066667                  63                            8      0.073816                         57                          24                         31                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.335884 0.500310  0.418367              0.428571  3.203028     -0.051707            0.255686   0.500000 0.107143 0.176470           0.64             NaN           sharpe                 True           0.016265    0.001958   -0.177601  5.722581       0.500000           12                     20                  0.204082        0.122449                  49                           12      0.034889                         49                          32                          5                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.4990 Â± 0.1386
AUCPR:                0.5320 Â± 0.1115
Accuracy:             0.4878 Â± 0.1210
Accuracy (threshold): 0.4950 Â± 0.1002
Sharpe Ratio:         0.9741 Â± 1.4092
Sharpe (threshold):   -0.1342 Â± 0.8219
Net Sharpe:           -0.6843 Â± 0.8251
Net Return:           -0.0154 Â± 0.0293
Turnover:             8.8808 Â± 5.9294
Trade Coverage:       0.1440 Â± 0.0576
EV Mean/Fold:         0.04341 Â± 0.01725
Coverage Ratio:       1.0000
Max Drawdown:         -0.0519 Â± 0.0166
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 817 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 817                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5437                         â•‘
â•‘ Average Accuracy: 0.5331                 â•‘
â•‘ Average Sharpe Ratio: 1.0407             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000614                      â•‘
â•‘ Accuracy Variance: 0.000505             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
distance_to_ma200    0.109079
        ema_short    0.105411
           roc_20    0.105175
         ema_long    0.096055
           ADX_14    0.094870
             macd    0.087697
            macds    0.075841
              mfi    0.070497
              atr    0.070124
    volatility_20    0.067965
  close_vix_ratio    0.060492
   price_to_sma20    0.056794
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - AAPL                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 58.4%                                              â”‚
â”‚    â€¢ Max Probability: 60.7%                                                  â”‚
â”‚    â€¢ Min Probability: 51.1%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 9.6% (High consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $264.18                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $280.54 (+6.19%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $256.00 (-3.10%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 58.4%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 264.17999267578125,
  "profit_target": 280.5402180432999,
  "stop_loss": 255.99987999202193,
  "probability": 0.5844289362430573,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.02082 | Quality=0.084 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 11
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-10-03 (400 samples)
Valid: 2022-10-04 to 2023-05-01 (120 samples)
Class distribution in validation: {1.0: 79, 0.0: 41}
   âœ… Positions opened: 15/120 (12.5%)
   ğŸ” Filter rejections: threshold=61 | percentile=11 | technical=33 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=15/15 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.986

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-10-04 to 2023-05-01
      Winning trades: 14/15 (93.3% win rate)
      Losing trades: 1
      Avoided losses: 40 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000442
      Std dev: 0.005012
      Min/Max: -0.017751 / 0.034596
      Long positions: 15
  â†’ AUC: 0.5883 | AUCPR: 0.7350 | Accuracy: 0.6417 (0.4500 w/ threshold)
  â†’ Sharpe: 1.6080 (1.1483 w/ threshold) | Max DD: -0.0270
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-30 to 2023-05-01 (400 samples)
Valid: 2023-05-02 to 2023-12-08 (120 samples)
Class distribution in validation: {1.0: 68, 0.0: 52}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=52 | percentile=19 | technical=19 | regime_gate=4 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-05-02 to 2023-12-08
      Winning trades: 12/26 (46.2% win rate)
      Losing trades: 14
      Avoided losses: 38 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000061
      Std dev: 0.004463
      Min/Max: -0.024606 / 0.015465
      Long positions: 26
  â†’ AUC: 0.4673 | AUCPR: 0.5274 | Accuracy: 0.5333 (0.4167 w/ threshold)
  â†’ Sharpe: 1.1233 (-0.0657 w/ threshold) | Max DD: -0.0706
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2022-02-03 to 2023-12-08 (400 samples)
Valid: 2023-12-11 to 2024-06-25 (120 samples)
Class distribution in validation: {1.0: 64, 0.0: 56}
   âœ… Positions opened: 14/120 (11.7%)
   ğŸ” Filter rejections: threshold=48 | percentile=18 | technical=40 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=14/14 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-12-11 to 2024-06-25
      Winning trades: 4/14 (28.6% win rate)
      Losing trades: 10
      Avoided losses: 46 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000091
      Std dev: 0.007282
      Min/Max: -0.019148 / 0.072649
      Long positions: 14
  â†’ AUC: 0.3361 | AUCPR: 0.4641 | Accuracy: 0.3250 (0.4167 w/ threshold)
  â†’ Sharpe: 0.2945 (0.0246 w/ threshold) | Max DD: -0.0604
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-08-08 to 2024-06-25 (400 samples)
Valid: 2024-06-26 to 2024-12-19 (120 samples)
Class distribution in validation: {0.0: 67, 1.0: 53}
   âœ… Positions opened: 19/120 (15.8%)
   ğŸ” Filter rejections: threshold=58 | percentile=37 | technical=6 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=19/19 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.840

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-06-26 to 2024-12-19
      Winning trades: 13/19 (68.4% win rate)
      Losing trades: 6
      Avoided losses: 61 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000448
      Std dev: 0.003649
      Min/Max: -0.018217 / 0.018006
      Long positions: 19
  â†’ Threshold (sharpe): BUY=0.6400 | Sharpe: 1.56 | WinRate: 60.0%
  â†’ AUC: 0.6080 | AUCPR: 0.5366 | Accuracy: 0.6000 (0.6167 w/ threshold)
  â†’ Sharpe: 1.6216 (1.6038 w/ threshold) | Max DD: -0.0237
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-02-22 to 2024-12-19 (400 samples)
Valid: 2024-12-20 to 2025-08-01 (120 samples)
Class distribution in validation: {0.0: 82, 1.0: 38}
   âœ… Positions opened: 8/120 (6.7%)
   ğŸ” Filter rejections: threshold=55 | percentile=25 | technical=32 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=8/8 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.734

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-12-20 to 2025-08-01
      Winning trades: 2/8 (25.0% win rate)
      Losing trades: 6
      Avoided losses: 76 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000091
      Std dev: 0.003185
      Min/Max: -0.019251 / 0.016019
      Long positions: 8
  â†’ AUC: 0.6277 | AUCPR: 0.4205 | Accuracy: 0.4583 (0.6500 w/ threshold)
  â†’ Sharpe: -1.2420 (-0.8488 w/ threshold) | Max DD: -0.0399
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-09-25 to 2025-08-01 (400 samples)
Valid: 2025-08-04 to 2026-01-29 (98 samples)
Class distribution in validation: {1.0: 56, 0.0: 42}
   âœ… Positions opened: 6/98 (6.1%)
   ğŸ” Filter rejections: threshold=77 | percentile=13 | technical=2 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=6/6 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.954

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-08-04 to 2026-01-29
      Winning trades: 2/6 (33.3% win rate)
      Losing trades: 4
      Avoided losses: 38 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 98/98):
      Mean return: -0.000226
      Std dev: 0.004116
      Min/Max: -0.030768 / 0.016751
      Long positions: 6
  â†’ Threshold (sharpe): BUY=0.6100 | Sharpe: 1.63 | WinRate: 50.0%
  â†’ AUC: 0.3710 | AUCPR: 0.5133 | Accuracy: 0.3980 (0.4082 w/ threshold)
  â†’ Sharpe: 2.1862 (-1.1760 w/ threshold) | Max DD: -0.0517
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.588299 0.734954  0.641667              0.450000  1.607961     -0.026991            1.148262   0.933333 0.177215 0.297872           0.64             NaN           sharpe                 True           0.053027    0.033309    0.625647  7.887263       0.600000           15                     15                  0.125000        0.125000                  59                           15      0.054369                         61                          11                         33                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.467336 0.527369  0.533333              0.416667  1.123333     -0.070624           -0.065695   0.461538 0.176471 0.255319           0.64             NaN           sharpe                 True           0.007307   -0.042693   -1.537765 20.000000       0.538462           26                     26                  0.216667        0.216667                  68                           26      0.030729                         52                          19                         19                            4                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.336077 0.464142  0.325000              0.416667  0.294530     -0.060418            0.024552   0.285714 0.062500 0.102564           0.64             NaN           sharpe                 True           0.010875   -0.014125   -0.425440 10.000000       0.214286           14                     14                  0.116667        0.116667                  72                           14      0.035264                         48                          18                         40                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.607998 0.536624  0.600000              0.616667  1.621557     -0.023718            1.603800   0.684210 0.245283 0.361111           0.64             NaN           sharpe                 True           0.053763    0.020110    0.390384 13.461287       0.526316           19                     25                  0.208333        0.158333                  62                           19      0.031361                         58                          37                          6                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.627728 0.420536  0.458333              0.650000 -1.242025     -0.039915           -0.848813   0.250000 0.052632 0.086956           0.61             NaN           sharpe                 True          -0.010913   -0.018251   -1.142576  2.935035       0.500000            8                      8                  0.066667        0.066667                  65                            8      0.073816                         55                          25                         32                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.370961 0.513332  0.397959              0.408163  2.186201     -0.051707           -1.176027   0.333333 0.035714 0.064516           0.61             NaN           sharpe                 True          -0.022105   -0.026874   -1.359333  1.907527       0.333333            6                     10                  0.102041        0.061224                  21                            6      0.034889                         77                          13                          2                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.4997 Â± 0.1268
AUCPR:                0.5328 Â± 0.1083
Accuracy:             0.4927 Â± 0.1214
Accuracy (threshold): 0.4930 Â± 0.1101
Sharpe Ratio:         0.9319 Â± 1.2389
Sharpe (threshold):   0.1143 Â± 1.0882
Net Sharpe:           -0.5748 Â± 0.9231
Net Return:           -0.0081 Â± 0.0290
Turnover:             9.3652 Â± 6.7739
Trade Coverage:       0.1241 Â± 0.0584
EV Mean/Fold:         0.04340 Â± 0.01726
Coverage Ratio:       1.0000
Max Drawdown:         -0.0456 Â± 0.0187
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 818 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 818                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5437                         â•‘
â•‘ Average Accuracy: 0.5330                 â•‘
â•‘ Average Sharpe Ratio: 1.0406             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000615                      â•‘
â•‘ Accuracy Variance: 0.000507             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
distance_to_ma200    0.111655
           roc_20    0.110204
        ema_short    0.101479
         ema_long    0.095172
             macd    0.092785
           ADX_14    0.085552
  close_vix_ratio    0.084132
    volatility_20    0.068969
            macds    0.066547
              mfi    0.064813
   price_to_sma20    0.062893
              atr    0.055801
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - AAPL                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 57.6%                                              â”‚
â”‚    â€¢ Max Probability: 68.6%                                                  â”‚
â”‚    â€¢ Min Probability: 42.3%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 26.3% (Low consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $264.18                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $280.54 (+6.19%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $256.00 (-3.10%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 57.6%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 264.17999267578125,
  "profit_target": 280.5402180432999,
  "stop_loss": 255.99987999202193,
  "probability": 0.5763011028369268,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.02007 | Quality=0.076 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 13
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-10-11 (400 samples)
Valid: 2022-10-12 to 2023-05-23 (120 samples)
Class distribution in validation: {1.0: 98, 0.0: 22}
   âœ… Positions opened: 0/120 (0.0%)
   ğŸ” Filter rejections: threshold=64 | percentile=33 | technical=23 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=0/0 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.000
âš ï¸ Fold 1: Skipped from aggregate metrics - insufficient trades (0 < 3)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-16 to 2023-05-23 (400 samples)
Valid: 2023-05-24 to 2024-01-02 (120 samples)
Class distribution in validation: {0.0: 61, 1.0: 59}
   âœ… Positions opened: 5/120 (4.2%)
   ğŸ” Filter rejections: threshold=68 | percentile=36 | technical=11 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=5/5 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.693

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-05-24 to 2024-01-02
      Winning trades: 2/5 (40.0% win rate)
      Losing trades: 3
      Avoided losses: 58 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000079
      Std dev: 0.003286
      Min/Max: -0.026344 / 0.015470
      Long positions: 5
  â†’ Threshold (sharpe): BUY=0.6100 | Sharpe: 1.43 | WinRate: 50.0%
  â†’ AUC: 0.5392 | AUCPR: 0.5197 | Accuracy: 0.5333 (0.5000 w/ threshold)
  â†’ Sharpe: 2.0269 (-0.0026 w/ threshold) | Max DD: -0.0263
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2021-12-30 to 2024-01-02 (400 samples)
Valid: 2024-01-03 to 2024-07-25 (120 samples)
Class distribution in validation: {1.0: 78, 0.0: 42}
   âœ… Positions opened: 9/120 (7.5%)
   ğŸ” Filter rejections: threshold=89 | percentile=18 | technical=4 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=9/9 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.250

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-01-03 to 2024-07-25
      Winning trades: 4/9 (44.4% win rate)
      Losing trades: 5
      Avoided losses: 37 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000051
      Std dev: 0.002871
      Min/Max: -0.025012 / 0.009435
      Long positions: 9
  â†’ Threshold (sharpe): BUY=0.6100 | Sharpe: 0.78 | WinRate: 63.2%
  â†’ AUC: 0.3506 | AUCPR: 0.5731 | Accuracy: 0.3667 (0.3417 w/ threshold)
  â†’ Sharpe: 0.9015 (-0.7190 w/ threshold) | Max DD: -0.0382
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-07-29 to 2024-07-25 (400 samples)
Valid: 2024-07-26 to 2025-02-06 (120 samples)
Class distribution in validation: {1.0: 67, 0.0: 53}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=52 | percentile=7 | technical=19 | regime_gate=16 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.490

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-07-26 to 2025-02-06
      Winning trades: 18/26 (69.2% win rate)
      Losing trades: 8
      Avoided losses: 45 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000338
      Std dev: 0.009782
      Min/Max: -0.083160 / 0.021828
      Long positions: 26
  â†’ AUC: 0.4638 | AUCPR: 0.5265 | Accuracy: 0.5083 (0.5250 w/ threshold)
  â†’ Sharpe: -0.6822 (-0.6774 w/ threshold) | Max DD: -0.1026
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-03-03 to 2025-02-06 (400 samples)
Valid: 2025-02-07 to 2025-09-04 (120 samples)
Class distribution in validation: {0.0: 62, 1.0: 58}
   âœ… Positions opened: 21/120 (17.5%)
   ğŸ” Filter rejections: threshold=59 | percentile=17 | technical=23 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=21/21 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.781

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-02-07 to 2025-09-04
      Winning trades: 10/21 (47.6% win rate)
      Losing trades: 11
      Avoided losses: 51 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000114
      Std dev: 0.004190
      Min/Max: -0.027323 / 0.014958
      Long positions: 21
  â†’ AUC: 0.5487 | AUCPR: 0.4800 | Accuracy: 0.5833 (0.5083 w/ threshold)
  â†’ Sharpe: 1.3896 (0.1324 w/ threshold) | Max DD: -0.0321
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-10-17 to 2025-09-04 (400 samples)
Valid: 2025-09-05 to 2026-01-29 (93 samples)
Class distribution in validation: {0.0: 56, 1.0: 37}
   âœ… Positions opened: 20/93 (21.5%)
   ğŸ” Filter rejections: threshold=43 | percentile=15 | technical=15 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=20/20 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.999

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-09-05 to 2026-01-29
      Winning trades: 16/20 (80.0% win rate)
      Losing trades: 4
      Avoided losses: 52 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 93/93):
      Mean return: 0.001753
      Std dev: 0.010929
      Min/Max: -0.043764 / 0.049760
      Long positions: 20
  â†’ AUC: 0.8234 | AUCPR: 0.6845 | Accuracy: 0.6882 (0.7312 w/ threshold)
  â†’ Sharpe: 3.9034 (2.4316 w/ threshold) | Max DD: -0.0476
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 5 | Skipped: 1

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    2 0.539178 0.519720  0.533333              0.500000  2.026912     -0.026344           -0.002648   0.400000 0.033898 0.062500           0.61             NaN           sharpe                 True           0.009458   -0.007863   -0.698724  6.928403       0.600000            5                     14                  0.116667        0.041667                  52                            5      0.082710                         68                          36                         11                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.350580 0.573069  0.366667              0.341667  0.901521     -0.038160           -0.719037   0.444444 0.051282 0.091954           0.61             NaN           sharpe                 True          -0.006081   -0.009831   -0.894429  1.500000       0.555556            9                     19                  0.158333        0.075000                  31                            9      0.092605                         89                          18                          4                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.463813 0.526491  0.508333              0.525000 -0.682180     -0.102605           -0.677436   0.692308 0.268657 0.387096           0.64             NaN           sharpe                 True          -0.040569   -0.043020   -0.710083  0.980191       0.500000           26                     26                  0.216667        0.216667                  68                           26      0.094759                         52                           7                         19                           16                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.548665 0.480026  0.583333              0.508333  1.389607     -0.032075            0.132378   0.476190 0.172414 0.253164           0.64             NaN           sharpe                 True           0.013716    0.000054   -0.301468  5.464944       0.571429           21                     21                  0.175000        0.175000                  61                           21      0.080742                         59                          17                         23                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.823359 0.684534  0.688172              0.731183  3.903353     -0.047609            2.431564   0.800000 0.432432 0.561403           0.64             NaN           sharpe                 True           0.163066    0.138096    2.010917  9.987975       0.650000           20                     20                  0.215054        0.215054                  50                           20      0.050373                         43                          15                         15                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- SKIPPED FOLDS REPORT ---
Fold 1: insufficient_trades

--- AGGREGATE STATISTICS ---
AUC:                  0.5451 Â± 0.1746
AUCPR:                0.5568 Â± 0.0787
Accuracy:             0.5360 Â± 0.1171
Accuracy (threshold): 0.5212 Â± 0.1387
Sharpe Ratio:         1.5078 Â± 1.6723
Sharpe (threshold):   0.2330 Â± 1.2879
Net Sharpe:           -0.1188 Â± 1.2100
Net Return:           0.0155 Â± 0.0705
Turnover:             4.9723 Â± 3.7822
Trade Coverage:       0.1447 Â± 0.0814
EV Mean/Fold:         0.08024 Â± 0.01776
Coverage Ratio:       0.8333
Max Drawdown:         -0.0494 Â± 0.0308
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 819 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 819                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5437                         â•‘
â•‘ Average Accuracy: 0.5330                 â•‘
â•‘ Average Sharpe Ratio: 1.0412             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000614                      â•‘
â•‘ Accuracy Variance: 0.000506             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
           roc_20    0.132168
  close_vix_ratio    0.130789
              atr    0.122061
        ema_short    0.119977
         ema_long    0.094073
             macd    0.078267
    volatility_20    0.068413
distance_to_ma200    0.064838
            macds    0.059868
           ADX_14    0.051073
   price_to_sma20    0.039679
              mfi    0.038794
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - NVDA                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 5                                                     â”‚
â”‚    â€¢ Average Probability: 55.5%                                              â”‚
â”‚    â€¢ Max Probability: 59.1%                                                  â”‚
â”‚    â€¢ Min Probability: 50.9%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 8.3% (High consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $177.19                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $192.57 (+8.68%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $169.50 (-4.34%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 55.5%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 177.19000244140625,
  "profit_target": 192.5698729315299,
  "stop_loss": 169.50006719634445,
  "probability": 0.5548900127410888,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.02635 | Quality=0.055 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 13
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-10-11 (400 samples)
Valid: 2022-10-12 to 2023-05-23 (120 samples)
Class distribution in validation: {1.0: 98, 0.0: 22}
   âœ… Positions opened: 12/120 (10.0%)
   ğŸ” Filter rejections: threshold=61 | percentile=9 | technical=38 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=12/12 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-10-12 to 2023-05-23
      Winning trades: 7/12 (58.3% win rate)
      Losing trades: 5
      Avoided losses: 17 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000005
      Std dev: 0.007609
      Min/Max: -0.040851 / 0.040563
      Long positions: 12
  â†’ AUC: 0.2720 | AUCPR: 0.7266 | Accuracy: 0.4833 (0.2000 w/ threshold)
  â†’ Sharpe: 2.6448 (-0.1755 w/ threshold) | Max DD: -0.0875
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-16 to 2023-05-23 (400 samples)
Valid: 2023-05-24 to 2024-01-02 (120 samples)
Class distribution in validation: {0.0: 61, 1.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=58 | percentile=17 | technical=18 | regime_gate=1 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.728

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-05-24 to 2024-01-02
      Winning trades: 16/26 (61.5% win rate)
      Losing trades: 10
      Avoided losses: 51 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.001523
      Std dev: 0.008045
      Min/Max: -0.026344 / 0.061707
      Long positions: 26
  â†’ AUC: 0.5568 | AUCPR: 0.5444 | Accuracy: 0.5167 (0.5583 w/ threshold)
  â†’ Sharpe: 1.3222 (2.8484 w/ threshold) | Max DD: -0.0367
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2021-12-30 to 2024-01-02 (400 samples)
Valid: 2024-01-03 to 2024-07-25 (120 samples)
Class distribution in validation: {1.0: 78, 0.0: 42}
   âœ… Positions opened: 10/120 (8.3%)
   ğŸ” Filter rejections: threshold=85 | percentile=21 | technical=4 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=10/10 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.250

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-01-03 to 2024-07-25
      Winning trades: 4/10 (40.0% win rate)
      Losing trades: 6
      Avoided losses: 36 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000131
      Std dev: 0.003001
      Min/Max: -0.025012 / 0.009435
      Long positions: 10
  â†’ Threshold (sharpe): BUY=0.6100 | Sharpe: 0.83 | WinRate: 62.5%
  â†’ AUC: 0.3690 | AUCPR: 0.5802 | Accuracy: 0.4000 (0.3333 w/ threshold)
  â†’ Sharpe: 1.4597 (-1.1140 w/ threshold) | Max DD: -0.0457
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-07-29 to 2024-07-25 (400 samples)
Valid: 2024-07-26 to 2025-02-06 (120 samples)
Class distribution in validation: {1.0: 67, 0.0: 53}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=50 | percentile=26 | technical=10 | regime_gate=8 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.490

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-07-26 to 2025-02-06
      Winning trades: 18/26 (69.2% win rate)
      Losing trades: 8
      Avoided losses: 45 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000338
      Std dev: 0.009782
      Min/Max: -0.083160 / 0.021828
      Long positions: 26
  â†’ AUC: 0.4863 | AUCPR: 0.5483 | Accuracy: 0.5000 (0.5250 w/ threshold)
  â†’ Sharpe: -0.5613 (-0.6774 w/ threshold) | Max DD: -0.1026
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-03-03 to 2025-02-06 (400 samples)
Valid: 2025-02-07 to 2025-09-04 (120 samples)
Class distribution in validation: {0.0: 62, 1.0: 58}
   âœ… Positions opened: 21/120 (17.5%)
   ğŸ” Filter rejections: threshold=59 | percentile=17 | technical=23 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=21/21 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.781

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-02-07 to 2025-09-04
      Winning trades: 10/21 (47.6% win rate)
      Losing trades: 11
      Avoided losses: 51 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000114
      Std dev: 0.004190
      Min/Max: -0.027323 / 0.014958
      Long positions: 21
  â†’ AUC: 0.5435 | AUCPR: 0.4786 | Accuracy: 0.5833 (0.5083 w/ threshold)
  â†’ Sharpe: 1.3896 (0.1324 w/ threshold) | Max DD: -0.0321
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-10-17 to 2025-09-04 (400 samples)
Valid: 2025-09-05 to 2026-01-29 (93 samples)
Class distribution in validation: {0.0: 56, 1.0: 37}
   âœ… Positions opened: 19/93 (20.4%)
   ğŸ” Filter rejections: threshold=46 | percentile=14 | technical=14 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=19/19 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.999

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-09-05 to 2026-01-29
      Winning trades: 15/19 (78.9% win rate)
      Losing trades: 4
      Avoided losses: 52 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 93/93):
      Mean return: 0.001710
      Std dev: 0.010928
      Min/Max: -0.043764 / 0.049760
      Long positions: 19
  â†’ AUC: 0.8301 | AUCPR: 0.6957 | Accuracy: 0.7097 (0.7204 w/ threshold)
  â†’ Sharpe: 4.0158 (2.3684 w/ threshold) | Max DD: -0.0476
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.272032 0.726635  0.483333              0.200000  2.644838     -0.087497           -0.175526   0.583333 0.071429 0.127273           0.64             NaN           sharpe                 True          -0.000572   -0.020572   -0.528954  8.000000       0.500000           12                     12                  0.100000        0.100000                  59                           12      0.089164                         61                           9                         38                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.556821 0.544368  0.516667              0.558333  1.322164     -0.036700            2.848362   0.615385 0.271186 0.376470           0.64             NaN           sharpe                 True           0.182745    0.160892    2.479901  8.741139       0.692308           26                     26                  0.216667        0.216667                  62                           26      0.085217                         58                          17                         18                            1                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.369048 0.580182  0.400000              0.333333  1.459727     -0.045655           -1.113972   0.400000 0.051282 0.090909           0.61             NaN           sharpe                 True          -0.015747   -0.018247   -1.226652  1.000000       0.500000           10                     24                  0.200000        0.083333                  35                           10      0.092605                         85                          21                          4                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.486342 0.548275  0.500000              0.525000 -0.561283     -0.102605           -0.677436   0.692308 0.268657 0.387096           0.64             NaN           sharpe                 True          -0.040569   -0.043020   -0.710083  0.980191       0.500000           26                     26                  0.216667        0.216667                  70                           26      0.094759                         50                          26                         10                            8                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.543521 0.478648  0.583333              0.508333  1.389607     -0.032075            0.132378   0.476190 0.172414 0.253164           0.64             NaN           sharpe                 True           0.013716    0.000054   -0.301468  5.464944       0.571429           21                     21                  0.175000        0.175000                  61                           21      0.080742                         59                          17                         23                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.830116 0.695744  0.709677              0.720430  4.015823     -0.047609            2.368356   0.789474 0.405405 0.535714           0.64             NaN           sharpe                 True           0.159002    0.134032    1.948262  9.987975       0.631579           19                     19                  0.204301        0.204301                  47                           19      0.050373                         46                          14                         14                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.5096 Â± 0.1912
AUCPR:                0.5956 Â± 0.0959
Accuracy:             0.5322 Â± 0.1051
Accuracy (threshold): 0.4742 Â± 0.1825
Sharpe Ratio:         1.7118 Â± 1.5274
Sharpe (threshold):   0.5637 Â± 1.6471
Net Sharpe:           0.2768 Â± 1.5405
Net Return:           0.0355 Â± 0.0882
Turnover:             5.6957 Â± 3.9331
Trade Coverage:       0.1660 Â± 0.0598
EV Mean/Fold:         0.08214 Â± 0.01636
Coverage Ratio:       1.0000
Max Drawdown:         -0.0587 Â± 0.0291
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 820 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 820                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5436                         â•‘
â•‘ Average Accuracy: 0.5330                 â•‘
â•‘ Average Sharpe Ratio: 1.0420             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000615                      â•‘
â•‘ Accuracy Variance: 0.000505             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
  close_vix_ratio    0.125517
              atr    0.123712
        ema_short    0.117557
           roc_20    0.100196
         ema_long    0.083682
distance_to_ma200    0.080844
             macd    0.080316
    volatility_20    0.071201
            macds    0.056945
   price_to_sma20    0.055936
           ADX_14    0.053249
              mfi    0.050846
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - NVDA                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 54.8%                                              â”‚
â”‚    â€¢ Max Probability: 59.1%                                                  â”‚
â”‚    â€¢ Min Probability: 45.7%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 13.4% (Moderate consensus)                         â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $177.19                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $192.57 (+8.68%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $169.50 (-4.34%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 54.8%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 177.19000244140625,
  "profit_target": 192.5698729315299,
  "stop_loss": 169.50006719634445,
  "probability": 0.5477197964986166,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.02541 | Quality=0.048 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 13
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-10-11 (400 samples)
Valid: 2022-10-12 to 2023-05-23 (120 samples)
Class distribution in validation: {1.0: 98, 0.0: 22}
   âœ… Positions opened: 0/120 (0.0%)
   ğŸ” Filter rejections: threshold=69 | percentile=31 | technical=20 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=0/0 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.000
âš ï¸ Fold 1: Skipped from aggregate metrics - insufficient trades (0 < 3)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-16 to 2023-05-23 (400 samples)
Valid: 2023-05-24 to 2024-01-02 (120 samples)
Class distribution in validation: {0.0: 61, 1.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=59 | percentile=16 | technical=18 | regime_gate=1 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.728

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-05-24 to 2024-01-02
      Winning trades: 16/26 (61.5% win rate)
      Losing trades: 10
      Avoided losses: 51 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.001523
      Std dev: 0.008045
      Min/Max: -0.026344 / 0.061707
      Long positions: 26
  â†’ AUC: 0.5589 | AUCPR: 0.5454 | Accuracy: 0.5083 (0.5583 w/ threshold)
  â†’ Sharpe: 1.3009 (2.8484 w/ threshold) | Max DD: -0.0367
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2021-12-30 to 2024-01-02 (400 samples)
Valid: 2024-01-03 to 2024-07-25 (120 samples)
Class distribution in validation: {1.0: 78, 0.0: 42}
   âœ… Positions opened: 17/120 (14.2%)
   ğŸ” Filter rejections: threshold=67 | percentile=21 | technical=15 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=17/17 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.250

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-01-03 to 2024-07-25
      Winning trades: 6/17 (35.3% win rate)
      Losing trades: 11
      Avoided losses: 31 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000139
      Std dev: 0.003294
      Min/Max: -0.025012 / 0.010274
      Long positions: 17
  â†’ AUC: 0.4042 | AUCPR: 0.5900 | Accuracy: 0.4583 (0.3083 w/ threshold)
  â†’ Sharpe: 2.8896 (-1.0522 w/ threshold) | Max DD: -0.0541
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-07-29 to 2024-07-25 (400 samples)
Valid: 2024-07-26 to 2025-02-06 (120 samples)
Class distribution in validation: {1.0: 67, 0.0: 53}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=49 | percentile=22 | technical=11 | regime_gate=12 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.490

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-07-26 to 2025-02-06
      Winning trades: 18/26 (69.2% win rate)
      Losing trades: 8
      Avoided losses: 45 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000338
      Std dev: 0.009782
      Min/Max: -0.083160 / 0.021828
      Long positions: 26
  â†’ AUC: 0.4880 | AUCPR: 0.5402 | Accuracy: 0.5167 (0.5250 w/ threshold)
  â†’ Sharpe: -0.2802 (-0.6774 w/ threshold) | Max DD: -0.1026
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-03-03 to 2025-02-06 (400 samples)
Valid: 2025-02-07 to 2025-09-04 (120 samples)
Class distribution in validation: {0.0: 62, 1.0: 58}
   âœ… Positions opened: 21/120 (17.5%)
   ğŸ” Filter rejections: threshold=59 | percentile=17 | technical=23 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=21/21 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.781

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-02-07 to 2025-09-04
      Winning trades: 10/21 (47.6% win rate)
      Losing trades: 11
      Avoided losses: 51 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000114
      Std dev: 0.004190
      Min/Max: -0.027323 / 0.014958
      Long positions: 21
  â†’ AUC: 0.5455 | AUCPR: 0.4794 | Accuracy: 0.5833 (0.5083 w/ threshold)
  â†’ Sharpe: 1.3896 (0.1324 w/ threshold) | Max DD: -0.0321
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-10-17 to 2025-09-04 (400 samples)
Valid: 2025-09-05 to 2026-01-29 (93 samples)
Class distribution in validation: {0.0: 56, 1.0: 37}
   âœ… Positions opened: 20/93 (21.5%)
   ğŸ” Filter rejections: threshold=40 | percentile=18 | technical=15 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=20/20 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.999

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-09-05 to 2026-01-29
      Winning trades: 16/20 (80.0% win rate)
      Losing trades: 4
      Avoided losses: 52 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 93/93):
      Mean return: 0.001753
      Std dev: 0.010929
      Min/Max: -0.043764 / 0.049760
      Long positions: 20
  â†’ AUC: 0.8224 | AUCPR: 0.6842 | Accuracy: 0.6882 (0.7312 w/ threshold)
  â†’ Sharpe: 3.9034 (2.4316 w/ threshold) | Max DD: -0.0476
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 5 | Skipped: 1

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    2 0.558905 0.545389  0.508333              0.558333  1.300856     -0.036700            2.848362   0.615385 0.271186 0.376470           0.64             NaN           sharpe                 True           0.182745    0.160892    2.479901  8.741139       0.692308           26                     26                  0.216667        0.216667                  61                           26      0.085217                         59                          16                         18                            1                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.404151 0.589963  0.458333              0.308333  2.889561     -0.054112           -1.052159   0.352941 0.076923 0.126315           0.64             NaN           sharpe                 True          -0.016679   -0.021679   -1.253270  2.000000       0.470588           17                     17                  0.141667        0.141667                  53                           17      0.092605                         67                          21                         15                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.488032 0.540228  0.516667              0.525000 -0.280160     -0.102605           -0.677436   0.692308 0.268657 0.387096           0.64             NaN           sharpe                 True          -0.040569   -0.043020   -0.710083  0.980191       0.500000           26                     26                  0.216667        0.216667                  71                           26      0.094759                         49                          22                         11                           12                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.545467 0.479388  0.583333              0.508333  1.389607     -0.032075            0.132378   0.476190 0.172414 0.253164           0.64             NaN           sharpe                 True           0.013716    0.000054   -0.301468  5.464944       0.571429           21                     21                  0.175000        0.175000                  61                           21      0.080742                         59                          17                         23                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.822394 0.684166  0.688172              0.731183  3.903353     -0.047609            2.431564   0.800000 0.432432 0.561403           0.64             NaN           sharpe                 True           0.163066    0.138096    2.010917  9.987975       0.650000           20                     20                  0.215054        0.215054                  53                           20      0.050373                         40                          18                         15                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- SKIPPED FOLDS REPORT ---
Fold 1: insufficient_trades

--- AGGREGATE STATISTICS ---
AUC:                  0.5638 Â± 0.1569
AUCPR:                0.5678 Â± 0.0760
Accuracy:             0.5510 Â± 0.0887
Accuracy (threshold): 0.5262 Â± 0.1507
Sharpe Ratio:         1.8406 Â± 1.6084
Sharpe (threshold):   0.7365 Â± 1.7956
Net Sharpe:           0.4452 Â± 1.6859
Net Return:           0.0469 Â± 0.0953
Turnover:             5.4348 Â± 3.9782
Trade Coverage:       0.1930 Â± 0.0338
EV Mean/Fold:         0.08074 Â± 0.01789
Coverage Ratio:       0.8333
Max Drawdown:         -0.0546 Â± 0.0282
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 821 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 821                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5436                         â•‘
â•‘ Average Accuracy: 0.5331                 â•‘
â•‘ Average Sharpe Ratio: 1.0430             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000615                      â•‘
â•‘ Accuracy Variance: 0.000505             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
  close_vix_ratio    0.136077
        ema_short    0.122475
           roc_20    0.119206
              atr    0.110158
             macd    0.087276
         ema_long    0.080214
distance_to_ma200    0.076619
    volatility_20    0.069650
            macds    0.062816
           ADX_14    0.056173
              mfi    0.043912
   price_to_sma20    0.035424
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - NVDA                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 5                                                     â”‚
â”‚    â€¢ Average Probability: 57.0%                                              â”‚
â”‚    â€¢ Max Probability: 59.3%                                                  â”‚
â”‚    â€¢ Min Probability: 51.3%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 7.9% (High consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $177.19                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $192.57 (+8.68%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $169.50 (-4.34%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 57.0%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 177.19000244140625,
  "profit_target": 192.5698729315299,
  "stop_loss": 169.50006719634445,
  "probability": 0.5695225238800049,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.02825 | Quality=0.070 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 15
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-10-11 (400 samples)
Valid: 2022-10-12 to 2023-05-23 (120 samples)
Class distribution in validation: {1.0: 98, 0.0: 22}
   âœ… Positions opened: 0/120 (0.0%)
   ğŸ” Filter rejections: threshold=64 | percentile=33 | technical=23 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=0/0 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.000
âš ï¸ Fold 1: Skipped from aggregate metrics - insufficient trades (0 < 3)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-16 to 2023-05-23 (400 samples)
Valid: 2023-05-24 to 2024-01-02 (120 samples)
Class distribution in validation: {0.0: 61, 1.0: 59}
   âœ… Positions opened: 5/120 (4.2%)
   ğŸ” Filter rejections: threshold=68 | percentile=36 | technical=11 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=5/5 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.693

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-05-24 to 2024-01-02
      Winning trades: 2/5 (40.0% win rate)
      Losing trades: 3
      Avoided losses: 58 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000079
      Std dev: 0.003286
      Min/Max: -0.026344 / 0.015470
      Long positions: 5
  â†’ Threshold (sharpe): BUY=0.6100 | Sharpe: 1.43 | WinRate: 50.0%
  â†’ AUC: 0.5392 | AUCPR: 0.5197 | Accuracy: 0.5333 (0.5000 w/ threshold)
  â†’ Sharpe: 2.0269 (-0.0026 w/ threshold) | Max DD: -0.0263
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2021-12-30 to 2024-01-02 (400 samples)
Valid: 2024-01-03 to 2024-07-25 (120 samples)
Class distribution in validation: {1.0: 78, 0.0: 42}
   âœ… Positions opened: 9/120 (7.5%)
   ğŸ” Filter rejections: threshold=89 | percentile=18 | technical=4 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=9/9 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.250

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-01-03 to 2024-07-25
      Winning trades: 4/9 (44.4% win rate)
      Losing trades: 5
      Avoided losses: 37 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000051
      Std dev: 0.002871
      Min/Max: -0.025012 / 0.009435
      Long positions: 9
  â†’ Threshold (sharpe): BUY=0.6100 | Sharpe: 0.78 | WinRate: 63.2%
  â†’ AUC: 0.3506 | AUCPR: 0.5731 | Accuracy: 0.3667 (0.3417 w/ threshold)
  â†’ Sharpe: 0.9015 (-0.7190 w/ threshold) | Max DD: -0.0382
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-07-29 to 2024-07-25 (400 samples)
Valid: 2024-07-26 to 2025-02-06 (120 samples)
Class distribution in validation: {1.0: 67, 0.0: 53}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=52 | percentile=7 | technical=19 | regime_gate=16 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.490

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-07-26 to 2025-02-06
      Winning trades: 18/26 (69.2% win rate)
      Losing trades: 8
      Avoided losses: 45 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000338
      Std dev: 0.009782
      Min/Max: -0.083160 / 0.021828
      Long positions: 26
  â†’ AUC: 0.4638 | AUCPR: 0.5265 | Accuracy: 0.5083 (0.5250 w/ threshold)
  â†’ Sharpe: -0.6822 (-0.6774 w/ threshold) | Max DD: -0.1026
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-03-03 to 2025-02-06 (400 samples)
Valid: 2025-02-07 to 2025-09-04 (120 samples)
Class distribution in validation: {0.0: 62, 1.0: 58}
   âœ… Positions opened: 21/120 (17.5%)
   ğŸ” Filter rejections: threshold=59 | percentile=17 | technical=23 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=21/21 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.781

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-02-07 to 2025-09-04
      Winning trades: 10/21 (47.6% win rate)
      Losing trades: 11
      Avoided losses: 51 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000114
      Std dev: 0.004190
      Min/Max: -0.027323 / 0.014958
      Long positions: 21
  â†’ AUC: 0.5487 | AUCPR: 0.4800 | Accuracy: 0.5833 (0.5083 w/ threshold)
  â†’ Sharpe: 1.3896 (0.1324 w/ threshold) | Max DD: -0.0321
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-10-17 to 2025-09-04 (400 samples)
Valid: 2025-09-05 to 2026-01-29 (93 samples)
Class distribution in validation: {0.0: 56, 1.0: 37}
   âœ… Positions opened: 20/93 (21.5%)
   ğŸ” Filter rejections: threshold=43 | percentile=15 | technical=15 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=20/20 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.999

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-09-05 to 2026-01-29
      Winning trades: 16/20 (80.0% win rate)
      Losing trades: 4
      Avoided losses: 52 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 93/93):
      Mean return: 0.001753
      Std dev: 0.010929
      Min/Max: -0.043764 / 0.049760
      Long positions: 20
  â†’ AUC: 0.8234 | AUCPR: 0.6845 | Accuracy: 0.6882 (0.7312 w/ threshold)
  â†’ Sharpe: 3.9034 (2.4316 w/ threshold) | Max DD: -0.0476
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 5 | Skipped: 1

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    2 0.539178 0.519720  0.533333              0.500000  2.026912     -0.026344           -0.002648   0.400000 0.033898 0.062500           0.61             NaN           sharpe                 True           0.009458   -0.007863   -0.698724  6.928403       0.600000            5                     14                  0.116667        0.041667                  52                            5      0.082710                         68                          36                         11                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.350580 0.573069  0.366667              0.341667  0.901521     -0.038160           -0.719037   0.444444 0.051282 0.091954           0.61             NaN           sharpe                 True          -0.006081   -0.009831   -0.894429  1.500000       0.555556            9                     19                  0.158333        0.075000                  31                            9      0.092605                         89                          18                          4                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.463813 0.526491  0.508333              0.525000 -0.682180     -0.102605           -0.677436   0.692308 0.268657 0.387096           0.64             NaN           sharpe                 True          -0.040569   -0.043020   -0.710083  0.980191       0.500000           26                     26                  0.216667        0.216667                  68                           26      0.094759                         52                           7                         19                           16                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.548665 0.480026  0.583333              0.508333  1.389607     -0.032075            0.132378   0.476190 0.172414 0.253164           0.64             NaN           sharpe                 True           0.013716    0.000054   -0.301468  5.464944       0.571429           21                     21                  0.175000        0.175000                  61                           21      0.080742                         59                          17                         23                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.823359 0.684534  0.688172              0.731183  3.903353     -0.047609            2.431564   0.800000 0.432432 0.561403           0.64             NaN           sharpe                 True           0.163066    0.138096    2.010917  9.987975       0.650000           20                     20                  0.215054        0.215054                  50                           20      0.050373                         43                          15                         15                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- SKIPPED FOLDS REPORT ---
Fold 1: insufficient_trades

--- AGGREGATE STATISTICS ---
AUC:                  0.5451 Â± 0.1746
AUCPR:                0.5568 Â± 0.0787
Accuracy:             0.5360 Â± 0.1171
Accuracy (threshold): 0.5212 Â± 0.1387
Sharpe Ratio:         1.5078 Â± 1.6723
Sharpe (threshold):   0.2330 Â± 1.2879
Net Sharpe:           -0.1188 Â± 1.2100
Net Return:           0.0155 Â± 0.0705
Turnover:             4.9723 Â± 3.7822
Trade Coverage:       0.1447 Â± 0.0814
EV Mean/Fold:         0.08024 Â± 0.01776
Coverage Ratio:       0.8333
Max Drawdown:         -0.0494 Â± 0.0308
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 822 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 822                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5436                         â•‘
â•‘ Average Accuracy: 0.5331                 â•‘
â•‘ Average Sharpe Ratio: 1.0435             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000614                      â•‘
â•‘ Accuracy Variance: 0.000505             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
           roc_20    0.132168
  close_vix_ratio    0.130789
              atr    0.122061
        ema_short    0.119977
         ema_long    0.094073
             macd    0.078267
    volatility_20    0.068413
distance_to_ma200    0.064838
            macds    0.059868
           ADX_14    0.051073
   price_to_sma20    0.039679
              mfi    0.038794
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - NVDA                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 5                                                     â”‚
â”‚    â€¢ Average Probability: 55.5%                                              â”‚
â”‚    â€¢ Max Probability: 59.1%                                                  â”‚
â”‚    â€¢ Min Probability: 50.9%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 8.3% (High consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $177.19                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $192.57 (+8.68%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $169.50 (-4.34%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 55.5%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 177.19000244140625,
  "profit_target": 192.5698729315299,
  "stop_loss": 169.50006719634445,
  "probability": 0.5548900127410888,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.02635 | Quality=0.055 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 15
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-10-11 (400 samples)
Valid: 2022-10-12 to 2023-05-23 (120 samples)
Class distribution in validation: {1.0: 98, 0.0: 22}
   âœ… Positions opened: 12/120 (10.0%)
   ğŸ” Filter rejections: threshold=61 | percentile=9 | technical=38 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=12/12 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-10-12 to 2023-05-23
      Winning trades: 7/12 (58.3% win rate)
      Losing trades: 5
      Avoided losses: 17 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000005
      Std dev: 0.007609
      Min/Max: -0.040851 / 0.040563
      Long positions: 12
  â†’ AUC: 0.2720 | AUCPR: 0.7266 | Accuracy: 0.4833 (0.2000 w/ threshold)
  â†’ Sharpe: 2.6448 (-0.1755 w/ threshold) | Max DD: -0.0875
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-16 to 2023-05-23 (400 samples)
Valid: 2023-05-24 to 2024-01-02 (120 samples)
Class distribution in validation: {0.0: 61, 1.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=58 | percentile=17 | technical=18 | regime_gate=1 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.728

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-05-24 to 2024-01-02
      Winning trades: 16/26 (61.5% win rate)
      Losing trades: 10
      Avoided losses: 51 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.001523
      Std dev: 0.008045
      Min/Max: -0.026344 / 0.061707
      Long positions: 26
  â†’ AUC: 0.5568 | AUCPR: 0.5444 | Accuracy: 0.5167 (0.5583 w/ threshold)
  â†’ Sharpe: 1.3222 (2.8484 w/ threshold) | Max DD: -0.0367
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2021-12-30 to 2024-01-02 (400 samples)
Valid: 2024-01-03 to 2024-07-25 (120 samples)
Class distribution in validation: {1.0: 78, 0.0: 42}
   âœ… Positions opened: 10/120 (8.3%)
   ğŸ” Filter rejections: threshold=85 | percentile=21 | technical=4 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=10/10 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.250

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-01-03 to 2024-07-25
      Winning trades: 4/10 (40.0% win rate)
      Losing trades: 6
      Avoided losses: 36 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000131
      Std dev: 0.003001
      Min/Max: -0.025012 / 0.009435
      Long positions: 10
  â†’ Threshold (sharpe): BUY=0.6100 | Sharpe: 0.83 | WinRate: 62.5%
  â†’ AUC: 0.3690 | AUCPR: 0.5802 | Accuracy: 0.4000 (0.3333 w/ threshold)
  â†’ Sharpe: 1.4597 (-1.1140 w/ threshold) | Max DD: -0.0457
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-07-29 to 2024-07-25 (400 samples)
Valid: 2024-07-26 to 2025-02-06 (120 samples)
Class distribution in validation: {1.0: 67, 0.0: 53}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=50 | percentile=26 | technical=10 | regime_gate=8 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.490

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-07-26 to 2025-02-06
      Winning trades: 18/26 (69.2% win rate)
      Losing trades: 8
      Avoided losses: 45 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000338
      Std dev: 0.009782
      Min/Max: -0.083160 / 0.021828
      Long positions: 26
  â†’ AUC: 0.4863 | AUCPR: 0.5483 | Accuracy: 0.5000 (0.5250 w/ threshold)
  â†’ Sharpe: -0.5613 (-0.6774 w/ threshold) | Max DD: -0.1026
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-03-03 to 2025-02-06 (400 samples)
Valid: 2025-02-07 to 2025-09-04 (120 samples)
Class distribution in validation: {0.0: 62, 1.0: 58}
   âœ… Positions opened: 21/120 (17.5%)
   ğŸ” Filter rejections: threshold=59 | percentile=17 | technical=23 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=21/21 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.781

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-02-07 to 2025-09-04
      Winning trades: 10/21 (47.6% win rate)
      Losing trades: 11
      Avoided losses: 51 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000114
      Std dev: 0.004190
      Min/Max: -0.027323 / 0.014958
      Long positions: 21
  â†’ AUC: 0.5435 | AUCPR: 0.4786 | Accuracy: 0.5833 (0.5083 w/ threshold)
  â†’ Sharpe: 1.3896 (0.1324 w/ threshold) | Max DD: -0.0321
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-10-17 to 2025-09-04 (400 samples)
Valid: 2025-09-05 to 2026-01-29 (93 samples)
Class distribution in validation: {0.0: 56, 1.0: 37}
   âœ… Positions opened: 19/93 (20.4%)
   ğŸ” Filter rejections: threshold=46 | percentile=14 | technical=14 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=19/19 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.999

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-09-05 to 2026-01-29
      Winning trades: 15/19 (78.9% win rate)
      Losing trades: 4
      Avoided losses: 52 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 93/93):
      Mean return: 0.001710
      Std dev: 0.010928
      Min/Max: -0.043764 / 0.049760
      Long positions: 19
  â†’ AUC: 0.8301 | AUCPR: 0.6957 | Accuracy: 0.7097 (0.7204 w/ threshold)
  â†’ Sharpe: 4.0158 (2.3684 w/ threshold) | Max DD: -0.0476
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.272032 0.726635  0.483333              0.200000  2.644838     -0.087497           -0.175526   0.583333 0.071429 0.127273           0.64             NaN           sharpe                 True          -0.000572   -0.020572   -0.528954  8.000000       0.500000           12                     12                  0.100000        0.100000                  59                           12      0.089164                         61                           9                         38                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.556821 0.544368  0.516667              0.558333  1.322164     -0.036700            2.848362   0.615385 0.271186 0.376470           0.64             NaN           sharpe                 True           0.182745    0.160892    2.479901  8.741139       0.692308           26                     26                  0.216667        0.216667                  62                           26      0.085217                         58                          17                         18                            1                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.369048 0.580182  0.400000              0.333333  1.459727     -0.045655           -1.113972   0.400000 0.051282 0.090909           0.61             NaN           sharpe                 True          -0.015747   -0.018247   -1.226652  1.000000       0.500000           10                     24                  0.200000        0.083333                  35                           10      0.092605                         85                          21                          4                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.486342 0.548275  0.500000              0.525000 -0.561283     -0.102605           -0.677436   0.692308 0.268657 0.387096           0.64             NaN           sharpe                 True          -0.040569   -0.043020   -0.710083  0.980191       0.500000           26                     26                  0.216667        0.216667                  70                           26      0.094759                         50                          26                         10                            8                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.543521 0.478648  0.583333              0.508333  1.389607     -0.032075            0.132378   0.476190 0.172414 0.253164           0.64             NaN           sharpe                 True           0.013716    0.000054   -0.301468  5.464944       0.571429           21                     21                  0.175000        0.175000                  61                           21      0.080742                         59                          17                         23                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.830116 0.695744  0.709677              0.720430  4.015823     -0.047609            2.368356   0.789474 0.405405 0.535714           0.64             NaN           sharpe                 True           0.159002    0.134032    1.948262  9.987975       0.631579           19                     19                  0.204301        0.204301                  47                           19      0.050373                         46                          14                         14                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.5096 Â± 0.1912
AUCPR:                0.5956 Â± 0.0959
Accuracy:             0.5322 Â± 0.1051
Accuracy (threshold): 0.4742 Â± 0.1825
Sharpe Ratio:         1.7118 Â± 1.5274
Sharpe (threshold):   0.5637 Â± 1.6471
Net Sharpe:           0.2768 Â± 1.5405
Net Return:           0.0355 Â± 0.0882
Turnover:             5.6957 Â± 3.9331
Trade Coverage:       0.1660 Â± 0.0598
EV Mean/Fold:         0.08214 Â± 0.01636
Coverage Ratio:       1.0000
Max Drawdown:         -0.0587 Â± 0.0291
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 823 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 823                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5436                         â•‘
â•‘ Average Accuracy: 0.5331                 â•‘
â•‘ Average Sharpe Ratio: 1.0443             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000615                      â•‘
â•‘ Accuracy Variance: 0.000504             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
  close_vix_ratio    0.125517
              atr    0.123712
        ema_short    0.117557
           roc_20    0.100196
         ema_long    0.083682
distance_to_ma200    0.080844
             macd    0.080316
    volatility_20    0.071201
            macds    0.056945
   price_to_sma20    0.055936
           ADX_14    0.053249
              mfi    0.050846
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - NVDA                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 54.8%                                              â”‚
â”‚    â€¢ Max Probability: 59.1%                                                  â”‚
â”‚    â€¢ Min Probability: 45.7%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 13.4% (Moderate consensus)                         â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $177.19                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $192.57 (+8.68%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $169.50 (-4.34%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 54.8%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 177.19000244140625,
  "profit_target": 192.5698729315299,
  "stop_loss": 169.50006719634445,
  "probability": 0.5477197964986166,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.02541 | Quality=0.048 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 15
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-10-11 (400 samples)
Valid: 2022-10-12 to 2023-05-23 (120 samples)
Class distribution in validation: {1.0: 98, 0.0: 22}
   âœ… Positions opened: 0/120 (0.0%)
   ğŸ” Filter rejections: threshold=69 | percentile=31 | technical=20 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=0/0 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.000
âš ï¸ Fold 1: Skipped from aggregate metrics - insufficient trades (0 < 3)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-16 to 2023-05-23 (400 samples)
Valid: 2023-05-24 to 2024-01-02 (120 samples)
Class distribution in validation: {0.0: 61, 1.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=59 | percentile=16 | technical=18 | regime_gate=1 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.728

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-05-24 to 2024-01-02
      Winning trades: 16/26 (61.5% win rate)
      Losing trades: 10
      Avoided losses: 51 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.001523
      Std dev: 0.008045
      Min/Max: -0.026344 / 0.061707
      Long positions: 26
  â†’ AUC: 0.5589 | AUCPR: 0.5454 | Accuracy: 0.5083 (0.5583 w/ threshold)
  â†’ Sharpe: 1.3009 (2.8484 w/ threshold) | Max DD: -0.0367
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2021-12-30 to 2024-01-02 (400 samples)
Valid: 2024-01-03 to 2024-07-25 (120 samples)
Class distribution in validation: {1.0: 78, 0.0: 42}
   âœ… Positions opened: 17/120 (14.2%)
   ğŸ” Filter rejections: threshold=67 | percentile=21 | technical=15 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=17/17 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.250

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-01-03 to 2024-07-25
      Winning trades: 6/17 (35.3% win rate)
      Losing trades: 11
      Avoided losses: 31 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000139
      Std dev: 0.003294
      Min/Max: -0.025012 / 0.010274
      Long positions: 17
  â†’ AUC: 0.4042 | AUCPR: 0.5900 | Accuracy: 0.4583 (0.3083 w/ threshold)
  â†’ Sharpe: 2.8896 (-1.0522 w/ threshold) | Max DD: -0.0541
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-07-29 to 2024-07-25 (400 samples)
Valid: 2024-07-26 to 2025-02-06 (120 samples)
Class distribution in validation: {1.0: 67, 0.0: 53}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=49 | percentile=22 | technical=11 | regime_gate=12 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.490

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-07-26 to 2025-02-06
      Winning trades: 18/26 (69.2% win rate)
      Losing trades: 8
      Avoided losses: 45 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000338
      Std dev: 0.009782
      Min/Max: -0.083160 / 0.021828
      Long positions: 26
  â†’ AUC: 0.4880 | AUCPR: 0.5402 | Accuracy: 0.5167 (0.5250 w/ threshold)
  â†’ Sharpe: -0.2802 (-0.6774 w/ threshold) | Max DD: -0.1026
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-03-03 to 2025-02-06 (400 samples)
Valid: 2025-02-07 to 2025-09-04 (120 samples)
Class distribution in validation: {0.0: 62, 1.0: 58}
   âœ… Positions opened: 21/120 (17.5%)
   ğŸ” Filter rejections: threshold=59 | percentile=17 | technical=23 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=21/21 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.781

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-02-07 to 2025-09-04
      Winning trades: 10/21 (47.6% win rate)
      Losing trades: 11
      Avoided losses: 51 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000114
      Std dev: 0.004190
      Min/Max: -0.027323 / 0.014958
      Long positions: 21
  â†’ AUC: 0.5455 | AUCPR: 0.4794 | Accuracy: 0.5833 (0.5083 w/ threshold)
  â†’ Sharpe: 1.3896 (0.1324 w/ threshold) | Max DD: -0.0321
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-10-17 to 2025-09-04 (400 samples)
Valid: 2025-09-05 to 2026-01-29 (93 samples)
Class distribution in validation: {0.0: 56, 1.0: 37}
   âœ… Positions opened: 20/93 (21.5%)
   ğŸ” Filter rejections: threshold=40 | percentile=18 | technical=15 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=20/20 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.999

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-09-05 to 2026-01-29
      Winning trades: 16/20 (80.0% win rate)
      Losing trades: 4
      Avoided losses: 52 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 93/93):
      Mean return: 0.001753
      Std dev: 0.010929
      Min/Max: -0.043764 / 0.049760
      Long positions: 20
  â†’ AUC: 0.8224 | AUCPR: 0.6842 | Accuracy: 0.6882 (0.7312 w/ threshold)
  â†’ Sharpe: 3.9034 (2.4316 w/ threshold) | Max DD: -0.0476
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 5 | Skipped: 1

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    2 0.558905 0.545389  0.508333              0.558333  1.300856     -0.036700            2.848362   0.615385 0.271186 0.376470           0.64             NaN           sharpe                 True           0.182745    0.160892    2.479901  8.741139       0.692308           26                     26                  0.216667        0.216667                  61                           26      0.085217                         59                          16                         18                            1                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.404151 0.589963  0.458333              0.308333  2.889561     -0.054112           -1.052159   0.352941 0.076923 0.126315           0.64             NaN           sharpe                 True          -0.016679   -0.021679   -1.253270  2.000000       0.470588           17                     17                  0.141667        0.141667                  53                           17      0.092605                         67                          21                         15                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.488032 0.540228  0.516667              0.525000 -0.280160     -0.102605           -0.677436   0.692308 0.268657 0.387096           0.64             NaN           sharpe                 True          -0.040569   -0.043020   -0.710083  0.980191       0.500000           26                     26                  0.216667        0.216667                  71                           26      0.094759                         49                          22                         11                           12                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.545467 0.479388  0.583333              0.508333  1.389607     -0.032075            0.132378   0.476190 0.172414 0.253164           0.64             NaN           sharpe                 True           0.013716    0.000054   -0.301468  5.464944       0.571429           21                     21                  0.175000        0.175000                  61                           21      0.080742                         59                          17                         23                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.822394 0.684166  0.688172              0.731183  3.903353     -0.047609            2.431564   0.800000 0.432432 0.561403           0.64             NaN           sharpe                 True           0.163066    0.138096    2.010917  9.987975       0.650000           20                     20                  0.215054        0.215054                  53                           20      0.050373                         40                          18                         15                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- SKIPPED FOLDS REPORT ---
Fold 1: insufficient_trades

--- AGGREGATE STATISTICS ---
AUC:                  0.5638 Â± 0.1569
AUCPR:                0.5678 Â± 0.0760
Accuracy:             0.5510 Â± 0.0887
Accuracy (threshold): 0.5262 Â± 0.1507
Sharpe Ratio:         1.8406 Â± 1.6084
Sharpe (threshold):   0.7365 Â± 1.7956
Net Sharpe:           0.4452 Â± 1.6859
Net Return:           0.0469 Â± 0.0953
Turnover:             5.4348 Â± 3.9782
Trade Coverage:       0.1930 Â± 0.0338
EV Mean/Fold:         0.08074 Â± 0.01789
Coverage Ratio:       0.8333
Max Drawdown:         -0.0546 Â± 0.0282
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 824 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 824                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5436                         â•‘
â•‘ Average Accuracy: 0.5331                 â•‘
â•‘ Average Sharpe Ratio: 1.0453             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000614                      â•‘
â•‘ Accuracy Variance: 0.000504             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
  close_vix_ratio    0.136077
        ema_short    0.122475
           roc_20    0.119206
              atr    0.110158
             macd    0.087276
         ema_long    0.080214
distance_to_ma200    0.076619
    volatility_20    0.069650
            macds    0.062816
           ADX_14    0.056173
              mfi    0.043912
   price_to_sma20    0.035424
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - NVDA                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 5                                                     â”‚
â”‚    â€¢ Average Probability: 57.0%                                              â”‚
â”‚    â€¢ Max Probability: 59.3%                                                  â”‚
â”‚    â€¢ Min Probability: 51.3%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 7.9% (High consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $177.19                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $192.57 (+8.68%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $169.50 (-4.34%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 57.0%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 177.19000244140625,
  "profit_target": 192.5698729315299,
  "stop_loss": 169.50006719634445,
  "probability": 0.5695225238800049,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.02825 | Quality=0.070 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 13
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-09-15 (400 samples)
Valid: 2022-09-16 to 2023-03-29 (120 samples)
Class distribution in validation: {1.0: 64, 0.0: 56}
   âœ… Positions opened: 3/120 (2.5%)
   ğŸ” Filter rejections: threshold=55 | percentile=17 | technical=45 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=3/3 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.919

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-09-16 to 2023-03-29
      Winning trades: 3/3 (100.0% win rate)
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000234
      Std dev: 0.002964
      Min/Max: -0.013206 / 0.024858
      Long positions: 3
  â†’ AUC: 0.5130 | AUCPR: 0.5354 | Accuracy: 0.5583 (0.4917 w/ threshold)
  â†’ Sharpe: 0.7262 (0.8262 w/ threshold) | Max DD: -0.0132
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-18 to 2023-03-29 (400 samples)
Valid: 2023-03-30 to 2023-10-10 (120 samples)
Class distribution in validation: {1.0: 77, 0.0: 43}
   âœ… Positions opened: 16/120 (13.3%)
   ğŸ” Filter rejections: threshold=63 | percentile=36 | technical=5 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=16/16 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-03-30 to 2023-10-10
      Winning trades: 9/16 (56.2% win rate)
      Losing trades: 7
      Avoided losses: 36 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000513
      Std dev: 0.008005
      Min/Max: -0.021498 / 0.072435
      Long positions: 16
  â†’ Threshold (sharpe): BUY=0.6400 | Sharpe: 0.90 | WinRate: 52.4%
  â†’ AUC: 0.3428 | AUCPR: 0.5863 | Accuracy: 0.4083 (0.3750 w/ threshold)
  â†’ Sharpe: 1.7305 (0.8606 w/ threshold) | Max DD: -0.0282
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2022-01-11 to 2023-10-10 (400 samples)
Valid: 2023-10-11 to 2024-05-16 (120 samples)
Class distribution in validation: {1.0: 61, 0.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=63 | percentile=10 | technical=13 | regime_gate=8 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-10-11 to 2024-05-16
      Winning trades: 9/26 (34.6% win rate)
      Losing trades: 17
      Avoided losses: 42 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000437
      Std dev: 0.005884
      Min/Max: -0.029572 / 0.026600
      Long positions: 26
  â†’ AUC: 0.4293 | AUCPR: 0.4550 | Accuracy: 0.4667 (0.4250 w/ threshold)
  â†’ Sharpe: 1.6772 (0.9644 w/ threshold) | Max DD: -0.0323
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-07-21 to 2024-05-16 (400 samples)
Valid: 2024-05-17 to 2024-11-26 (120 samples)
Class distribution in validation: {0.0: 60, 1.0: 60}
   âœ… Positions opened: 6/120 (5.0%)
   ğŸ” Filter rejections: threshold=79 | percentile=28 | technical=7 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=6/6 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.348

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-05-17 to 2024-11-26
      Winning trades: 5/6 (83.3% win rate)
      Losing trades: 1
      Avoided losses: 59 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000063
      Std dev: 0.000500
      Min/Max: -0.000390 / 0.004504
      Long positions: 6
  â†’ Threshold (sharpe): BUY=0.6100 | Sharpe: 0.96 | WinRate: 50.0%
  â†’ AUC: 0.8036 | AUCPR: 0.7560 | Accuracy: 0.7000 (0.5333 w/ threshold)
  â†’ Sharpe: 1.6455 (-0.5334 w/ threshold) | Max DD: -0.0008
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-01-20 to 2024-11-26 (400 samples)
Valid: 2024-11-27 to 2025-06-17 (120 samples)
Class distribution in validation: {0.0: 75, 1.0: 45}
   âœ… Positions opened: 12/120 (10.0%)
   ğŸ” Filter rejections: threshold=64 | percentile=11 | technical=33 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=12/12 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.776

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-11-27 to 2025-06-17
      Winning trades: 5/12 (41.7% win rate)
      Losing trades: 7
      Avoided losses: 68 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000061
      Std dev: 0.003576
      Min/Max: -0.013426 / 0.032055
      Long positions: 12
  â†’ AUC: 0.5452 | AUCPR: 0.4005 | Accuracy: 0.5167 (0.6083 w/ threshold)
  â†’ Sharpe: -1.1502 (-0.0811 w/ threshold) | Max DD: -0.0377
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-08-07 to 2025-06-17 (400 samples)
Valid: 2025-06-18 to 2026-01-12 (120 samples)
Class distribution in validation: {0.0: 61, 1.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=59 | percentile=6 | technical=17 | regime_gate=12 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-06-18 to 2026-01-12
      Winning trades: 14/26 (53.8% win rate)
      Losing trades: 12
      Avoided losses: 49 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000601
      Std dev: 0.004247
      Min/Max: -0.021899 / 0.021688
      Long positions: 26
  â†’ AUC: 0.6260 | AUCPR: 0.5882 | Accuracy: 0.5750 (0.5250 w/ threshold)
  â†’ Sharpe: 1.3255 (1.9496 w/ threshold) | Max DD: -0.0265
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.512974 0.535434  0.558333              0.491667  0.726199     -0.013206            0.826158   1.000000 0.046875 0.089552           0.61             NaN           sharpe                 True           0.028034    0.018846    0.421890  3.675058       0.666667            3                      3                  0.025000        0.025000                  65                            3      0.053845                         55                          17                         45                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.342797 0.586274  0.408333              0.375000  1.730534     -0.028165            0.860648   0.562500 0.116883 0.193548           0.64             NaN           sharpe                 True           0.061603    0.026603    0.284395 14.000000       0.500000           16                     21                  0.175000        0.133333                  57                           16      0.037757                         63                          36                          5                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.429286 0.455041  0.466667              0.425000  1.677212     -0.032274            0.964373   0.346154 0.147541 0.206896           0.64             NaN           sharpe                 True           0.052416    0.027416    0.403700 10.000000       0.461538           26                     26                  0.216667        0.216667                  57                           26      0.031817                         63                          10                         13                            8                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.803611 0.755997  0.700000              0.533333  1.645520     -0.000765           -0.533374   0.833333 0.083333 0.151515           0.61             NaN           sharpe                 True           0.007508    0.002744   -2.081138  1.905554       0.500000            6                     12                  0.100000        0.050000                  41                            6      0.018376                         79                          28                          7                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.545185 0.400497  0.516667              0.608333 -1.150203     -0.037723           -0.081137   0.416667 0.111111 0.175438           0.64             NaN           sharpe                 True           0.007330   -0.008190   -0.659199  6.208242       0.416667           12                     12                  0.100000        0.100000                  56                           12      0.047787                         64                          11                         33                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.626007 0.588161  0.575000              0.525000  1.325453     -0.026465            1.949612   0.538462 0.237288 0.329411           0.64             NaN           sharpe                 True           0.072120    0.042120    1.046043 12.000000       0.538462           26                     26                  0.216667        0.216667                  61                           26      0.025248                         59                           6                         17                           12                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.5433 Â± 0.1605
AUCPR:                0.5536 Â± 0.1239
Accuracy:             0.5375 Â± 0.1004
Accuracy (threshold): 0.4931 Â± 0.0831
Sharpe Ratio:         0.9925 Â± 1.1147
Sharpe (threshold):   0.6644 Â± 0.8714
Net Sharpe:           -0.0974 Â± 1.1158
Net Return:           0.0183 Â± 0.0182
Turnover:             7.9648 Â± 4.7969
Trade Coverage:       0.1236 Â± 0.0814
EV Mean/Fold:         0.03581 Â± 0.01345
Coverage Ratio:       1.0000
Max Drawdown:         -0.0231 Â± 0.0137
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 825 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 825                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5436                         â•‘
â•‘ Average Accuracy: 0.5331                 â•‘
â•‘ Average Sharpe Ratio: 1.0452             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000614                      â•‘
â•‘ Accuracy Variance: 0.000503             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
           ADX_14    0.170502
             macd    0.128160
         ema_long    0.101580
        ema_short    0.093348
distance_to_ma200    0.092510
  close_vix_ratio    0.078448
            macds    0.074936
              mfi    0.063843
    volatility_20    0.061514
   price_to_sma20    0.051008
              atr    0.043066
           roc_20    0.041085
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - MSFT                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 51.7%                                              â”‚
â”‚    â€¢ Max Probability: 62.5%                                                  â”‚
â”‚    â€¢ Min Probability: 36.0%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 26.5% (Low consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $392.74                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $420.27 (+7.01%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $378.97 (-3.50%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 51.7%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 392.739990234375,
  "profit_target": 420.270839075018,
  "stop_loss": 378.9745658140535,
  "probability": 0.5174471586942673,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.01686 | Quality=0.017 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 13
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-09-15 (400 samples)
Valid: 2022-09-16 to 2023-03-29 (120 samples)
Class distribution in validation: {1.0: 64, 0.0: 56}
   âœ… Positions opened: 3/120 (2.5%)
   ğŸ” Filter rejections: threshold=55 | percentile=20 | technical=42 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=3/3 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.919

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-09-16 to 2023-03-29
      Winning trades: 3/3 (100.0% win rate)
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000234
      Std dev: 0.002964
      Min/Max: -0.013206 / 0.024858
      Long positions: 3
  â†’ AUC: 0.4911 | AUCPR: 0.5256 | Accuracy: 0.5417 (0.4917 w/ threshold)
  â†’ Sharpe: 0.7267 (0.8262 w/ threshold) | Max DD: -0.0132
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-18 to 2023-03-29 (400 samples)
Valid: 2023-03-30 to 2023-10-10 (120 samples)
Class distribution in validation: {1.0: 77, 0.0: 43}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=64 | percentile=4 | technical=15 | regime_gate=11 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-03-30 to 2023-10-10
      Winning trades: 10/26 (38.5% win rate)
      Losing trades: 16
      Avoided losses: 27 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000136
      Std dev: 0.006357
      Min/Max: -0.023977 / 0.039800
      Long positions: 26
  â†’ AUC: 0.3129 | AUCPR: 0.5563 | Accuracy: 0.3250 (0.3083 w/ threshold)
  â†’ Sharpe: 0.5762 (-0.5388 w/ threshold) | Max DD: -0.0548
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2022-01-11 to 2023-10-10 (400 samples)
Valid: 2023-10-11 to 2024-05-16 (120 samples)
Class distribution in validation: {1.0: 61, 0.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=68 | percentile=5 | technical=13 | regime_gate=8 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-10-11 to 2024-05-16
      Winning trades: 10/26 (38.5% win rate)
      Losing trades: 16
      Avoided losses: 43 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000483
      Std dev: 0.005846
      Min/Max: -0.029572 / 0.026600
      Long positions: 26
  â†’ AUC: 0.4182 | AUCPR: 0.4506 | Accuracy: 0.4583 (0.4417 w/ threshold)
  â†’ Sharpe: 1.7212 (1.0963 w/ threshold) | Max DD: -0.0323
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-07-21 to 2024-05-16 (400 samples)
Valid: 2024-05-17 to 2024-11-26 (120 samples)
Class distribution in validation: {0.0: 60, 1.0: 60}
   âœ… Positions opened: 10/120 (8.3%)
   ğŸ” Filter rejections: threshold=75 | percentile=31 | technical=4 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=10/10 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.446

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-05-17 to 2024-11-26
      Winning trades: 6/10 (60.0% win rate)
      Losing trades: 4
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000093
      Std dev: 0.001296
      Min/Max: -0.010516 / 0.005483
      Long positions: 10
  â†’ Threshold (sharpe): BUY=0.6100 | Sharpe: 0.69 | WinRate: 72.2%
  â†’ AUC: 0.8108 | AUCPR: 0.7511 | Accuracy: 0.7000 (0.5167 w/ threshold)
  â†’ Sharpe: 1.6455 (0.1652 w/ threshold) | Max DD: -0.0105
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-01-20 to 2024-11-26 (400 samples)
Valid: 2024-11-27 to 2025-06-17 (120 samples)
Class distribution in validation: {0.0: 75, 1.0: 45}
   âœ… Positions opened: 11/120 (9.2%)
   ğŸ” Filter rejections: threshold=64 | percentile=12 | technical=33 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=11/11 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.776

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-11-27 to 2025-06-17
      Winning trades: 5/11 (45.5% win rate)
      Losing trades: 6
      Avoided losses: 69 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000079
      Std dev: 0.003571
      Min/Max: -0.013426 / 0.032055
      Long positions: 11
  â†’ AUC: 0.5505 | AUCPR: 0.4044 | Accuracy: 0.5083 (0.6167 w/ threshold)
  â†’ Sharpe: -1.0070 (-0.0014 w/ threshold) | Max DD: -0.0356
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-08-07 to 2025-06-17 (400 samples)
Valid: 2025-06-18 to 2026-01-12 (120 samples)
Class distribution in validation: {0.0: 61, 1.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=60 | percentile=6 | technical=17 | regime_gate=11 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-06-18 to 2026-01-12
      Winning trades: 15/26 (57.7% win rate)
      Losing trades: 11
      Avoided losses: 50 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000641
      Std dev: 0.004280
      Min/Max: -0.021899 / 0.021688
      Long positions: 26
  â†’ AUC: 0.6357 | AUCPR: 0.5969 | Accuracy: 0.5833 (0.5417 w/ threshold)
  â†’ Sharpe: 1.2390 (2.0845 w/ threshold) | Max DD: -0.0265
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.491071 0.525580  0.541667              0.491667  0.726659     -0.013206            0.826158   1.000000 0.046875 0.089552           0.61             NaN           sharpe                 True           0.028034    0.018846    0.421890  3.675058       0.666667            3                      3                  0.025000        0.025000                  65                            3      0.053845                         55                          20                         42                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.312896 0.556257  0.325000              0.308333  0.576209     -0.054751           -0.538808   0.384615 0.129870 0.194174           0.64             NaN           sharpe                 True          -0.016370   -0.041370   -1.035277 10.000000       0.461538           26                     26                  0.216667        0.216667                  56                           26      0.037757                         64                           4                         15                           11                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.418172 0.450620  0.458333              0.441667  1.721154     -0.032274            1.096341   0.384615 0.163934 0.229885           0.64             NaN           sharpe                 True           0.057975    0.032975    0.529111 10.000000       0.461538           26                     26                  0.216667        0.216667                  52                           26      0.031817                         68                           5                         13                            8                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.810833 0.751124  0.700000              0.516667  1.645520     -0.010516            0.165168   0.600000 0.100000 0.171428           0.61             NaN           sharpe                 True           0.011142    0.001531   -0.864839  3.844395       0.700000           10                     18                  0.150000        0.083333                  45                           10      0.020519                         75                          31                          4                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.550519 0.404446  0.508333              0.616667 -1.007047     -0.035645           -0.001428   0.454545 0.111111 0.178571           0.61             NaN           sharpe                 True           0.009485   -0.006035   -0.571636  6.208242       0.454545           11                     11                  0.091667        0.091667                  56                           11      0.047787                         64                          12                         33                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.635732 0.596901  0.583333              0.541667  1.239016     -0.026465            2.084544   0.576923 0.254237 0.352941           0.64             NaN           sharpe                 True           0.076970    0.046970    1.186608 12.000000       0.576923           26                     26                  0.216667        0.216667                  60                           26      0.025248                         60                           6                         17                           11                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.5365 Â± 0.1740
AUCPR:                0.5475 Â± 0.1219
Accuracy:             0.5194 Â± 0.1256
Accuracy (threshold): 0.4861 Â± 0.1046
Sharpe Ratio:         0.8169 Â± 1.0075
Sharpe (threshold):   0.6053 Â± 0.9326
Net Sharpe:           -0.0557 Â± 0.8937
Net Return:           0.0088 Â± 0.0314
Turnover:             7.6213 Â± 3.5306
Trade Coverage:       0.1417 Â± 0.0853
EV Mean/Fold:         0.03616 Â± 0.01291
Coverage Ratio:       1.0000
Max Drawdown:         -0.0288 Â± 0.0162
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 826 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 826                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5436                         â•‘
â•‘ Average Accuracy: 0.5331                 â•‘
â•‘ Average Sharpe Ratio: 1.0450             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000613                      â•‘
â•‘ Accuracy Variance: 0.000503             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
           ADX_14    0.159464
             macd    0.110481
         ema_long    0.107796
        ema_short    0.096095
  close_vix_ratio    0.089146
            macds    0.088482
              mfi    0.069082
    volatility_20    0.067571
distance_to_ma200    0.066596
   price_to_sma20    0.057937
           roc_20    0.045473
              atr    0.041878
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - MSFT                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 47.6%                                              â”‚
â”‚    â€¢ Max Probability: 64.3%                                                  â”‚
â”‚    â€¢ Min Probability: 19.3%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 45.0% (Low consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $392.74                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $420.27 (+7.01%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $378.97 (-3.50%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 47.6%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 392.739990234375,
  "profit_target": 420.270839075018,
  "stop_loss": 378.9745658140535,
  "probability": 0.47588181495666504,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.01249 | Quality=0.000 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 13
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-09-15 (400 samples)
Valid: 2022-09-16 to 2023-03-29 (120 samples)
Class distribution in validation: {1.0: 64, 0.0: 56}
   âœ… Positions opened: 3/120 (2.5%)
   ğŸ” Filter rejections: threshold=52 | percentile=27 | technical=38 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=3/3 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.919

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-09-16 to 2023-03-29
      Winning trades: 3/3 (100.0% win rate)
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000234
      Std dev: 0.002964
      Min/Max: -0.013206 / 0.024858
      Long positions: 3
  â†’ AUC: 0.5022 | AUCPR: 0.5368 | Accuracy: 0.5500 (0.4917 w/ threshold)
  â†’ Sharpe: 0.7483 (0.8262 w/ threshold) | Max DD: -0.0132
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-18 to 2023-03-29 (400 samples)
Valid: 2023-03-30 to 2023-10-10 (120 samples)
Class distribution in validation: {1.0: 77, 0.0: 43}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=64 | percentile=4 | technical=15 | regime_gate=11 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-03-30 to 2023-10-10
      Winning trades: 10/26 (38.5% win rate)
      Losing trades: 16
      Avoided losses: 27 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000136
      Std dev: 0.006357
      Min/Max: -0.023977 / 0.039800
      Long positions: 26
  â†’ AUC: 0.3120 | AUCPR: 0.5561 | Accuracy: 0.3250 (0.3083 w/ threshold)
  â†’ Sharpe: 0.5762 (-0.5388 w/ threshold) | Max DD: -0.0548
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2022-01-11 to 2023-10-10 (400 samples)
Valid: 2023-10-11 to 2024-05-16 (120 samples)
Class distribution in validation: {1.0: 61, 0.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=62 | percentile=11 | technical=13 | regime_gate=8 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-10-11 to 2024-05-16
      Winning trades: 9/26 (34.6% win rate)
      Losing trades: 17
      Avoided losses: 42 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000437
      Std dev: 0.005884
      Min/Max: -0.029572 / 0.026600
      Long positions: 26
  â†’ AUC: 0.4276 | AUCPR: 0.4544 | Accuracy: 0.4583 (0.4250 w/ threshold)
  â†’ Sharpe: 1.8161 (0.9644 w/ threshold) | Max DD: -0.0323
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-07-21 to 2024-05-16 (400 samples)
Valid: 2024-05-17 to 2024-11-26 (120 samples)
Class distribution in validation: {0.0: 60, 1.0: 60}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=51 | percentile=17 | technical=19 | regime_gate=7 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.861

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-05-17 to 2024-11-26
      Winning trades: 15/26 (57.7% win rate)
      Losing trades: 11
      Avoided losses: 49 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000036
      Std dev: 0.003939
      Min/Max: -0.023975 / 0.018910
      Long positions: 26
  â†’ AUC: 0.7989 | AUCPR: 0.7224 | Accuracy: 0.7583 (0.5333 w/ threshold)
  â†’ Sharpe: 1.2698 (-0.1733 w/ threshold) | Max DD: -0.0341
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-01-20 to 2024-11-26 (400 samples)
Valid: 2024-11-27 to 2025-06-17 (120 samples)
Class distribution in validation: {0.0: 75, 1.0: 45}
   âœ… Positions opened: 12/120 (10.0%)
   ğŸ” Filter rejections: threshold=65 | percentile=10 | technical=33 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=12/12 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.776

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-11-27 to 2025-06-17
      Winning trades: 5/12 (41.7% win rate)
      Losing trades: 7
      Avoided losses: 68 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000061
      Std dev: 0.003576
      Min/Max: -0.013426 / 0.032055
      Long positions: 12
  â†’ AUC: 0.5461 | AUCPR: 0.4011 | Accuracy: 0.5167 (0.6083 w/ threshold)
  â†’ Sharpe: -1.1502 (-0.0811 w/ threshold) | Max DD: -0.0377
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-08-07 to 2025-06-17 (400 samples)
Valid: 2025-06-18 to 2026-01-12 (120 samples)
Class distribution in validation: {0.0: 61, 1.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=60 | percentile=6 | technical=17 | regime_gate=11 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-06-18 to 2026-01-12
      Winning trades: 15/26 (57.7% win rate)
      Losing trades: 11
      Avoided losses: 50 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000641
      Std dev: 0.004280
      Min/Max: -0.021899 / 0.021688
      Long positions: 26
  â†’ AUC: 0.6346 | AUCPR: 0.5965 | Accuracy: 0.5750 (0.5417 w/ threshold)
  â†’ Sharpe: 1.3255 (2.0845 w/ threshold) | Max DD: -0.0265
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.502232 0.536785  0.550000              0.491667  0.748313     -0.013206            0.826158   1.000000 0.046875 0.089552           0.61             NaN           sharpe                 True           0.028034    0.018846    0.421890  3.675058       0.666667            3                      3                  0.025000        0.025000                  68                            3      0.053845                         52                          27                         38                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.311990 0.556109  0.325000              0.308333  0.576209     -0.054751           -0.538808   0.384615 0.129870 0.194174           0.64             NaN           sharpe                 True          -0.016370   -0.041370   -1.035277 10.000000       0.461538           26                     26                  0.216667        0.216667                  56                           26      0.037757                         64                           4                         15                           11                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.427619 0.454421  0.458333              0.425000  1.816107     -0.032274            0.964373   0.346154 0.147541 0.206896           0.64             NaN           sharpe                 True           0.052416    0.027416    0.403700 10.000000       0.461538           26                     26                  0.216667        0.216667                  58                           26      0.031817                         62                          11                         13                            8                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.798889 0.722398  0.758333              0.533333  1.269774     -0.034149           -0.173349   0.576923 0.250000 0.348837           0.64             NaN           sharpe                 True           0.004362   -0.015005   -0.835616  7.747055       0.500000           26                     26                  0.216667        0.216667                  69                           26      0.029547                         51                          17                         19                            7                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.546074 0.401093  0.516667              0.608333 -1.150203     -0.037723           -0.081137   0.416667 0.111111 0.175438           0.64             NaN           sharpe                 True           0.007330   -0.008190   -0.659199  6.208242       0.416667           12                     12                  0.100000        0.100000                  55                           12      0.047787                         65                          10                         33                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.634621 0.596456  0.575000              0.541667  1.325453     -0.026465            2.084544   0.576923 0.254237 0.352941           0.64             NaN           sharpe                 True           0.076970    0.046970    1.186608 12.000000       0.576923           26                     26                  0.216667        0.216667                  60                           26      0.025248                         60                           6                         17                           11                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.5369 Â± 0.1685
AUCPR:                0.5445 Â± 0.1124
Accuracy:             0.5306 Â± 0.1428
Accuracy (threshold): 0.4847 Â± 0.1055
Sharpe Ratio:         0.7643 Â± 1.0371
Sharpe (threshold):   0.5136 Â± 0.9697
Net Sharpe:           -0.0863 Â± 0.8842
Net Return:           0.0048 Â± 0.0322
Turnover:             8.2717 Â± 3.0178
Trade Coverage:       0.1653 Â± 0.0831
EV Mean/Fold:         0.03767 Â± 0.01112
Coverage Ratio:       1.0000
Max Drawdown:         -0.0331 Â± 0.0137
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 827 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 827                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5436                         â•‘
â•‘ Average Accuracy: 0.5331                 â•‘
â•‘ Average Sharpe Ratio: 1.0446             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000612                      â•‘
â•‘ Accuracy Variance: 0.000502             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
           ADX_14    0.174539
             macd    0.112696
        ema_short    0.112142
         ema_long    0.087568
            macds    0.087334
    volatility_20    0.077971
distance_to_ma200    0.077321
  close_vix_ratio    0.069650
              mfi    0.064480
   price_to_sma20    0.053557
           roc_20    0.044886
              atr    0.037856
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - MSFT                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 50.8%                                              â”‚
â”‚    â€¢ Max Probability: 60.8%                                                  â”‚
â”‚    â€¢ Min Probability: 14.6%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 46.3% (Low consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $392.74                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $420.27 (+7.01%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $378.97 (-3.50%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 50.8%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 392.739990234375,
  "profit_target": 420.270839075018,
  "stop_loss": 378.9745658140535,
  "probability": 0.5075393443306287,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.01582 | Quality=0.008 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 12
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-09-15 (400 samples)
Valid: 2022-09-16 to 2023-03-29 (120 samples)
Class distribution in validation: {1.0: 64, 0.0: 56}
   âœ… Positions opened: 3/120 (2.5%)
   ğŸ” Filter rejections: threshold=55 | percentile=17 | technical=45 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=3/3 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.919

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-09-16 to 2023-03-29
      Winning trades: 3/3 (100.0% win rate)
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000234
      Std dev: 0.002964
      Min/Max: -0.013206 / 0.024858
      Long positions: 3
  â†’ AUC: 0.5130 | AUCPR: 0.5354 | Accuracy: 0.5583 (0.4917 w/ threshold)
  â†’ Sharpe: 0.7262 (0.8262 w/ threshold) | Max DD: -0.0132
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-18 to 2023-03-29 (400 samples)
Valid: 2023-03-30 to 2023-10-10 (120 samples)
Class distribution in validation: {1.0: 77, 0.0: 43}
   âœ… Positions opened: 16/120 (13.3%)
   ğŸ” Filter rejections: threshold=63 | percentile=36 | technical=5 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=16/16 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-03-30 to 2023-10-10
      Winning trades: 9/16 (56.2% win rate)
      Losing trades: 7
      Avoided losses: 36 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000513
      Std dev: 0.008005
      Min/Max: -0.021498 / 0.072435
      Long positions: 16
  â†’ Threshold (sharpe): BUY=0.6400 | Sharpe: 0.90 | WinRate: 52.4%
  â†’ AUC: 0.3428 | AUCPR: 0.5863 | Accuracy: 0.4083 (0.3750 w/ threshold)
  â†’ Sharpe: 1.7305 (0.8606 w/ threshold) | Max DD: -0.0282
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2022-01-11 to 2023-10-10 (400 samples)
Valid: 2023-10-11 to 2024-05-16 (120 samples)
Class distribution in validation: {1.0: 61, 0.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=63 | percentile=10 | technical=13 | regime_gate=8 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-10-11 to 2024-05-16
      Winning trades: 9/26 (34.6% win rate)
      Losing trades: 17
      Avoided losses: 42 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000437
      Std dev: 0.005884
      Min/Max: -0.029572 / 0.026600
      Long positions: 26
  â†’ AUC: 0.4293 | AUCPR: 0.4550 | Accuracy: 0.4667 (0.4250 w/ threshold)
  â†’ Sharpe: 1.6772 (0.9644 w/ threshold) | Max DD: -0.0323
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-07-21 to 2024-05-16 (400 samples)
Valid: 2024-05-17 to 2024-11-26 (120 samples)
Class distribution in validation: {0.0: 60, 1.0: 60}
   âœ… Positions opened: 6/120 (5.0%)
   ğŸ” Filter rejections: threshold=79 | percentile=28 | technical=7 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=6/6 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.348

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-05-17 to 2024-11-26
      Winning trades: 5/6 (83.3% win rate)
      Losing trades: 1
      Avoided losses: 59 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000063
      Std dev: 0.000500
      Min/Max: -0.000390 / 0.004504
      Long positions: 6
  â†’ Threshold (sharpe): BUY=0.6100 | Sharpe: 0.96 | WinRate: 50.0%
  â†’ AUC: 0.8036 | AUCPR: 0.7560 | Accuracy: 0.7000 (0.5333 w/ threshold)
  â†’ Sharpe: 1.6455 (-0.5334 w/ threshold) | Max DD: -0.0008
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-01-20 to 2024-11-26 (400 samples)
Valid: 2024-11-27 to 2025-06-17 (120 samples)
Class distribution in validation: {0.0: 75, 1.0: 45}
   âœ… Positions opened: 12/120 (10.0%)
   ğŸ” Filter rejections: threshold=64 | percentile=11 | technical=33 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=12/12 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.776

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-11-27 to 2025-06-17
      Winning trades: 5/12 (41.7% win rate)
      Losing trades: 7
      Avoided losses: 68 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000061
      Std dev: 0.003576
      Min/Max: -0.013426 / 0.032055
      Long positions: 12
  â†’ AUC: 0.5452 | AUCPR: 0.4005 | Accuracy: 0.5167 (0.6083 w/ threshold)
  â†’ Sharpe: -1.1502 (-0.0811 w/ threshold) | Max DD: -0.0377
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-08-07 to 2025-06-17 (400 samples)
Valid: 2025-06-18 to 2026-01-12 (120 samples)
Class distribution in validation: {0.0: 61, 1.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=59 | percentile=6 | technical=17 | regime_gate=12 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-06-18 to 2026-01-12
      Winning trades: 14/26 (53.8% win rate)
      Losing trades: 12
      Avoided losses: 49 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000601
      Std dev: 0.004247
      Min/Max: -0.021899 / 0.021688
      Long positions: 26
  â†’ AUC: 0.6260 | AUCPR: 0.5882 | Accuracy: 0.5750 (0.5250 w/ threshold)
  â†’ Sharpe: 1.3255 (1.9496 w/ threshold) | Max DD: -0.0265
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.512974 0.535434  0.558333              0.491667  0.726199     -0.013206            0.826158   1.000000 0.046875 0.089552           0.61             NaN           sharpe                 True           0.028034    0.018846    0.421890  3.675058       0.666667            3                      3                  0.025000        0.025000                  65                            3      0.053845                         55                          17                         45                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.342797 0.586274  0.408333              0.375000  1.730534     -0.028165            0.860648   0.562500 0.116883 0.193548           0.64             NaN           sharpe                 True           0.061603    0.026603    0.284395 14.000000       0.500000           16                     21                  0.175000        0.133333                  57                           16      0.037757                         63                          36                          5                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.429286 0.455041  0.466667              0.425000  1.677212     -0.032274            0.964373   0.346154 0.147541 0.206896           0.64             NaN           sharpe                 True           0.052416    0.027416    0.403700 10.000000       0.461538           26                     26                  0.216667        0.216667                  57                           26      0.031817                         63                          10                         13                            8                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.803611 0.755997  0.700000              0.533333  1.645520     -0.000765           -0.533374   0.833333 0.083333 0.151515           0.61             NaN           sharpe                 True           0.007508    0.002744   -2.081138  1.905554       0.500000            6                     12                  0.100000        0.050000                  41                            6      0.018376                         79                          28                          7                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.545185 0.400497  0.516667              0.608333 -1.150203     -0.037723           -0.081137   0.416667 0.111111 0.175438           0.64             NaN           sharpe                 True           0.007330   -0.008190   -0.659199  6.208242       0.416667           12                     12                  0.100000        0.100000                  56                           12      0.047787                         64                          11                         33                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.626007 0.588161  0.575000              0.525000  1.325453     -0.026465            1.949612   0.538462 0.237288 0.329411           0.64             NaN           sharpe                 True           0.072120    0.042120    1.046043 12.000000       0.538462           26                     26                  0.216667        0.216667                  61                           26      0.025248                         59                           6                         17                           12                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.5433 Â± 0.1605
AUCPR:                0.5536 Â± 0.1239
Accuracy:             0.5375 Â± 0.1004
Accuracy (threshold): 0.4931 Â± 0.0831
Sharpe Ratio:         0.9925 Â± 1.1147
Sharpe (threshold):   0.6644 Â± 0.8714
Net Sharpe:           -0.0974 Â± 1.1158
Net Return:           0.0183 Â± 0.0182
Turnover:             7.9648 Â± 4.7969
Trade Coverage:       0.1236 Â± 0.0814
EV Mean/Fold:         0.03581 Â± 0.01345
Coverage Ratio:       1.0000
Max Drawdown:         -0.0231 Â± 0.0137
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 828 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 828                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5436                         â•‘
â•‘ Average Accuracy: 0.5331                 â•‘
â•‘ Average Sharpe Ratio: 1.0446             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000612                      â•‘
â•‘ Accuracy Variance: 0.000502             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
           ADX_14    0.170502
             macd    0.128160
         ema_long    0.101580
        ema_short    0.093348
distance_to_ma200    0.092510
  close_vix_ratio    0.078448
            macds    0.074936
              mfi    0.063843
    volatility_20    0.061514
   price_to_sma20    0.051008
              atr    0.043066
           roc_20    0.041085
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - MSFT                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 51.7%                                              â”‚
â”‚    â€¢ Max Probability: 62.5%                                                  â”‚
â”‚    â€¢ Min Probability: 36.0%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 26.5% (Low consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $392.74                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $420.27 (+7.01%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $378.97 (-3.50%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 51.7%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 392.739990234375,
  "profit_target": 420.270839075018,
  "stop_loss": 378.9745658140535,
  "probability": 0.5174471586942673,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.01686 | Quality=0.017 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 12
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-09-15 (400 samples)
Valid: 2022-09-16 to 2023-03-29 (120 samples)
Class distribution in validation: {1.0: 64, 0.0: 56}
   âœ… Positions opened: 3/120 (2.5%)
   ğŸ” Filter rejections: threshold=55 | percentile=20 | technical=42 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=3/3 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.919

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-09-16 to 2023-03-29
      Winning trades: 3/3 (100.0% win rate)
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000234
      Std dev: 0.002964
      Min/Max: -0.013206 / 0.024858
      Long positions: 3
  â†’ AUC: 0.4911 | AUCPR: 0.5256 | Accuracy: 0.5417 (0.4917 w/ threshold)
  â†’ Sharpe: 0.7267 (0.8262 w/ threshold) | Max DD: -0.0132
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-18 to 2023-03-29 (400 samples)
Valid: 2023-03-30 to 2023-10-10 (120 samples)
Class distribution in validation: {1.0: 77, 0.0: 43}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=64 | percentile=4 | technical=15 | regime_gate=11 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-03-30 to 2023-10-10
      Winning trades: 10/26 (38.5% win rate)
      Losing trades: 16
      Avoided losses: 27 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000136
      Std dev: 0.006357
      Min/Max: -0.023977 / 0.039800
      Long positions: 26
  â†’ AUC: 0.3129 | AUCPR: 0.5563 | Accuracy: 0.3250 (0.3083 w/ threshold)
  â†’ Sharpe: 0.5762 (-0.5388 w/ threshold) | Max DD: -0.0548
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2022-01-11 to 2023-10-10 (400 samples)
Valid: 2023-10-11 to 2024-05-16 (120 samples)
Class distribution in validation: {1.0: 61, 0.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=68 | percentile=5 | technical=13 | regime_gate=8 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-10-11 to 2024-05-16
      Winning trades: 10/26 (38.5% win rate)
      Losing trades: 16
      Avoided losses: 43 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000483
      Std dev: 0.005846
      Min/Max: -0.029572 / 0.026600
      Long positions: 26
  â†’ AUC: 0.4182 | AUCPR: 0.4506 | Accuracy: 0.4583 (0.4417 w/ threshold)
  â†’ Sharpe: 1.7212 (1.0963 w/ threshold) | Max DD: -0.0323
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-07-21 to 2024-05-16 (400 samples)
Valid: 2024-05-17 to 2024-11-26 (120 samples)
Class distribution in validation: {0.0: 60, 1.0: 60}
   âœ… Positions opened: 10/120 (8.3%)
   ğŸ” Filter rejections: threshold=75 | percentile=31 | technical=4 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=10/10 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.446

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-05-17 to 2024-11-26
      Winning trades: 6/10 (60.0% win rate)
      Losing trades: 4
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000093
      Std dev: 0.001296
      Min/Max: -0.010516 / 0.005483
      Long positions: 10
  â†’ Threshold (sharpe): BUY=0.6100 | Sharpe: 0.69 | WinRate: 72.2%
  â†’ AUC: 0.8108 | AUCPR: 0.7511 | Accuracy: 0.7000 (0.5167 w/ threshold)
  â†’ Sharpe: 1.6455 (0.1652 w/ threshold) | Max DD: -0.0105
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-01-20 to 2024-11-26 (400 samples)
Valid: 2024-11-27 to 2025-06-17 (120 samples)
Class distribution in validation: {0.0: 75, 1.0: 45}
   âœ… Positions opened: 11/120 (9.2%)
   ğŸ” Filter rejections: threshold=64 | percentile=12 | technical=33 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=11/11 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.776

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-11-27 to 2025-06-17
      Winning trades: 5/11 (45.5% win rate)
      Losing trades: 6
      Avoided losses: 69 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000079
      Std dev: 0.003571
      Min/Max: -0.013426 / 0.032055
      Long positions: 11
  â†’ AUC: 0.5505 | AUCPR: 0.4044 | Accuracy: 0.5083 (0.6167 w/ threshold)
  â†’ Sharpe: -1.0070 (-0.0014 w/ threshold) | Max DD: -0.0356
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-08-07 to 2025-06-17 (400 samples)
Valid: 2025-06-18 to 2026-01-12 (120 samples)
Class distribution in validation: {0.0: 61, 1.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=60 | percentile=6 | technical=17 | regime_gate=11 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-06-18 to 2026-01-12
      Winning trades: 15/26 (57.7% win rate)
      Losing trades: 11
      Avoided losses: 50 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000641
      Std dev: 0.004280
      Min/Max: -0.021899 / 0.021688
      Long positions: 26
  â†’ AUC: 0.6357 | AUCPR: 0.5969 | Accuracy: 0.5833 (0.5417 w/ threshold)
  â†’ Sharpe: 1.2390 (2.0845 w/ threshold) | Max DD: -0.0265
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.491071 0.525580  0.541667              0.491667  0.726659     -0.013206            0.826158   1.000000 0.046875 0.089552           0.61             NaN           sharpe                 True           0.028034    0.018846    0.421890  3.675058       0.666667            3                      3                  0.025000        0.025000                  65                            3      0.053845                         55                          20                         42                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.312896 0.556257  0.325000              0.308333  0.576209     -0.054751           -0.538808   0.384615 0.129870 0.194174           0.64             NaN           sharpe                 True          -0.016370   -0.041370   -1.035277 10.000000       0.461538           26                     26                  0.216667        0.216667                  56                           26      0.037757                         64                           4                         15                           11                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.418172 0.450620  0.458333              0.441667  1.721154     -0.032274            1.096341   0.384615 0.163934 0.229885           0.64             NaN           sharpe                 True           0.057975    0.032975    0.529111 10.000000       0.461538           26                     26                  0.216667        0.216667                  52                           26      0.031817                         68                           5                         13                            8                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.810833 0.751124  0.700000              0.516667  1.645520     -0.010516            0.165168   0.600000 0.100000 0.171428           0.61             NaN           sharpe                 True           0.011142    0.001531   -0.864839  3.844395       0.700000           10                     18                  0.150000        0.083333                  45                           10      0.020519                         75                          31                          4                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.550519 0.404446  0.508333              0.616667 -1.007047     -0.035645           -0.001428   0.454545 0.111111 0.178571           0.61             NaN           sharpe                 True           0.009485   -0.006035   -0.571636  6.208242       0.454545           11                     11                  0.091667        0.091667                  56                           11      0.047787                         64                          12                         33                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.635732 0.596901  0.583333              0.541667  1.239016     -0.026465            2.084544   0.576923 0.254237 0.352941           0.64             NaN           sharpe                 True           0.076970    0.046970    1.186608 12.000000       0.576923           26                     26                  0.216667        0.216667                  60                           26      0.025248                         60                           6                         17                           11                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.5365 Â± 0.1740
AUCPR:                0.5475 Â± 0.1219
Accuracy:             0.5194 Â± 0.1256
Accuracy (threshold): 0.4861 Â± 0.1046
Sharpe Ratio:         0.8169 Â± 1.0075
Sharpe (threshold):   0.6053 Â± 0.9326
Net Sharpe:           -0.0557 Â± 0.8937
Net Return:           0.0088 Â± 0.0314
Turnover:             7.6213 Â± 3.5306
Trade Coverage:       0.1417 Â± 0.0853
EV Mean/Fold:         0.03616 Â± 0.01291
Coverage Ratio:       1.0000
Max Drawdown:         -0.0288 Â± 0.0162
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 829 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 829                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5436                         â•‘
â•‘ Average Accuracy: 0.5331                 â•‘
â•‘ Average Sharpe Ratio: 1.0443             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000611                      â•‘
â•‘ Accuracy Variance: 0.000501             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
           ADX_14    0.159464
             macd    0.110481
         ema_long    0.107796
        ema_short    0.096095
  close_vix_ratio    0.089146
            macds    0.088482
              mfi    0.069082
    volatility_20    0.067571
distance_to_ma200    0.066596
   price_to_sma20    0.057937
           roc_20    0.045473
              atr    0.041878
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - MSFT                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 47.6%                                              â”‚
â”‚    â€¢ Max Probability: 64.3%                                                  â”‚
â”‚    â€¢ Min Probability: 19.3%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 45.0% (Low consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $392.74                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $420.27 (+7.01%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $378.97 (-3.50%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 47.6%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 392.739990234375,
  "profit_target": 420.270839075018,
  "stop_loss": 378.9745658140535,
  "probability": 0.47588181495666504,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.01249 | Quality=0.000 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 12
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-09-15 (400 samples)
Valid: 2022-09-16 to 2023-03-29 (120 samples)
Class distribution in validation: {1.0: 64, 0.0: 56}
   âœ… Positions opened: 3/120 (2.5%)
   ğŸ” Filter rejections: threshold=52 | percentile=27 | technical=38 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=3/3 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.919

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-09-16 to 2023-03-29
      Winning trades: 3/3 (100.0% win rate)
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000234
      Std dev: 0.002964
      Min/Max: -0.013206 / 0.024858
      Long positions: 3
  â†’ AUC: 0.5022 | AUCPR: 0.5368 | Accuracy: 0.5500 (0.4917 w/ threshold)
  â†’ Sharpe: 0.7483 (0.8262 w/ threshold) | Max DD: -0.0132
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-18 to 2023-03-29 (400 samples)
Valid: 2023-03-30 to 2023-10-10 (120 samples)
Class distribution in validation: {1.0: 77, 0.0: 43}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=64 | percentile=4 | technical=15 | regime_gate=11 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-03-30 to 2023-10-10
      Winning trades: 10/26 (38.5% win rate)
      Losing trades: 16
      Avoided losses: 27 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000136
      Std dev: 0.006357
      Min/Max: -0.023977 / 0.039800
      Long positions: 26
  â†’ AUC: 0.3120 | AUCPR: 0.5561 | Accuracy: 0.3250 (0.3083 w/ threshold)
  â†’ Sharpe: 0.5762 (-0.5388 w/ threshold) | Max DD: -0.0548
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2022-01-11 to 2023-10-10 (400 samples)
Valid: 2023-10-11 to 2024-05-16 (120 samples)
Class distribution in validation: {1.0: 61, 0.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=62 | percentile=11 | technical=13 | regime_gate=8 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-10-11 to 2024-05-16
      Winning trades: 9/26 (34.6% win rate)
      Losing trades: 17
      Avoided losses: 42 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000437
      Std dev: 0.005884
      Min/Max: -0.029572 / 0.026600
      Long positions: 26
  â†’ AUC: 0.4276 | AUCPR: 0.4544 | Accuracy: 0.4583 (0.4250 w/ threshold)
  â†’ Sharpe: 1.8161 (0.9644 w/ threshold) | Max DD: -0.0323
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-07-21 to 2024-05-16 (400 samples)
Valid: 2024-05-17 to 2024-11-26 (120 samples)
Class distribution in validation: {0.0: 60, 1.0: 60}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=51 | percentile=17 | technical=19 | regime_gate=7 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.861

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-05-17 to 2024-11-26
      Winning trades: 15/26 (57.7% win rate)
      Losing trades: 11
      Avoided losses: 49 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000036
      Std dev: 0.003939
      Min/Max: -0.023975 / 0.018910
      Long positions: 26
  â†’ AUC: 0.7989 | AUCPR: 0.7224 | Accuracy: 0.7583 (0.5333 w/ threshold)
  â†’ Sharpe: 1.2698 (-0.1733 w/ threshold) | Max DD: -0.0341
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-01-20 to 2024-11-26 (400 samples)
Valid: 2024-11-27 to 2025-06-17 (120 samples)
Class distribution in validation: {0.0: 75, 1.0: 45}
   âœ… Positions opened: 12/120 (10.0%)
   ğŸ” Filter rejections: threshold=65 | percentile=10 | technical=33 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=12/12 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.776

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-11-27 to 2025-06-17
      Winning trades: 5/12 (41.7% win rate)
      Losing trades: 7
      Avoided losses: 68 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000061
      Std dev: 0.003576
      Min/Max: -0.013426 / 0.032055
      Long positions: 12
  â†’ AUC: 0.5461 | AUCPR: 0.4011 | Accuracy: 0.5167 (0.6083 w/ threshold)
  â†’ Sharpe: -1.1502 (-0.0811 w/ threshold) | Max DD: -0.0377
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-08-07 to 2025-06-17 (400 samples)
Valid: 2025-06-18 to 2026-01-12 (120 samples)
Class distribution in validation: {0.0: 61, 1.0: 59}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=60 | percentile=6 | technical=17 | regime_gate=11 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-06-18 to 2026-01-12
      Winning trades: 15/26 (57.7% win rate)
      Losing trades: 11
      Avoided losses: 50 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000641
      Std dev: 0.004280
      Min/Max: -0.021899 / 0.021688
      Long positions: 26
  â†’ AUC: 0.6346 | AUCPR: 0.5965 | Accuracy: 0.5750 (0.5417 w/ threshold)
  â†’ Sharpe: 1.3255 (2.0845 w/ threshold) | Max DD: -0.0265
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.502232 0.536785  0.550000              0.491667  0.748313     -0.013206            0.826158   1.000000 0.046875 0.089552           0.61             NaN           sharpe                 True           0.028034    0.018846    0.421890  3.675058       0.666667            3                      3                  0.025000        0.025000                  68                            3      0.053845                         52                          27                         38                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.311990 0.556109  0.325000              0.308333  0.576209     -0.054751           -0.538808   0.384615 0.129870 0.194174           0.64             NaN           sharpe                 True          -0.016370   -0.041370   -1.035277 10.000000       0.461538           26                     26                  0.216667        0.216667                  56                           26      0.037757                         64                           4                         15                           11                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.427619 0.454421  0.458333              0.425000  1.816107     -0.032274            0.964373   0.346154 0.147541 0.206896           0.64             NaN           sharpe                 True           0.052416    0.027416    0.403700 10.000000       0.461538           26                     26                  0.216667        0.216667                  58                           26      0.031817                         62                          11                         13                            8                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.798889 0.722398  0.758333              0.533333  1.269774     -0.034149           -0.173349   0.576923 0.250000 0.348837           0.64             NaN           sharpe                 True           0.004362   -0.015005   -0.835616  7.747055       0.500000           26                     26                  0.216667        0.216667                  69                           26      0.029547                         51                          17                         19                            7                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.546074 0.401093  0.516667              0.608333 -1.150203     -0.037723           -0.081137   0.416667 0.111111 0.175438           0.64             NaN           sharpe                 True           0.007330   -0.008190   -0.659199  6.208242       0.416667           12                     12                  0.100000        0.100000                  55                           12      0.047787                         65                          10                         33                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.634621 0.596456  0.575000              0.541667  1.325453     -0.026465            2.084544   0.576923 0.254237 0.352941           0.64             NaN           sharpe                 True           0.076970    0.046970    1.186608 12.000000       0.576923           26                     26                  0.216667        0.216667                  60                           26      0.025248                         60                           6                         17                           11                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.5369 Â± 0.1685
AUCPR:                0.5445 Â± 0.1124
Accuracy:             0.5306 Â± 0.1428
Accuracy (threshold): 0.4847 Â± 0.1055
Sharpe Ratio:         0.7643 Â± 1.0371
Sharpe (threshold):   0.5136 Â± 0.9697
Net Sharpe:           -0.0863 Â± 0.8842
Net Return:           0.0048 Â± 0.0322
Turnover:             8.2717 Â± 3.0178
Trade Coverage:       0.1653 Â± 0.0831
EV Mean/Fold:         0.03767 Â± 0.01112
Coverage Ratio:       1.0000
Max Drawdown:         -0.0331 Â± 0.0137
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 830 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 830                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5436                         â•‘
â•‘ Average Accuracy: 0.5331                 â•‘
â•‘ Average Sharpe Ratio: 1.0440             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000610                      â•‘
â•‘ Accuracy Variance: 0.000501             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
           ADX_14    0.174539
             macd    0.112696
        ema_short    0.112142
         ema_long    0.087568
            macds    0.087334
    volatility_20    0.077971
distance_to_ma200    0.077321
  close_vix_ratio    0.069650
              mfi    0.064480
   price_to_sma20    0.053557
           roc_20    0.044886
              atr    0.037856
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - MSFT                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 50.8%                                              â”‚
â”‚    â€¢ Max Probability: 60.8%                                                  â”‚
â”‚    â€¢ Min Probability: 14.6%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 46.3% (Low consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $392.74                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $420.27 (+7.01%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $378.97 (-3.50%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 50.8%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 392.739990234375,
  "profit_target": 420.270839075018,
  "stop_loss": 378.9745658140535,
  "probability": 0.5075393443306287,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.01582 | Quality=0.008 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 12
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-10-03 (400 samples)
Valid: 2022-10-04 to 2023-05-01 (120 samples)
Class distribution in validation: {1.0: 79, 0.0: 41}
   âœ… Positions opened: 14/120 (11.7%)
   ğŸ” Filter rejections: threshold=57 | percentile=26 | technical=23 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=14/14 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.986

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-10-04 to 2023-05-01
      Winning trades: 13/14 (92.9% win rate)
      Losing trades: 1
      Avoided losses: 40 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000516
      Std dev: 0.005040
      Min/Max: -0.017751 / 0.034596
      Long positions: 14
  â†’ AUC: 0.6091 | AUCPR: 0.7519 | Accuracy: 0.5917 (0.4417 w/ threshold)
  â†’ Sharpe: 0.7430 (1.3737 w/ threshold) | Max DD: -0.0270
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-30 to 2023-05-01 (400 samples)
Valid: 2023-05-02 to 2023-12-08 (120 samples)
Class distribution in validation: {1.0: 68, 0.0: 52}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=52 | percentile=18 | technical=19 | regime_gate=5 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-05-02 to 2023-12-08
      Winning trades: 11/26 (42.3% win rate)
      Losing trades: 15
      Avoided losses: 37 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000058
      Std dev: 0.004462
      Min/Max: -0.024606 / 0.015465
      Long positions: 26
  â†’ AUC: 0.4690 | AUCPR: 0.5256 | Accuracy: 0.5333 (0.4000 w/ threshold)
  â†’ Sharpe: 1.1233 (-0.0776 w/ threshold) | Max DD: -0.0700
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2022-02-03 to 2023-12-08 (400 samples)
Valid: 2023-12-11 to 2024-06-25 (120 samples)
Class distribution in validation: {1.0: 64, 0.0: 56}
   âœ… Positions opened: 15/120 (12.5%)
   ğŸ” Filter rejections: threshold=48 | percentile=17 | technical=40 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=15/15 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-12-11 to 2024-06-25
      Winning trades: 4/15 (26.7% win rate)
      Losing trades: 11
      Avoided losses: 45 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000020
      Std dev: 0.007323
      Min/Max: -0.019148 / 0.072649
      Long positions: 15
  â†’ AUC: 0.3331 | AUCPR: 0.4619 | Accuracy: 0.3083 (0.4083 w/ threshold)
  â†’ Sharpe: 0.2008 (-0.1279 w/ threshold) | Max DD: -0.0683
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-08-08 to 2024-06-25 (400 samples)
Valid: 2024-06-26 to 2024-12-19 (120 samples)
Class distribution in validation: {0.0: 67, 1.0: 53}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=56 | percentile=7 | technical=14 | regime_gate=17 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.842

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-06-26 to 2024-12-19
      Winning trades: 15/26 (57.7% win rate)
      Losing trades: 11
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000126
      Std dev: 0.004370
      Min/Max: -0.018217 / 0.018006
      Long positions: 26
  â†’ AUC: 0.6039 | AUCPR: 0.5151 | Accuracy: 0.5917 (0.5917 w/ threshold)
  â†’ Sharpe: 1.7772 (0.1680 w/ threshold) | Max DD: -0.0517
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-02-22 to 2024-12-19 (400 samples)
Valid: 2024-12-20 to 2025-08-01 (120 samples)
Class distribution in validation: {0.0: 82, 1.0: 38}
   âœ… Positions opened: 8/120 (6.7%)
   ğŸ” Filter rejections: threshold=57 | percentile=24 | technical=31 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=8/8 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.734

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-12-20 to 2025-08-01
      Winning trades: 2/8 (25.0% win rate)
      Losing trades: 6
      Avoided losses: 76 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000091
      Std dev: 0.003185
      Min/Max: -0.019251 / 0.016019
      Long positions: 8
  â†’ AUC: 0.6293 | AUCPR: 0.4230 | Accuracy: 0.4667 (0.6500 w/ threshold)
  â†’ Sharpe: -1.3368 (-0.8488 w/ threshold) | Max DD: -0.0399
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-09-25 to 2025-08-01 (400 samples)
Valid: 2025-08-04 to 2026-01-29 (98 samples)
Class distribution in validation: {1.0: 56, 0.0: 42}
   âœ… Positions opened: 21/98 (21.4%)
   ğŸ” Filter rejections: threshold=45 | percentile=10 | technical=14 | regime_gate=8 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=21/21 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.954

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-08-04 to 2026-01-29
      Winning trades: 9/21 (42.9% win rate)
      Losing trades: 12
      Avoided losses: 30 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 98/98):
      Mean return: 0.000933
      Std dev: 0.006231
      Min/Max: -0.017331 / 0.037615
      Long positions: 21
  â†’ AUC: 0.3440 | AUCPR: 0.5079 | Accuracy: 0.3367 (0.3980 w/ threshold)
  â†’ Sharpe: 2.6676 (2.1753 w/ threshold) | Max DD: -0.0288
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.609139 0.751852  0.591667              0.441667  0.743034     -0.026991            1.373673   0.928571 0.164557 0.279570           0.64             NaN           sharpe                 True           0.061863    0.047075    0.985919  5.915447       0.642857           14                     14                  0.116667        0.116667                  63                           14      0.054369                         57                          26                         23                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.469033 0.525633  0.533333              0.400000  1.123333     -0.069979           -0.077578   0.423077 0.161765 0.234042           0.64             NaN           sharpe                 True           0.006907   -0.038093   -1.403659 18.000000       0.576923           26                     26                  0.216667        0.216667                  68                           26      0.030729                         52                          18                         19                            5                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.333147 0.461907  0.308333              0.408333  0.200770     -0.068339           -0.127873   0.266667 0.062500 0.101266           0.64             NaN           sharpe                 True           0.002445   -0.022555   -0.574079 10.000000       0.200000           15                     15                  0.125000        0.125000                  72                           15      0.035264                         48                          17                         40                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.603914 0.515104  0.591667              0.591667  1.777202     -0.051720            0.168025   0.576923 0.283019 0.379746           0.64             NaN           sharpe                 True           0.015074   -0.001776   -0.346992  6.739847       0.461538           26                     26                  0.216667        0.216667                  64                           26      0.031414                         56                           7                         14                           17                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.629332 0.423003  0.466667              0.650000 -1.336809     -0.039915           -0.848813   0.250000 0.052632 0.086956           0.61             NaN           sharpe                 True          -0.010913   -0.018251   -1.142576  2.935035       0.500000            8                      8                  0.066667        0.066667                  63                            8      0.073816                         57                          24                         31                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.343963 0.507854  0.336735              0.397959  2.667616     -0.028775            2.175256   0.428571 0.160714 0.233766           0.64             NaN           sharpe                 True           0.091454    0.058072    1.326453 13.352688       0.666667           21                     21                  0.214286        0.214286                  53                           21      0.034889                         45                          10                         14                            8                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.4981 Â± 0.1361
AUCPR:                0.5309 Â± 0.1149
Accuracy:             0.4714 Â± 0.1245
Accuracy (threshold): 0.4816 Â± 0.1105
Sharpe Ratio:         0.8625 Â± 1.3749
Sharpe (threshold):   0.4438 Â± 1.1143
Net Sharpe:           -0.1925 Â± 1.1167
Net Return:           0.0041 Â± 0.0395
Turnover:             9.4905 Â± 5.4938
Trade Coverage:       0.1593 Â± 0.0651
EV Mean/Fold:         0.04341 Â± 0.01725
Coverage Ratio:       1.0000
Max Drawdown:         -0.0476 Â± 0.0189
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 831 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 831                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5435                         â•‘
â•‘ Average Accuracy: 0.5330                 â•‘
â•‘ Average Sharpe Ratio: 1.0437             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000612                      â•‘
â•‘ Accuracy Variance: 0.000505             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
distance_to_ma200    0.131057
         ema_long    0.112953
        ema_short    0.110047
             macd    0.102509
           ADX_14    0.099295
           roc_20    0.098857
    volatility_20    0.073069
            macds    0.063531
  close_vix_ratio    0.063408
              mfi    0.053477
   price_to_sma20    0.048934
              atr    0.042864
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - AAPL                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 56.7%                                              â”‚
â”‚    â€¢ Max Probability: 62.7%                                                  â”‚
â”‚    â€¢ Min Probability: 35.7%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 27.1% (Low consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $264.18                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $280.54 (+6.19%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $256.00 (-3.10%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 56.7%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 264.17999267578125,
  "profit_target": 280.5402180432999,
  "stop_loss": 255.99987999202193,
  "probability": 0.5672370741764704,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.01923 | Quality=0.067 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 12
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-10-03 (400 samples)
Valid: 2022-10-04 to 2023-05-01 (120 samples)
Class distribution in validation: {1.0: 79, 0.0: 41}
   âœ… Positions opened: 15/120 (12.5%)
   ğŸ” Filter rejections: threshold=61 | percentile=12 | technical=32 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=15/15 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.986

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-10-04 to 2023-05-01
      Winning trades: 14/15 (93.3% win rate)
      Losing trades: 1
      Avoided losses: 40 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000442
      Std dev: 0.005012
      Min/Max: -0.017751 / 0.034596
      Long positions: 15
  â†’ AUC: 0.5952 | AUCPR: 0.7432 | Accuracy: 0.6417 (0.4500 w/ threshold)
  â†’ Sharpe: 1.6080 (1.1483 w/ threshold) | Max DD: -0.0270
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-30 to 2023-05-01 (400 samples)
Valid: 2023-05-02 to 2023-12-08 (120 samples)
Class distribution in validation: {1.0: 68, 0.0: 52}
   âœ… Positions opened: 25/120 (20.8%)
   ğŸ” Filter rejections: threshold=52 | percentile=25 | technical=18 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=25/25 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-05-02 to 2023-12-08
      Winning trades: 13/25 (52.0% win rate)
      Losing trades: 12
      Avoided losses: 40 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000055
      Std dev: 0.005968
      Min/Max: -0.024606 / 0.046927
      Long positions: 25
  â†’ AUC: 0.4805 | AUCPR: 0.5366 | Accuracy: 0.5250 (0.4417 w/ threshold)
  â†’ Sharpe: 1.0170 (-0.0661 w/ threshold) | Max DD: -0.0703
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2022-02-03 to 2023-12-08 (400 samples)
Valid: 2023-12-11 to 2024-06-25 (120 samples)
Class distribution in validation: {1.0: 64, 0.0: 56}
   âœ… Positions opened: 15/120 (12.5%)
   ğŸ” Filter rejections: threshold=48 | percentile=17 | technical=40 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=15/15 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-12-11 to 2024-06-25
      Winning trades: 4/15 (26.7% win rate)
      Losing trades: 11
      Avoided losses: 45 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000020
      Std dev: 0.007323
      Min/Max: -0.019148 / 0.072649
      Long positions: 15
  â†’ AUC: 0.3320 | AUCPR: 0.4609 | Accuracy: 0.3000 (0.4083 w/ threshold)
  â†’ Sharpe: 0.1506 (-0.1279 w/ threshold) | Max DD: -0.0683
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-08-08 to 2024-06-25 (400 samples)
Valid: 2024-06-26 to 2024-12-19 (120 samples)
Class distribution in validation: {0.0: 67, 1.0: 53}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=55 | percentile=6 | technical=14 | regime_gate=19 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.842

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-06-26 to 2024-12-19
      Winning trades: 15/26 (57.7% win rate)
      Losing trades: 11
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000220
      Std dev: 0.004073
      Min/Max: -0.018217 / 0.018006
      Long positions: 26
  â†’ AUC: 0.6174 | AUCPR: 0.5262 | Accuracy: 0.5750 (0.5917 w/ threshold)
  â†’ Sharpe: 0.8582 (-1.1664 w/ threshold) | Max DD: -0.0542
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-02-22 to 2024-12-19 (400 samples)
Valid: 2024-12-20 to 2025-08-01 (120 samples)
Class distribution in validation: {0.0: 82, 1.0: 38}
   âœ… Positions opened: 8/120 (6.7%)
   ğŸ” Filter rejections: threshold=57 | percentile=24 | technical=31 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=8/8 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.734

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-12-20 to 2025-08-01
      Winning trades: 2/8 (25.0% win rate)
      Losing trades: 6
      Avoided losses: 76 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000091
      Std dev: 0.003185
      Min/Max: -0.019251 / 0.016019
      Long positions: 8
  â†’ AUC: 0.6327 | AUCPR: 0.4251 | Accuracy: 0.4667 (0.6500 w/ threshold)
  â†’ Sharpe: -0.9923 (-0.8488 w/ threshold) | Max DD: -0.0399
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-09-25 to 2025-08-01 (400 samples)
Valid: 2025-08-04 to 2026-01-29 (98 samples)
Class distribution in validation: {1.0: 56, 0.0: 42}
   âœ… Positions opened: 12/98 (12.2%)
   ğŸ” Filter rejections: threshold=49 | percentile=32 | technical=5 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=12/12 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.954

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-08-04 to 2026-01-29
      Winning trades: 6/12 (50.0% win rate)
      Losing trades: 6
      Avoided losses: 36 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 98/98):
      Mean return: 0.000166
      Std dev: 0.005377
      Min/Max: -0.030768 / 0.030552
      Long positions: 12
  â†’ Threshold (sharpe): BUY=0.6400 | Sharpe: 0.71 | WinRate: 40.0%
  â†’ AUC: 0.3359 | AUCPR: 0.5003 | Accuracy: 0.4184 (0.4286 w/ threshold)
  â†’ Sharpe: 3.2030 (0.2557 w/ threshold) | Max DD: -0.0517
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.595245 0.743158  0.641667              0.450000  1.607961     -0.026991            1.148262   0.933333 0.177215 0.297872           0.64             NaN           sharpe                 True           0.053027    0.033309    0.625647  7.887263       0.600000           15                     15                  0.125000        0.125000                  59                           15      0.054369                         61                          12                         32                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.480486 0.536575  0.525000              0.441667  1.016981     -0.070296           -0.066099   0.520000 0.191176 0.279569           0.64             NaN           sharpe                 True           0.006542   -0.043458   -1.162567 20.000000       0.440000           25                     25                  0.208333        0.208333                  68                           25      0.030729                         52                          25                         18                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.332031 0.460901  0.300000              0.408333  0.150613     -0.068339           -0.127873   0.266667 0.062500 0.101266           0.64             NaN           sharpe                 True           0.002445   -0.022555   -0.574079 10.000000       0.200000           15                     15                  0.125000        0.125000                  72                           15      0.035264                         48                          17                         40                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.617432 0.526193  0.575000              0.591667  0.858171     -0.054189           -1.166447   0.576923 0.283019 0.379746           0.64             NaN           sharpe                 True          -0.026386   -0.043236   -1.674362  6.739847       0.384615           26                     26                  0.216667        0.216667                  65                           26      0.031414                         55                           6                         14                           19                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.632702 0.425088  0.466667              0.650000 -0.992259     -0.039915           -0.848813   0.250000 0.052632 0.086956           0.61             NaN           sharpe                 True          -0.010913   -0.018251   -1.142576  2.935035       0.500000            8                      8                  0.066667        0.066667                  63                            8      0.073816                         57                          24                         31                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.335884 0.500310  0.418367              0.428571  3.203028     -0.051707            0.255686   0.500000 0.107143 0.176470           0.64             NaN           sharpe                 True           0.016265    0.001958   -0.177601  5.722581       0.500000           12                     20                  0.204082        0.122449                  49                           12      0.034889                         49                          32                          5                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.4990 Â± 0.1386
AUCPR:                0.5320 Â± 0.1115
Accuracy:             0.4878 Â± 0.1210
Accuracy (threshold): 0.4950 Â± 0.1002
Sharpe Ratio:         0.9741 Â± 1.4092
Sharpe (threshold):   -0.1342 Â± 0.8219
Net Sharpe:           -0.6843 Â± 0.8251
Net Return:           -0.0154 Â± 0.0293
Turnover:             8.8808 Â± 5.9294
Trade Coverage:       0.1440 Â± 0.0576
EV Mean/Fold:         0.04341 Â± 0.01725
Coverage Ratio:       1.0000
Max Drawdown:         -0.0519 Â± 0.0166
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 832 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 832                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5435                         â•‘
â•‘ Average Accuracy: 0.5329                 â•‘
â•‘ Average Sharpe Ratio: 1.0437             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000614                      â•‘
â•‘ Accuracy Variance: 0.000506             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
distance_to_ma200    0.109079
        ema_short    0.105411
           roc_20    0.105175
         ema_long    0.096055
           ADX_14    0.094870
             macd    0.087697
            macds    0.075841
              mfi    0.070497
              atr    0.070124
    volatility_20    0.067965
  close_vix_ratio    0.060492
   price_to_sma20    0.056794
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - AAPL                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 58.4%                                              â”‚
â”‚    â€¢ Max Probability: 60.7%                                                  â”‚
â”‚    â€¢ Min Probability: 51.1%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 9.6% (High consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $264.18                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $280.54 (+6.19%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $256.00 (-3.10%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 58.4%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 264.17999267578125,
  "profit_target": 280.5402180432999,
  "stop_loss": 255.99987999202193,
  "probability": 0.5844289362430573,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.02082 | Quality=0.084 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 12
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-10-03 (400 samples)
Valid: 2022-10-04 to 2023-05-01 (120 samples)
Class distribution in validation: {1.0: 79, 0.0: 41}
   âœ… Positions opened: 15/120 (12.5%)
   ğŸ” Filter rejections: threshold=61 | percentile=11 | technical=33 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=15/15 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.986

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-10-04 to 2023-05-01
      Winning trades: 14/15 (93.3% win rate)
      Losing trades: 1
      Avoided losses: 40 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000442
      Std dev: 0.005012
      Min/Max: -0.017751 / 0.034596
      Long positions: 15
  â†’ AUC: 0.5883 | AUCPR: 0.7350 | Accuracy: 0.6417 (0.4500 w/ threshold)
  â†’ Sharpe: 1.6080 (1.1483 w/ threshold) | Max DD: -0.0270
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-30 to 2023-05-01 (400 samples)
Valid: 2023-05-02 to 2023-12-08 (120 samples)
Class distribution in validation: {1.0: 68, 0.0: 52}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=52 | percentile=19 | technical=19 | regime_gate=4 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-05-02 to 2023-12-08
      Winning trades: 12/26 (46.2% win rate)
      Losing trades: 14
      Avoided losses: 38 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000061
      Std dev: 0.004463
      Min/Max: -0.024606 / 0.015465
      Long positions: 26
  â†’ AUC: 0.4673 | AUCPR: 0.5274 | Accuracy: 0.5333 (0.4167 w/ threshold)
  â†’ Sharpe: 1.1233 (-0.0657 w/ threshold) | Max DD: -0.0706
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2022-02-03 to 2023-12-08 (400 samples)
Valid: 2023-12-11 to 2024-06-25 (120 samples)
Class distribution in validation: {1.0: 64, 0.0: 56}
   âœ… Positions opened: 14/120 (11.7%)
   ğŸ” Filter rejections: threshold=48 | percentile=18 | technical=40 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=14/14 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-12-11 to 2024-06-25
      Winning trades: 4/14 (28.6% win rate)
      Losing trades: 10
      Avoided losses: 46 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000091
      Std dev: 0.007282
      Min/Max: -0.019148 / 0.072649
      Long positions: 14
  â†’ AUC: 0.3361 | AUCPR: 0.4641 | Accuracy: 0.3250 (0.4167 w/ threshold)
  â†’ Sharpe: 0.2945 (0.0246 w/ threshold) | Max DD: -0.0604
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-08-08 to 2024-06-25 (400 samples)
Valid: 2024-06-26 to 2024-12-19 (120 samples)
Class distribution in validation: {0.0: 67, 1.0: 53}
   âœ… Positions opened: 19/120 (15.8%)
   ğŸ” Filter rejections: threshold=58 | percentile=37 | technical=6 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=19/19 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.840

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-06-26 to 2024-12-19
      Winning trades: 13/19 (68.4% win rate)
      Losing trades: 6
      Avoided losses: 61 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000448
      Std dev: 0.003649
      Min/Max: -0.018217 / 0.018006
      Long positions: 19
  â†’ Threshold (sharpe): BUY=0.6400 | Sharpe: 1.56 | WinRate: 60.0%
  â†’ AUC: 0.6080 | AUCPR: 0.5366 | Accuracy: 0.6000 (0.6167 w/ threshold)
  â†’ Sharpe: 1.6216 (1.6038 w/ threshold) | Max DD: -0.0237
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-02-22 to 2024-12-19 (400 samples)
Valid: 2024-12-20 to 2025-08-01 (120 samples)
Class distribution in validation: {0.0: 82, 1.0: 38}
   âœ… Positions opened: 8/120 (6.7%)
   ğŸ” Filter rejections: threshold=55 | percentile=25 | technical=32 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=8/8 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.734

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-12-20 to 2025-08-01
      Winning trades: 2/8 (25.0% win rate)
      Losing trades: 6
      Avoided losses: 76 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000091
      Std dev: 0.003185
      Min/Max: -0.019251 / 0.016019
      Long positions: 8
  â†’ AUC: 0.6277 | AUCPR: 0.4205 | Accuracy: 0.4583 (0.6500 w/ threshold)
  â†’ Sharpe: -1.2420 (-0.8488 w/ threshold) | Max DD: -0.0399
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-09-25 to 2025-08-01 (400 samples)
Valid: 2025-08-04 to 2026-01-29 (98 samples)
Class distribution in validation: {1.0: 56, 0.0: 42}
   âœ… Positions opened: 6/98 (6.1%)
   ğŸ” Filter rejections: threshold=77 | percentile=13 | technical=2 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=6/6 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.954

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-08-04 to 2026-01-29
      Winning trades: 2/6 (33.3% win rate)
      Losing trades: 4
      Avoided losses: 38 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 98/98):
      Mean return: -0.000226
      Std dev: 0.004116
      Min/Max: -0.030768 / 0.016751
      Long positions: 6
  â†’ Threshold (sharpe): BUY=0.6100 | Sharpe: 1.63 | WinRate: 50.0%
  â†’ AUC: 0.3710 | AUCPR: 0.5133 | Accuracy: 0.3980 (0.4082 w/ threshold)
  â†’ Sharpe: 2.1862 (-1.1760 w/ threshold) | Max DD: -0.0517
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.588299 0.734954  0.641667              0.450000  1.607961     -0.026991            1.148262   0.933333 0.177215 0.297872           0.64             NaN           sharpe                 True           0.053027    0.033309    0.625647  7.887263       0.600000           15                     15                  0.125000        0.125000                  59                           15      0.054369                         61                          11                         33                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.467336 0.527369  0.533333              0.416667  1.123333     -0.070624           -0.065695   0.461538 0.176471 0.255319           0.64             NaN           sharpe                 True           0.007307   -0.042693   -1.537765 20.000000       0.538462           26                     26                  0.216667        0.216667                  68                           26      0.030729                         52                          19                         19                            4                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.336077 0.464142  0.325000              0.416667  0.294530     -0.060418            0.024552   0.285714 0.062500 0.102564           0.64             NaN           sharpe                 True           0.010875   -0.014125   -0.425440 10.000000       0.214286           14                     14                  0.116667        0.116667                  72                           14      0.035264                         48                          18                         40                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.607998 0.536624  0.600000              0.616667  1.621557     -0.023718            1.603800   0.684210 0.245283 0.361111           0.64             NaN           sharpe                 True           0.053763    0.020110    0.390384 13.461287       0.526316           19                     25                  0.208333        0.158333                  62                           19      0.031361                         58                          37                          6                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.627728 0.420536  0.458333              0.650000 -1.242025     -0.039915           -0.848813   0.250000 0.052632 0.086956           0.61             NaN           sharpe                 True          -0.010913   -0.018251   -1.142576  2.935035       0.500000            8                      8                  0.066667        0.066667                  65                            8      0.073816                         55                          25                         32                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.370961 0.513332  0.397959              0.408163  2.186201     -0.051707           -1.176027   0.333333 0.035714 0.064516           0.61             NaN           sharpe                 True          -0.022105   -0.026874   -1.359333  1.907527       0.333333            6                     10                  0.102041        0.061224                  21                            6      0.034889                         77                          13                          2                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.4997 Â± 0.1268
AUCPR:                0.5328 Â± 0.1083
Accuracy:             0.4927 Â± 0.1214
Accuracy (threshold): 0.4930 Â± 0.1101
Sharpe Ratio:         0.9319 Â± 1.2389
Sharpe (threshold):   0.1143 Â± 1.0882
Net Sharpe:           -0.5748 Â± 0.9231
Net Return:           -0.0081 Â± 0.0290
Turnover:             9.3652 Â± 6.7739
Trade Coverage:       0.1241 Â± 0.0584
EV Mean/Fold:         0.04340 Â± 0.01726
Coverage Ratio:       1.0000
Max Drawdown:         -0.0456 Â± 0.0187
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 833 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 833                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5434                         â•‘
â•‘ Average Accuracy: 0.5329                 â•‘
â•‘ Average Sharpe Ratio: 1.0435             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000615                      â•‘
â•‘ Accuracy Variance: 0.000508             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
distance_to_ma200    0.111655
           roc_20    0.110204
        ema_short    0.101479
         ema_long    0.095172
             macd    0.092785
           ADX_14    0.085552
  close_vix_ratio    0.084132
    volatility_20    0.068969
            macds    0.066547
              mfi    0.064813
   price_to_sma20    0.062893
              atr    0.055801
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - AAPL                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 57.6%                                              â”‚
â”‚    â€¢ Max Probability: 68.6%                                                  â”‚
â”‚    â€¢ Min Probability: 42.3%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 26.3% (Low consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $264.18                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $280.54 (+6.19%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $256.00 (-3.10%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 57.6%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 264.17999267578125,
  "profit_target": 280.5402180432999,
  "stop_loss": 255.99987999202193,
  "probability": 0.5763011028369268,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.02007 | Quality=0.076 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 11
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-10-03 (400 samples)
Valid: 2022-10-04 to 2023-05-01 (120 samples)
Class distribution in validation: {1.0: 79, 0.0: 41}
   âœ… Positions opened: 14/120 (11.7%)
   ğŸ” Filter rejections: threshold=57 | percentile=26 | technical=23 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=14/14 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.986

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-10-04 to 2023-05-01
      Winning trades: 13/14 (92.9% win rate)
      Losing trades: 1
      Avoided losses: 40 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000516
      Std dev: 0.005040
      Min/Max: -0.017751 / 0.034596
      Long positions: 14
  â†’ AUC: 0.6091 | AUCPR: 0.7519 | Accuracy: 0.5917 (0.4417 w/ threshold)
  â†’ Sharpe: 0.7430 (1.3737 w/ threshold) | Max DD: -0.0270
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-30 to 2023-05-01 (400 samples)
Valid: 2023-05-02 to 2023-12-08 (120 samples)
Class distribution in validation: {1.0: 68, 0.0: 52}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=52 | percentile=18 | technical=19 | regime_gate=5 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-05-02 to 2023-12-08
      Winning trades: 11/26 (42.3% win rate)
      Losing trades: 15
      Avoided losses: 37 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000058
      Std dev: 0.004462
      Min/Max: -0.024606 / 0.015465
      Long positions: 26
  â†’ AUC: 0.4690 | AUCPR: 0.5256 | Accuracy: 0.5333 (0.4000 w/ threshold)
  â†’ Sharpe: 1.1233 (-0.0776 w/ threshold) | Max DD: -0.0700
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2022-02-03 to 2023-12-08 (400 samples)
Valid: 2023-12-11 to 2024-06-25 (120 samples)
Class distribution in validation: {1.0: 64, 0.0: 56}
   âœ… Positions opened: 15/120 (12.5%)
   ğŸ” Filter rejections: threshold=48 | percentile=17 | technical=40 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=15/15 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-12-11 to 2024-06-25
      Winning trades: 4/15 (26.7% win rate)
      Losing trades: 11
      Avoided losses: 45 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000020
      Std dev: 0.007323
      Min/Max: -0.019148 / 0.072649
      Long positions: 15
  â†’ AUC: 0.3331 | AUCPR: 0.4619 | Accuracy: 0.3083 (0.4083 w/ threshold)
  â†’ Sharpe: 0.2008 (-0.1279 w/ threshold) | Max DD: -0.0683
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-08-08 to 2024-06-25 (400 samples)
Valid: 2024-06-26 to 2024-12-19 (120 samples)
Class distribution in validation: {0.0: 67, 1.0: 53}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=56 | percentile=7 | technical=14 | regime_gate=17 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.842

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-06-26 to 2024-12-19
      Winning trades: 15/26 (57.7% win rate)
      Losing trades: 11
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000126
      Std dev: 0.004370
      Min/Max: -0.018217 / 0.018006
      Long positions: 26
  â†’ AUC: 0.6039 | AUCPR: 0.5151 | Accuracy: 0.5917 (0.5917 w/ threshold)
  â†’ Sharpe: 1.7772 (0.1680 w/ threshold) | Max DD: -0.0517
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-02-22 to 2024-12-19 (400 samples)
Valid: 2024-12-20 to 2025-08-01 (120 samples)
Class distribution in validation: {0.0: 82, 1.0: 38}
   âœ… Positions opened: 8/120 (6.7%)
   ğŸ” Filter rejections: threshold=57 | percentile=24 | technical=31 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=8/8 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.734

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-12-20 to 2025-08-01
      Winning trades: 2/8 (25.0% win rate)
      Losing trades: 6
      Avoided losses: 76 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000091
      Std dev: 0.003185
      Min/Max: -0.019251 / 0.016019
      Long positions: 8
  â†’ AUC: 0.6293 | AUCPR: 0.4230 | Accuracy: 0.4667 (0.6500 w/ threshold)
  â†’ Sharpe: -1.3368 (-0.8488 w/ threshold) | Max DD: -0.0399
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-09-25 to 2025-08-01 (400 samples)
Valid: 2025-08-04 to 2026-01-29 (98 samples)
Class distribution in validation: {1.0: 56, 0.0: 42}
   âœ… Positions opened: 21/98 (21.4%)
   ğŸ” Filter rejections: threshold=45 | percentile=10 | technical=14 | regime_gate=8 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=21/21 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.954

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-08-04 to 2026-01-29
      Winning trades: 9/21 (42.9% win rate)
      Losing trades: 12
      Avoided losses: 30 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 98/98):
      Mean return: 0.000933
      Std dev: 0.006231
      Min/Max: -0.017331 / 0.037615
      Long positions: 21
  â†’ AUC: 0.3440 | AUCPR: 0.5079 | Accuracy: 0.3367 (0.3980 w/ threshold)
  â†’ Sharpe: 2.6676 (2.1753 w/ threshold) | Max DD: -0.0288
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.609139 0.751852  0.591667              0.441667  0.743034     -0.026991            1.373673   0.928571 0.164557 0.279570           0.64             NaN           sharpe                 True           0.061863    0.047075    0.985919  5.915447       0.642857           14                     14                  0.116667        0.116667                  63                           14      0.054369                         57                          26                         23                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.469033 0.525633  0.533333              0.400000  1.123333     -0.069979           -0.077578   0.423077 0.161765 0.234042           0.64             NaN           sharpe                 True           0.006907   -0.038093   -1.403659 18.000000       0.576923           26                     26                  0.216667        0.216667                  68                           26      0.030729                         52                          18                         19                            5                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.333147 0.461907  0.308333              0.408333  0.200770     -0.068339           -0.127873   0.266667 0.062500 0.101266           0.64             NaN           sharpe                 True           0.002445   -0.022555   -0.574079 10.000000       0.200000           15                     15                  0.125000        0.125000                  72                           15      0.035264                         48                          17                         40                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.603914 0.515104  0.591667              0.591667  1.777202     -0.051720            0.168025   0.576923 0.283019 0.379746           0.64             NaN           sharpe                 True           0.015074   -0.001776   -0.346992  6.739847       0.461538           26                     26                  0.216667        0.216667                  64                           26      0.031414                         56                           7                         14                           17                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.629332 0.423003  0.466667              0.650000 -1.336809     -0.039915           -0.848813   0.250000 0.052632 0.086956           0.61             NaN           sharpe                 True          -0.010913   -0.018251   -1.142576  2.935035       0.500000            8                      8                  0.066667        0.066667                  63                            8      0.073816                         57                          24                         31                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.343963 0.507854  0.336735              0.397959  2.667616     -0.028775            2.175256   0.428571 0.160714 0.233766           0.64             NaN           sharpe                 True           0.091454    0.058072    1.326453 13.352688       0.666667           21                     21                  0.214286        0.214286                  53                           21      0.034889                         45                          10                         14                            8                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.4981 Â± 0.1361
AUCPR:                0.5309 Â± 0.1149
Accuracy:             0.4714 Â± 0.1245
Accuracy (threshold): 0.4816 Â± 0.1105
Sharpe Ratio:         0.8625 Â± 1.3749
Sharpe (threshold):   0.4438 Â± 1.1143
Net Sharpe:           -0.1925 Â± 1.1167
Net Return:           0.0041 Â± 0.0395
Turnover:             9.4905 Â± 5.4938
Trade Coverage:       0.1593 Â± 0.0651
EV Mean/Fold:         0.04341 Â± 0.01725
Coverage Ratio:       1.0000
Max Drawdown:         -0.0476 Â± 0.0189
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 834 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 834                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5434                         â•‘
â•‘ Average Accuracy: 0.5328                 â•‘
â•‘ Average Sharpe Ratio: 1.0433             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000617                      â•‘
â•‘ Accuracy Variance: 0.000512             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
distance_to_ma200    0.131057
         ema_long    0.112953
        ema_short    0.110047
             macd    0.102509
           ADX_14    0.099295
           roc_20    0.098857
    volatility_20    0.073069
            macds    0.063531
  close_vix_ratio    0.063408
              mfi    0.053477
   price_to_sma20    0.048934
              atr    0.042864
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - AAPL                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 56.7%                                              â”‚
â”‚    â€¢ Max Probability: 62.7%                                                  â”‚
â”‚    â€¢ Min Probability: 35.7%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 27.1% (Low consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $264.18                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $280.54 (+6.19%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $256.00 (-3.10%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 56.7%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 264.17999267578125,
  "profit_target": 280.5402180432999,
  "stop_loss": 255.99987999202193,
  "probability": 0.5672370741764704,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.01923 | Quality=0.067 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 11
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-10-03 (400 samples)
Valid: 2022-10-04 to 2023-05-01 (120 samples)
Class distribution in validation: {1.0: 79, 0.0: 41}
   âœ… Positions opened: 15/120 (12.5%)
   ğŸ” Filter rejections: threshold=61 | percentile=12 | technical=32 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=15/15 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.986

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-10-04 to 2023-05-01
      Winning trades: 14/15 (93.3% win rate)
      Losing trades: 1
      Avoided losses: 40 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000442
      Std dev: 0.005012
      Min/Max: -0.017751 / 0.034596
      Long positions: 15
  â†’ AUC: 0.5952 | AUCPR: 0.7432 | Accuracy: 0.6417 (0.4500 w/ threshold)
  â†’ Sharpe: 1.6080 (1.1483 w/ threshold) | Max DD: -0.0270
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-30 to 2023-05-01 (400 samples)
Valid: 2023-05-02 to 2023-12-08 (120 samples)
Class distribution in validation: {1.0: 68, 0.0: 52}
   âœ… Positions opened: 25/120 (20.8%)
   ğŸ” Filter rejections: threshold=52 | percentile=25 | technical=18 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=25/25 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-05-02 to 2023-12-08
      Winning trades: 13/25 (52.0% win rate)
      Losing trades: 12
      Avoided losses: 40 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000055
      Std dev: 0.005968
      Min/Max: -0.024606 / 0.046927
      Long positions: 25
  â†’ AUC: 0.4805 | AUCPR: 0.5366 | Accuracy: 0.5250 (0.4417 w/ threshold)
  â†’ Sharpe: 1.0170 (-0.0661 w/ threshold) | Max DD: -0.0703
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2022-02-03 to 2023-12-08 (400 samples)
Valid: 2023-12-11 to 2024-06-25 (120 samples)
Class distribution in validation: {1.0: 64, 0.0: 56}
   âœ… Positions opened: 15/120 (12.5%)
   ğŸ” Filter rejections: threshold=48 | percentile=17 | technical=40 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=15/15 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-12-11 to 2024-06-25
      Winning trades: 4/15 (26.7% win rate)
      Losing trades: 11
      Avoided losses: 45 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000020
      Std dev: 0.007323
      Min/Max: -0.019148 / 0.072649
      Long positions: 15
  â†’ AUC: 0.3320 | AUCPR: 0.4609 | Accuracy: 0.3000 (0.4083 w/ threshold)
  â†’ Sharpe: 0.1506 (-0.1279 w/ threshold) | Max DD: -0.0683
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-08-08 to 2024-06-25 (400 samples)
Valid: 2024-06-26 to 2024-12-19 (120 samples)
Class distribution in validation: {0.0: 67, 1.0: 53}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=55 | percentile=6 | technical=14 | regime_gate=19 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.842

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-06-26 to 2024-12-19
      Winning trades: 15/26 (57.7% win rate)
      Losing trades: 11
      Avoided losses: 56 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000220
      Std dev: 0.004073
      Min/Max: -0.018217 / 0.018006
      Long positions: 26
  â†’ AUC: 0.6174 | AUCPR: 0.5262 | Accuracy: 0.5750 (0.5917 w/ threshold)
  â†’ Sharpe: 0.8582 (-1.1664 w/ threshold) | Max DD: -0.0542
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-02-22 to 2024-12-19 (400 samples)
Valid: 2024-12-20 to 2025-08-01 (120 samples)
Class distribution in validation: {0.0: 82, 1.0: 38}
   âœ… Positions opened: 8/120 (6.7%)
   ğŸ” Filter rejections: threshold=57 | percentile=24 | technical=31 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=8/8 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.734

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-12-20 to 2025-08-01
      Winning trades: 2/8 (25.0% win rate)
      Losing trades: 6
      Avoided losses: 76 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000091
      Std dev: 0.003185
      Min/Max: -0.019251 / 0.016019
      Long positions: 8
  â†’ AUC: 0.6327 | AUCPR: 0.4251 | Accuracy: 0.4667 (0.6500 w/ threshold)
  â†’ Sharpe: -0.9923 (-0.8488 w/ threshold) | Max DD: -0.0399
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-09-25 to 2025-08-01 (400 samples)
Valid: 2025-08-04 to 2026-01-29 (98 samples)
Class distribution in validation: {1.0: 56, 0.0: 42}
   âœ… Positions opened: 12/98 (12.2%)
   ğŸ” Filter rejections: threshold=49 | percentile=32 | technical=5 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=12/12 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.954

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-08-04 to 2026-01-29
      Winning trades: 6/12 (50.0% win rate)
      Losing trades: 6
      Avoided losses: 36 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 98/98):
      Mean return: 0.000166
      Std dev: 0.005377
      Min/Max: -0.030768 / 0.030552
      Long positions: 12
  â†’ Threshold (sharpe): BUY=0.6400 | Sharpe: 0.71 | WinRate: 40.0%
  â†’ AUC: 0.3359 | AUCPR: 0.5003 | Accuracy: 0.4184 (0.4286 w/ threshold)
  â†’ Sharpe: 3.2030 (0.2557 w/ threshold) | Max DD: -0.0517
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.595245 0.743158  0.641667              0.450000  1.607961     -0.026991            1.148262   0.933333 0.177215 0.297872           0.64             NaN           sharpe                 True           0.053027    0.033309    0.625647  7.887263       0.600000           15                     15                  0.125000        0.125000                  59                           15      0.054369                         61                          12                         32                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.480486 0.536575  0.525000              0.441667  1.016981     -0.070296           -0.066099   0.520000 0.191176 0.279569           0.64             NaN           sharpe                 True           0.006542   -0.043458   -1.162567 20.000000       0.440000           25                     25                  0.208333        0.208333                  68                           25      0.030729                         52                          25                         18                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.332031 0.460901  0.300000              0.408333  0.150613     -0.068339           -0.127873   0.266667 0.062500 0.101266           0.64             NaN           sharpe                 True           0.002445   -0.022555   -0.574079 10.000000       0.200000           15                     15                  0.125000        0.125000                  72                           15      0.035264                         48                          17                         40                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.617432 0.526193  0.575000              0.591667  0.858171     -0.054189           -1.166447   0.576923 0.283019 0.379746           0.64             NaN           sharpe                 True          -0.026386   -0.043236   -1.674362  6.739847       0.384615           26                     26                  0.216667        0.216667                  65                           26      0.031414                         55                           6                         14                           19                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.632702 0.425088  0.466667              0.650000 -0.992259     -0.039915           -0.848813   0.250000 0.052632 0.086956           0.61             NaN           sharpe                 True          -0.010913   -0.018251   -1.142576  2.935035       0.500000            8                      8                  0.066667        0.066667                  63                            8      0.073816                         57                          24                         31                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.335884 0.500310  0.418367              0.428571  3.203028     -0.051707            0.255686   0.500000 0.107143 0.176470           0.64             NaN           sharpe                 True           0.016265    0.001958   -0.177601  5.722581       0.500000           12                     20                  0.204082        0.122449                  49                           12      0.034889                         49                          32                          5                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.4990 Â± 0.1386
AUCPR:                0.5320 Â± 0.1115
Accuracy:             0.4878 Â± 0.1210
Accuracy (threshold): 0.4950 Â± 0.1002
Sharpe Ratio:         0.9741 Â± 1.4092
Sharpe (threshold):   -0.1342 Â± 0.8219
Net Sharpe:           -0.6843 Â± 0.8251
Net Return:           -0.0154 Â± 0.0293
Turnover:             8.8808 Â± 5.9294
Trade Coverage:       0.1440 Â± 0.0576
EV Mean/Fold:         0.04341 Â± 0.01725
Coverage Ratio:       1.0000
Max Drawdown:         -0.0519 Â± 0.0166
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 835 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 835                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5433                         â•‘
â•‘ Average Accuracy: 0.5327                 â•‘
â•‘ Average Sharpe Ratio: 1.0432             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000619                      â•‘
â•‘ Accuracy Variance: 0.000513             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
distance_to_ma200    0.109079
        ema_short    0.105411
           roc_20    0.105175
         ema_long    0.096055
           ADX_14    0.094870
             macd    0.087697
            macds    0.075841
              mfi    0.070497
              atr    0.070124
    volatility_20    0.067965
  close_vix_ratio    0.060492
   price_to_sma20    0.056794
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - AAPL                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 58.4%                                              â”‚
â”‚    â€¢ Max Probability: 60.7%                                                  â”‚
â”‚    â€¢ Min Probability: 51.1%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 9.6% (High consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $264.18                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $280.54 (+6.19%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $256.00 (-3.10%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 58.4%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 264.17999267578125,
  "profit_target": 280.5402180432999,
  "stop_loss": 255.99987999202193,
  "probability": 0.5844289362430573,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.02082 | Quality=0.084 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
/home/albertojoya/Documentos/ForecastTRADE/.venv/lib64/python3.12/site-packages/joblib/_multiprocessing_helpers.py:44: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode
  warnings.warn("%s.  joblib will operate in serial mode" % (e,))

ğŸ“Š Feature engineering summary:
   â€¢ Requested seed features: 32
   â€¢ Available from seed: 25
   â€¢ Correlation-based drops: 11
   â€¢ Low-importance drops: 8
   â€¢ Final contract features: 25

ğŸ‘‘ --- Launching XGBoost with Time-Series-Aware Cross-Validation --- ğŸ‘‘

--- Starting Time-Series-Aware Model Training ---
Configured folds: 12 | Min validation size: 60 | Trading mode: long_only | mode=fast | plots=none
âœ¨ Using SLIDING WINDOW strategy (adaptive, not expanding)
   Train window: 400 days | Test window: 120 days
   This allows model to adapt faster to market regime changes
   Generated 6 sliding window splits

--- Fold 1/6 (TimeSeriesSplit) ---
Train: 2020-12-11 to 2022-10-03 (400 samples)
Valid: 2022-10-04 to 2023-05-01 (120 samples)
Class distribution in validation: {1.0: 79, 0.0: 41}
   âœ… Positions opened: 15/120 (12.5%)
   ğŸ” Filter rejections: threshold=61 | percentile=11 | technical=33 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=15/15 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.986

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2022-10-04 to 2023-05-01
      Winning trades: 14/15 (93.3% win rate)
      Losing trades: 1
      Avoided losses: 40 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000442
      Std dev: 0.005012
      Min/Max: -0.017751 / 0.034596
      Long positions: 15
  â†’ AUC: 0.5883 | AUCPR: 0.7350 | Accuracy: 0.6417 (0.4500 w/ threshold)
  â†’ Sharpe: 1.6080 (1.1483 w/ threshold) | Max DD: -0.0270
   Skipping visualizations (mode=none)

--- Fold 2/6 (TimeSeriesSplit) ---
Train: 2021-06-30 to 2023-05-01 (400 samples)
Valid: 2023-05-02 to 2023-12-08 (120 samples)
Class distribution in validation: {1.0: 68, 0.0: 52}
   âœ… Positions opened: 26/120 (21.7%)
   ğŸ” Filter rejections: threshold=52 | percentile=19 | technical=19 | regime_gate=4 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=26/26 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-05-02 to 2023-12-08
      Winning trades: 12/26 (46.2% win rate)
      Losing trades: 14
      Avoided losses: 38 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000061
      Std dev: 0.004463
      Min/Max: -0.024606 / 0.015465
      Long positions: 26
  â†’ AUC: 0.4673 | AUCPR: 0.5274 | Accuracy: 0.5333 (0.4167 w/ threshold)
  â†’ Sharpe: 1.1233 (-0.0657 w/ threshold) | Max DD: -0.0706
   Skipping visualizations (mode=none)

--- Fold 3/6 (TimeSeriesSplit) ---
Train: 2022-02-03 to 2023-12-08 (400 samples)
Valid: 2023-12-11 to 2024-06-25 (120 samples)
Class distribution in validation: {1.0: 64, 0.0: 56}
   âœ… Positions opened: 14/120 (11.7%)
   ğŸ” Filter rejections: threshold=48 | percentile=18 | technical=40 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=14/14 | skipped uncertain=0 | skipped low_conf=0 | avg size=1.000

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2023-12-11 to 2024-06-25
      Winning trades: 4/14 (28.6% win rate)
      Losing trades: 10
      Avoided losses: 46 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000091
      Std dev: 0.007282
      Min/Max: -0.019148 / 0.072649
      Long positions: 14
  â†’ AUC: 0.3361 | AUCPR: 0.4641 | Accuracy: 0.3250 (0.4167 w/ threshold)
  â†’ Sharpe: 0.2945 (0.0246 w/ threshold) | Max DD: -0.0604
   Skipping visualizations (mode=none)

--- Fold 4/6 (TimeSeriesSplit) ---
Train: 2022-08-08 to 2024-06-25 (400 samples)
Valid: 2024-06-26 to 2024-12-19 (120 samples)
Class distribution in validation: {0.0: 67, 1.0: 53}
   âœ… Positions opened: 19/120 (15.8%)
   ğŸ” Filter rejections: threshold=58 | percentile=37 | technical=6 | regime_gate=0 | threshold_relaxed=0
   ğŸ“ Position sizing: sized=19/19 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.840

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-06-26 to 2024-12-19
      Winning trades: 13/19 (68.4% win rate)
      Losing trades: 6
      Avoided losses: 61 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: 0.000448
      Std dev: 0.003649
      Min/Max: -0.018217 / 0.018006
      Long positions: 19
  â†’ Threshold (sharpe): BUY=0.6400 | Sharpe: 1.56 | WinRate: 60.0%
  â†’ AUC: 0.6080 | AUCPR: 0.5366 | Accuracy: 0.6000 (0.6167 w/ threshold)
  â†’ Sharpe: 1.6216 (1.6038 w/ threshold) | Max DD: -0.0237
   Skipping visualizations (mode=none)

--- Fold 5/6 (TimeSeriesSplit) ---
Train: 2023-02-22 to 2024-12-19 (400 samples)
Valid: 2024-12-20 to 2025-08-01 (120 samples)
Class distribution in validation: {0.0: 82, 1.0: 38}
   âœ… Positions opened: 8/120 (6.7%)
   ğŸ” Filter rejections: threshold=55 | percentile=25 | technical=32 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=8/8 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.734

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2024-12-20 to 2025-08-01
      Winning trades: 2/8 (25.0% win rate)
      Losing trades: 6
      Avoided losses: 76 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 120/120):
      Mean return: -0.000091
      Std dev: 0.003185
      Min/Max: -0.019251 / 0.016019
      Long positions: 8
  â†’ AUC: 0.6277 | AUCPR: 0.4205 | Accuracy: 0.4583 (0.6500 w/ threshold)
  â†’ Sharpe: -1.2420 (-0.8488 w/ threshold) | Max DD: -0.0399
   Skipping visualizations (mode=none)

--- Fold 6/6 (TimeSeriesSplit) ---
Train: 2023-09-25 to 2025-08-01 (400 samples)
Valid: 2025-08-04 to 2026-01-29 (98 samples)
Class distribution in validation: {1.0: 56, 0.0: 42}
   âœ… Positions opened: 6/98 (6.1%)
   ğŸ” Filter rejections: threshold=77 | percentile=13 | technical=2 | regime_gate=0 | threshold_relaxed=2
   ğŸ“ Position sizing: sized=6/6 | skipped uncertain=0 | skipped low_conf=0 | avg size=0.954

   ğŸ“Š Backtest Results (Validation Period):
      Period: 2025-08-04 to 2026-01-29
      Winning trades: 2/6 (33.3% win rate)
      Losing trades: 4
      Avoided losses: 38 (correctly predicted losers)
   ğŸ“Š Returns stats (valid days: 98/98):
      Mean return: -0.000226
      Std dev: 0.004116
      Min/Max: -0.030768 / 0.016751
      Long positions: 6
  â†’ Threshold (sharpe): BUY=0.6100 | Sharpe: 1.63 | WinRate: 50.0%
  â†’ AUC: 0.3710 | AUCPR: 0.5133 | Accuracy: 0.3980 (0.4082 w/ threshold)
  â†’ Sharpe: 2.1862 (-1.1760 w/ threshold) | Max DD: -0.0517
   Skipping visualizations (mode=none)

Configured folds: 6 | Executed valid folds: 6 | Skipped: 0

================================================================================
--- CROSS-VALIDATION SUMMARY (Valid Folds) ---
================================================================================
 fold      auc    aucpr  accuracy  accuracy_thresholded    sharpe  max_drawdown  sharpe_thresholded  precision   recall       f1  threshold_buy  threshold_sell threshold_metric  adaptive_thresholds  fold_total_return  net_return  net_sharpe  turnover  fold_win_rate  fold_trades  n_trades_at_threshold  trade_ratio_at_threshold  trade_coverage  n_long_signals_raw  n_long_signals_post_filters  ev_mean_fold  filter_threshold_rejected  filter_percentile_rejected  filter_technical_rejected  filter_regime_gate_rejected  filter_confidence_rejected  filter_threshold_relaxed  calibration_enabled calibration_method         calibration_reason  calibration_error  brier
    1 0.588299 0.734954  0.641667              0.450000  1.607961     -0.026991            1.148262   0.933333 0.177215 0.297872           0.64             NaN           sharpe                 True           0.053027    0.033309    0.625647  7.887263       0.600000           15                     15                  0.125000        0.125000                  59                           15      0.054369                         61                          11                         33                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    2 0.467336 0.527369  0.533333              0.416667  1.123333     -0.070624           -0.065695   0.461538 0.176471 0.255319           0.64             NaN           sharpe                 True           0.007307   -0.042693   -1.537765 20.000000       0.538462           26                     26                  0.216667        0.216667                  68                           26      0.030729                         52                          19                         19                            4                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    3 0.336077 0.464142  0.325000              0.416667  0.294530     -0.060418            0.024552   0.285714 0.062500 0.102564           0.64             NaN           sharpe                 True           0.010875   -0.014125   -0.425440 10.000000       0.214286           14                     14                  0.116667        0.116667                  72                           14      0.035264                         48                          18                         40                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    4 0.607998 0.536624  0.600000              0.616667  1.621557     -0.023718            1.603800   0.684210 0.245283 0.361111           0.64             NaN           sharpe                 True           0.053763    0.020110    0.390384 13.461287       0.526316           19                     25                  0.208333        0.158333                  62                           19      0.031361                         58                          37                          6                            0                           0                         0                False               none disabled_by_mode_or_config                NaN    NaN
    5 0.627728 0.420536  0.458333              0.650000 -1.242025     -0.039915           -0.848813   0.250000 0.052632 0.086956           0.61             NaN           sharpe                 True          -0.010913   -0.018251   -1.142576  2.935035       0.500000            8                      8                  0.066667        0.066667                  65                            8      0.073816                         55                          25                         32                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN
    6 0.370961 0.513332  0.397959              0.408163  2.186201     -0.051707           -1.176027   0.333333 0.035714 0.064516           0.61             NaN           sharpe                 True          -0.022105   -0.026874   -1.359333  1.907527       0.333333            6                     10                  0.102041        0.061224                  21                            6      0.034889                         77                          13                          2                            0                           0                         2                False               none disabled_by_mode_or_config                NaN    NaN

--- AGGREGATE STATISTICS ---
AUC:                  0.4997 Â± 0.1268
AUCPR:                0.5328 Â± 0.1083
Accuracy:             0.4927 Â± 0.1214
Accuracy (threshold): 0.4930 Â± 0.1101
Sharpe Ratio:         0.9319 Â± 1.2389
Sharpe (threshold):   0.1143 Â± 1.0882
Net Sharpe:           -0.5748 Â± 0.9231
Net Return:           -0.0081 Â± 0.0290
Turnover:             9.3652 Â± 6.7739
Trade Coverage:       0.1241 Â± 0.0584
EV Mean/Fold:         0.04340 Â± 0.01726
Coverage Ratio:       1.0000
Max Drawdown:         -0.0456 Â± 0.0187
================================================================================

ğŸ“Š Logging results to accumulative JSON...
   âœ… Run 836 logged successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ACCUMULATIVE RUN LOG SUMMARY                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Runs: 836                                    â•‘
â•‘ Best AUC: 0.6764                              â•‘
â•‘ Best Accuracy: 0.5944                      â•‘
â•‘ Best Sharpe Ratio: 2.0518                  â•‘
â•‘ Best Net Sharpe: 1.8530                   â•‘
â•‘                                                            â•‘
â•‘ Average AUC: 0.5433                         â•‘
â•‘ Average Accuracy: 0.5327                 â•‘
â•‘ Average Sharpe Ratio: 1.0431             â•‘
â•‘                                                            â•‘
â•‘ AUC Variance: 0.000620                      â•‘
â•‘ Accuracy Variance: 0.000515             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
   âœ… Run summary exported to out/runs_summary.csv

--- Top 15 Feature Importances ---
          feature  importance
distance_to_ma200    0.111655
           roc_20    0.110204
        ema_short    0.101479
         ema_long    0.095172
             macd    0.092785
           ADX_14    0.085552
  close_vix_ratio    0.084132
    volatility_20    0.068969
            macds    0.066547
              mfi    0.064813
   price_to_sma20    0.062893
              atr    0.055801
    lstm_latent_9    0.000000
    lstm_latent_5    0.000000
    lstm_latent_4    0.000000

âš ï¸ Features with <1% importance (13 total):
   lstm_latent_9, lstm_latent_5, lstm_latent_4, lstm_latent_3, lstm_latent_1, lstm_latent_0, lstm_latent_8, lstm_latent_7, lstm_latent_6, lstm_dir_5d...
   ğŸ’¡ Consider removing these in future runs for better performance
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                   ğŸ”® FINAL ENSEMBLE RECOMMENDATION - AAPL                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚  Ensemble Statistics:                                                        â”‚
â”‚    â€¢ Number of Models: 6                                                     â”‚
â”‚    â€¢ Average Probability: 57.6%                                              â”‚
â”‚    â€¢ Max Probability: 68.6%                                                  â”‚
â”‚    â€¢ Min Probability: 42.3%                                                  â”‚
â”‚    â€¢ Confidence (Spread): 26.3% (Low consensus)                              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ TRADING RECOMMENDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                              â”‚
â”‚   Valid from: 2026-02-27                                                     â”‚
â”‚                                                                              â”‚
â”‚   Entry Point:                                                               â”‚
â”‚     ğŸ’° Price: $264.18                                                        â”‚
â”‚                                                                              â”‚
â”‚   Target Levels:                                                             â”‚
â”‚     ğŸ¯ Profit Target: $280.54 (+6.19%)                                       â”‚
â”‚     ğŸ›‘ Stop Loss:     $256.00 (-3.10%)                                       â”‚
â”‚                                                                              â”‚
â”‚   Dynamic Risk Config:                                                       â”‚
â”‚   {                                                                          â”‚
â”‚     "dynamic_risk": {                                                        â”‚
â”‚       "type": "Volatility_Adjusted",                                         â”‚
â”‚       "params": {                                                            â”‚
â”‚         "k_tp": 2.5,                                                         â”‚
â”‚         "k_sl": 1.25,                                                        â”‚
â”‚         "vol_metric": "rolling_std_20d"                                      â”‚
â”‚       }                                                                      â”‚
â”‚     }                                                                        â”‚
â”‚   }                                                                          â”‚
â”‚                                                                              â”‚
â”‚   Forecast:                                                                  â”‚
â”‚     ğŸ“Š Win Probability: 57.6%                                                â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     RECOMMENDATION: HOLD / WAIT                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Signal not clear enough â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Recommendation payload:
{
  "entry": 264.17999267578125,
  "profit_target": 280.5402180432999,
  "stop_loss": 255.99987999202193,
  "probability": 0.5763011028369268,
  "dynamic_risk": {
    "type": "Volatility_Adjusted",
    "params": {
      "k_tp": 2.5,
      "k_sl": 1.25,
      "vol_metric": "rolling_std_20d"
    }
  }
}

   ğŸ§­ Decision state: WATCHLIST | EV=0.02007 | Quality=0.076 | reason=below_dynamic_threshold
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline execution completed successfully!                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Pipeline finished.                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
